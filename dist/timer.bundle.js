(()=>{"use strict";var e={409:(e,t,r)=>{r.d(t,{xN:()=>s,RL:()=>a,RK:()=>i});var n=r(594),o=r(771);function s(){var e=!1;null===i(n.Rd)&&(e=!0),null===i(n.oi)&&(e=!0),null===!localStorage.getItem(o.Do)&&(e=!0),null===!localStorage.getItem(o.mn)&&(e=!0),null===i(o.XB)&&(e=!0),e&&(a(n.Rd,{}),a(n.oi,0),a(o.mn,"complete"),a(o.Do,0),a(o.XB,{}))}function a(e,t){localStorage.setItem(e,JSON.stringify(t))}function i(e){return JSON.parse(localStorage.getItem(e))}},771:(e,t,r)=>{r.d(t,{Do:()=>l,mn:()=>c,XB:()=>d,rA:()=>u,Nt:()=>m,_c:()=>p,E3:()=>f,qc:()=>h,yJ:()=>v,RU:()=>y,hY:()=>k});var n=r(409),o=r(594);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw s}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l="pomo_session_id",c="latest_pomo_session_status",d="pomo_session_map",u={INACTIVE:"inactive",BREAK:"break",LONG_BREAK:"longbreak",ACTIVE:"active",COMPLETE:"complete"},m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.allTasks=[],this.mode=u.INACTIVE,this.time=0,this.pomosElapsed=0,this.startDate=new Date}var t,r;return t=e,(r=[{key:"currentTask",value:function(){var e=this.allTasks.filter((function(e){return!e.completed}));return e.length>0?e[0]:null}},{key:"addTask",value:function(e){(0,o.rs)(e),this.allTasks.push(e)}},{key:"deleteTask",value:function(e){(0,o.c_)(e.id);for(var t=0;t<this.allTasks.length;t++){var r=this.allTasks[t];if(e.id===r.id)return void this.allTasks.splice(t,1)}}},{key:"completeTask",value:function(e){var t,r=s(this.allTasks);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.id===e)return n.completed=!0,!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"getNextTask",value:function(){var e,t=s(this.allTasks);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!1===r.completed)return r}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"incrementTaskPomosUsed",value:function(e){var t,r=s(this.allTasks);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.id===e)return n.pomosUsed+=1,void(this.pomosElapsed+=1)}}catch(e){r.e(e)}finally{r.f()}}},{key:"isBreak",value:function(){return this.mode===u.LONG_BREAK||this.mode===u.BREAK}},{key:"reorderTasks",value:function(){}},{key:"getPomosLeftInSession",value:function(){var e=0;return this.allTasks.forEach((function(t){e+=Math.max(t.pomosRequired-t.pomosUsed,0)})),e}},{key:"parseSessionFromObj",value:function(e){return this.id=e.id,this.mode=e.mode,this.time=e.time,this.pomosElapsed=e.pomosElapsed,this.startDate=new Date(e.startDate),this.allTasks=e.allTasks.map((function(e){var t=new o.iQ;return t.parseTaskFromObj(e)})),this}},{key:"serializeIntoObj",value:function(){return{id:this.id,allTasks:this.allTasks.map((function(e){return e.serializeIntoObj()})),mode:this.mode,time:this.time,pomosElapsed:this.pomosElapsed,startDate:this.startDate.getTime()}}}])&&i(t.prototype,r),e}();function p(e){var t=(0,n.RK)(d),r=new m;return t[e]?r.parseSessionFromObj(t[e]):null}function f(e){var t=(0,n.RK)(d);t[e.id]=e.serializeIntoObj(),(0,n.RL)(d,t)}function h(){var e=parseInt(localStorage.getItem(l));return localStorage.setItem(l,e+1),e}function v(e){localStorage.setItem(c,e)}function y(){return"complete"===localStorage.getItem(c)?null:parseInt(localStorage.getItem(l))-1}function k(){var e=y();if(null===e)return!1;var t=p(e);return null!==t&&t.mode!==u.COMPLETE&&t.mode!==u.INACTIVE}},594:(e,t,r)=>{r.d(t,{iQ:()=>a,Rd:()=>i,oi:()=>l,rs:()=>c,c_:()=>d,zT:()=>u});var n=r(409),o=r(771);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionID=t,this.id=-1,this.title=r,this.description=n,this.pomosRequired=o,this.completed=!1,this.pomosUsed=0}var t,r;return t=e,(r=[{key:"parseTaskFromObj",value:function(t){var r=new e(t.sessionID,t.title,t.description,t.pomosRequired);return r.completed=t.completed,r.id=t.id,r.pomosUsed=t.pomosUsed,r}},{key:"serializeIntoObj",value:function(){return{title:this.title,description:this.description,pomosRequired:this.pomosRequired,completed:this.completed,pomosUsed:this.pomosUsed,id:this.id,sessionID:this.sessionID}}}])&&s(t.prototype,r),e}(),i="pomo_task_map",l="pomo_task_index";function c(e){var t=(0,n.RK)(i);if(!t[e.id]){var r=parseInt((0,n.RK)(l));e.id=r,(0,n.RL)(l,r+1)}var o=e.serializeIntoObj();return t[e.id]=o,(0,n.RL)(i,t),e.id}function d(e){var t=(0,n.RK)(i);delete t[e],(0,n.RL)(i,t)}function u(){var e=(0,o.RU)();if(null===e)return!1;var t=(0,o._c)(e);return null!==t&&null!==t.currentTask()}}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{function e(e){var t,r=e%60;t=r<10?"0"+r:r;var n=Math.floor(e/60);return(n<10?"0"+n:n)+":"+t}var t=r(409),n=r(771),o=r(594),s="day",a="night";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=s;return e.getHours()<4?t=a:e.getHours()<18?t=s:e.getHours()<24&&(t=a),t}function l(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw s}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}window.addEventListener("DOMContentLoaded",(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=0,r=6,n=e.getDay(),o=localStorage.getItem("bg-seed");null!==o&&o[0]==n||(o=n+"-"+Math.floor(Math.random()*r),localStorage.setItem("bg-seed",o));var s=i(e);t=parseInt(o[2]),document.getElementById("backdrop").style.backgroundImage='url("./assets/images/backgrounds/'.concat(s,"/bg").concat(t,'.jpg")')}();var r=new URLSearchParams(window.location.search),s=r.get("loadSaved"),a=document.getElementById("taskCreator"),c=document.getElementById("addTaskModal"),d=document.getElementById("taskList"),u=document.getElementById("startTimer"),m=document.getElementById("currentTask"),p=document.getElementById("taskList"),f=document.getElementById("timer-progress"),h=document.getElementById("distractedWrapper"),v=document.getElementById("completeSession"),y=document.getElementById("EndBreakEarlyWrapper");if(v.onclick=function(){k.mode=n.rA.COMPLETE,(0,n.E3)(k)},(0,t.xN)(),"false"!=s||!(0,o.zT)()||confirm("By starting a new timer, you will lose any unfinished tasks from your previous session")){var k=null;if("true"==s){var g=(0,n.RU)();if(k=(0,n._c)(g),(0,n.hY)()&&k.mode!=n.rA.INACTIVE)C(),A();else{var T=(0,n.qc)();(0,n.yJ)("in-progress");var E=k.allTasks;E.forEach((function(e){e.sessionID=T,(0,o.rs)(e)})),(k=new n.Nt(T)).time=5,k.allTasks=E,(0,n.E3)(k),C()}}else if("false"==s){var b=(0,n.qc)();(0,n.yJ)("in-progress"),(k=new n.Nt(b)).time=5,(0,n.E3)(k),C()}r.set("loadSaved",!0),f.setDisplayText(e(k.time)),f.setPercentage(k.time/5),k.mode===n.rA.BREAK?(w(),f.setPercentage(k.time/300)):k.mode===n.rA.LONG_BREAK&&(w(),f.setPercentage(k.time/SVGFEColorMatrixElement)),y.onclick=function(){new Audio("assets/audio/breakAlarm.mp3").play(),I(),k.time=5,k.mode=n.rA.ACTIVE,f.setDisplayText(e(k.time)),f.setPercentage(k.time/5),(0,n.E3)(k)},u.onclick=A,c.shadowRoot.getElementById("save-btn").addEventListener("click",(function(){var e,t,r,s=c.elements.values;if(null!=s){var a=(0,n.RU)(),i=new o.iQ(a,s.taskName,s.description,parseInt(s.pomosRequired));B(i),k.addTask(i),(0,n.E3)(k),e=c.shadowRoot.getElementById("task-name").elements.wrapper,t=c.shadowRoot.getElementById("pomos-required").elements.wrapper,r=c.shadowRoot.getElementById("description").elements.wrapper,e.innerText=e.placeholder,e.userTyped=void 0,e.setAttribute("class","pomo-input placeholder"),t.innerText=t.placeholder,t.userTyped=void 0,t.setAttribute("class","pomo-input placeholder"),r.innerText=r.placeholder,r.userTyped=void 0,r.setAttribute("class","pomo-input placeholder"),c.elements.values=void 0}})),a.onclick=function(){c.displayModal()}}else window.location="./index.html";function A(){m.setAttribute("class","currentTaskWorkTime"),f.setSize("1.5rem"),d.setAttribute("class","taskListWorkTime"),document.getElementById("timerWrapper").setAttribute("class","timerWrapperWorkTime"),h.style.display="block",document.getElementById("completeSessionWrapper").setAttribute("class","completeSessionWrapperWorkTime"),document.getElementById("taskCreatorWrapper").style.display="none",document.getElementById("currentTaskWrapper").style.display="block",R(),k.mode===n.rA.INACTIVE&&(k.mode=n.rA.ACTIVE,(0,n.E3)(k)),setInterval((function(){if((k=(0,n._c)(k.id)).time-=1,k.time<0&&(k.time=0),0==k.time)if(k.mode===n.rA.ACTIVE){new Audio("assets/audio/workAlarm.mp3").play(),w(),k.pomosElapsed+=1;var t=m.childNodes[0];t.incrementPomosUsed(),t.task.pomosUsed+=1,k.incrementTaskPomosUsed(t.task.id),(0,n.E3)(k),t.setAttribute("pomosused",1+parseInt(t.getAttribute("pomosused"))),k.pomosElapsed%4==0?(k.time=600,k.mode=n.rA.LONG_BREAK):(k.time=300,k.mode=n.rA.BREAK)}else k.mode!==n.rA.COMPLETE&&(new Audio("assets/audio/breakAlarm.mp3").play(),I(),k.time=5,k.mode=n.rA.ACTIVE);document.title=e(k.time),f.setDisplayText(e(k.time)),k.mode===n.rA.ACTIVE?(f.setPercentage(k.time/5),document.title+=" - Work"):k.mode===n.rA.BREAK?(f.setPercentage(k.time/300),document.title+=" - Break"):k.mode===n.rA.LONG_BREAK&&(f.setPercentage(k.time/600),document.title+=" - Long Break"),(0,n.E3)(k)}),1e3);var t=m.childNodes[0];t.setFinishTaskCallback((function(){S(),R()}));var r=k.currentTask();t.task=r}function I(){document.getElementById("timer-status").innerText="Pomo Time",m.setAttribute("class","currentTaskWorkTime"),p.setAttribute("class","taskListWorkTime"),h.style.display="block",y.style.display="none",timerWrapper.setAttribute("class","timerWrapperWorkTime"),completeSessionWrapper.setAttribute("class","completeSessionWrapperWorkTime")}function w(){m.setAttribute("class","currentTaskBreakTime"),p.setAttribute("class","taskListBreakTime"),document.getElementById("timer-status").innerText="Break Time",y.style.display="block",h.style.display="none",timerWrapper.setAttribute("class","timerWrapperBreakTime"),completeSessionWrapper.setAttribute("class","completeSessionWrapperBreakTime")}function B(e){var t='<pomo-task description ="'.concat(e.description,'" pomosUsed="').concat(e.pomosUsed,'", pomosRequired ="').concat(e.pomosRequired,'">').concat(e.title,"</pomo-task>");d.insertAdjacentHTML("beforeend",t);var r=d.childNodes[d.childNodes.length-1];r.setFinishTaskCallback((function(){S()})),r.setDeleteTaskCallback((function(){N(e.id)})),r.task=e}function R(){p.childNodes[0];var e=k.getNextTask();if(null===e)return k.mode=n.rA.COMPLETE,(0,n.E3)(k),void(window.location="./history.html");var t='<pomo-task description="'.concat(e.description,'" pomosUsed="').concat(e.pomosUsed,'" pomosRequired=').concat(e.pomosRequired,">").concat(e.title,"</pomo-task>");m.insertAdjacentHTML("beforeend",t),p.removeChild(p.childNodes[0]);var r=m.childNodes[m.childNodes.length-1];r.setFinishTaskCallback((function(){S(),R()})),r.setDeleteTaskCallback((function(){N(e.id)})),r.task=e}function S(){var e,t=[],r=l(m.childNodes);try{var o=function(){var r=e.value;r.completed&&(t.push(r.task.id),r.hide(),setTimeout((function(){m.removeChild(r)}),200))};for(r.s();!(e=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}var s,a=l(p.childNodes);try{var i=function(){var e=s.value;e.completed&&(t.push(e.task.id),e.hide(),setTimeout((function(){p.removeChild(e)}),200))};for(a.s();!(s=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}t.forEach((function(e){k.completeTask(e)})),(0,n.E3)(k)}function N(e){var t=m.childNodes;if(t.length){var r=t[t.length-1].task;if(r.id===e&&confirm("Are you sure you want to delete this task?"))return k.deleteTask(r),m.removeChild(m.childNodes[t.length-1]),R(),void(0,n.E3)(k)}if(p.childNodes.length){var o,s=0,a=l(p.childNodes);try{for(a.s();!(o=a.n()).done;){var i=o.value.task;if(i.id===e&&confirm("Are you sure you want to delete this task?"))return k.deleteTask(i),p.removeChild(p.childNodes[s]),void(0,n.E3)(k);s++}}catch(e){a.e(e)}finally{a.f()}}}function C(){var e=(0,n.RU)(),t=[];if(null!==e){var r=k.allTasks;Object.values(r).forEach((function(r){console.log(r),r.sessionID!==e||r.completed||t.push(r)})),t.forEach((function(e){B(e)}))}var o,s=l(p.childNodes);try{for(s.s();!(o=s.n()).done;)o.value.setFinishTaskCallback((function(){S()}))}catch(e){s.e(e)}finally{s.f()}}}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvZGF0YWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Nlc3Npb24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Rhc2suanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL3V0aWxzL2Zvcm1hdC10aW1lLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy91dGlscy90aGVtZS5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvdGltZXIuanMiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZURhdGFiYXNlIiwibmVlZFRvSW5pdGlhbGl6ZSIsImdldE9iamVjdCIsIlBPTU9fVEFTS19NQVAiLCJQT01PX1RBU0tfSU5ERVgiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiUE9NT19TRVNTSU9OX0lEIiwiTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMiLCJQT01PX1NFU1NJT05fTUFQIiwic3RvcmVPYmplY3QiLCJrZXkiLCJvYmplY3QiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiUE9NT19TRVNTSU9OX01PREVTIiwiSU5BQ1RJVkUiLCJCUkVBSyIsIkxPTkdfQlJFQUsiLCJBQ1RJVkUiLCJDT01QTEVURSIsIlBvbW9TZXNzaW9uIiwiaWQiLCJ0aGlzIiwiYWxsVGFza3MiLCJtb2RlIiwidGltZSIsInBvbW9zRWxhcHNlZCIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJhbGxJblByb2dyZXNzVGFza3MiLCJmaWx0ZXIiLCJ0YXNrIiwiY29tcGxldGVkIiwibGVuZ3RoIiwic3RvcmVUYXNrIiwicHVzaCIsImRlbGV0ZVRhc2tCeVRhc2tJRCIsImkiLCJzdG9yZWRUYXNrIiwic3BsaWNlIiwicG9tb3NVc2VkIiwibGVmdCIsImZvckVhY2giLCJNYXRoIiwibWF4IiwicG9tb3NSZXF1aXJlZCIsInNlc3Npb25fb2JqIiwibWFwIiwidGFza09iaiIsInQiLCJUYXNrIiwicGFyc2VUYXNrRnJvbU9iaiIsInNlcmlhbGl6ZUludG9PYmoiLCJnZXRUaW1lIiwiZ2V0UG9tb1Nlc3Npb24iLCJhbGxTZXNzaW9ucyIsInAiLCJwYXJzZVNlc3Npb25Gcm9tT2JqIiwic3RvcmVQb21vU2Vzc2lvbiIsInNlc3Npb24iLCJnZXROZXdTZXNzaW9uSUQiLCJwcmV2SUQiLCJwYXJzZUludCIsInNldEN1cnJlbnRTZXNzaW9uU3RhdHVzIiwic3RhdHVzIiwiZ2V0TGF0ZXN0U2Vzc2lvbklEIiwidGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uIiwic2Vzc2lvbklEIiwiY3VycmVudFBvbW9TZXNzaW9uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInRhc2tfb2JqIiwidGFza19tYXAiLCJvYmoiLCJhcmVUaGVyZVVuZmluaXNoZWRUYXNrc0Zyb21MYXN0U2Vzc2lvbiIsIm9sZFNlc3Npb25JRCIsImN1cnJlbnRUYXNrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZm9ybWF0VGltZSIsInNlY29uZHMiLCJzc3RyIiwicyIsIm0iLCJmbG9vciIsIlRIRU1FX01PREVTIiwiZ2V0VGhlbWVNb2RlIiwidG9kYXkiLCJ0aW1lUGVyaW9kIiwiZ2V0SG91cnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwibnVtQkdzIiwiZ2V0RGF5Iiwic2VlZCIsInJhbmRvbSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInNlbGVjdEFuZFNldFRoZW1lIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJsb2FkU2F2ZWQiLCJhZGRUYXNrQnV0dG9uIiwibW9kYWwiLCJ0YXNrTGlzdCIsInN0YXJ0VGltZXJCdXR0b24iLCJjdXJyZW50VGFza0hUTUwiLCJ0YXNrTGlzdEhUTUwiLCJ0aW1lclByb2dyZXNzQ2lyY2xlIiwiZGlzdHJhY3RlZEJ1dHRvbiIsImNvbXBsZXRlU2Vzc2lvbkJ1dHRvbiIsIkVuZEJyZWFrRWFybHlCdXR0b24iLCJvbmNsaWNrIiwiY29uZmlybSIsImxvYWRUYXNrcyIsImluaXRpYXRlVGltZXIiLCJvbGRUYXNrcyIsInNldCIsInNldERpc3BsYXlUZXh0Iiwic2V0UGVyY2VudGFnZSIsInJlbmRlckJyZWFrTW9kZSIsIlNWR0ZFQ29sb3JNYXRyaXhFbGVtZW50IiwiQXVkaW8iLCJwbGF5IiwicmVuZGVyQWN0aXZlTW9kZSIsInNoYWRvd1Jvb3QiLCJ0YXNrTmFtZSIsInRhc2tWYWx1ZXMiLCJlbGVtZW50cyIsInZhbHVlcyIsInVuZGVmaW5lZCIsIm5ld1Rhc2siLCJyZW5kZXJUYXNrSW50b1Rhc2tMaXN0IiwiYWRkVGFzayIsIndyYXBwZXIiLCJpbm5lclRleHQiLCJwbGFjZWhvbGRlciIsInVzZXJUeXBlZCIsInNldEF0dHJpYnV0ZSIsImRpc3BsYXlNb2RhbCIsInNldFNpemUiLCJkaXNwbGF5Iiwic3RhcnROZXdUYXNrIiwic2V0SW50ZXJ2YWwiLCJjdXJyZW50VGFza0ZpcnN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwiaW5jcmVtZW50UG9tb3NVc2VkIiwiaW5jcmVtZW50VGFza1BvbW9zVXNlZCIsImdldEF0dHJpYnV0ZSIsInNldEZpbmlzaFRhc2tDYWxsYmFjayIsInJlbW92ZUNvbXBsZXRlZFRhc2tzIiwidGltZXJXcmFwcGVyIiwiY29tcGxldGVTZXNzaW9uV3JhcHBlciIsImN1cnJlbnRUYXNrRWxlbWVudCIsImluc2VydEFkamFjZW50SFRNTCIsImVsZW1lbnQiLCJzZXREZWxldGVUYXNrQ2FsbGJhY2siLCJkZWxldGVUYXNrQnlJZCIsIm5leHRUYXNrIiwiZ2V0TmV4dFRhc2siLCJjdXJyZW50VGFza1RvQmVBZGRlZCIsInJlbW92ZUNoaWxkIiwiY29tcGxldGVkSWRzIiwibm9kZSIsImhpZGUiLCJzZXRUaW1lb3V0IiwiY29tcGxldGVUYXNrIiwiY3VycmVudFRhc2tFbGVtZW50TGlzdCIsImRlbGV0ZVRhc2siLCJ0YXNrcyIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJrR0FHTyxTQUFTQSxJQUVaLElBQUlDLEdBQW1CLEVBQ1UsT0FBN0JDLEVBQVVDLFFBQ1ZGLEdBQW1CLEdBRVksT0FBL0JDLEVBQVVFLFFBQ1ZILEdBQW1CLEdBRXdCLFFBQTFDSSxhQUFhQyxRQUFRQyxRQUN0Qk4sR0FBbUIsR0FFbUMsUUFBckRJLGFBQWFDLFFBQVFFLFFBQ3RCUCxHQUFtQixHQUVhLE9BQWhDQyxFQUFVTyxRQUNWUixHQUFtQixHQUluQkEsSUFDQVMsRUFBWVAsS0FBZSxJQUMzQk8sRUFBWU4sS0FBaUIsR0FDN0JNLEVBQVlGLEtBQTRCLFlBQ3hDRSxFQUFZSCxLQUFpQixHQUM3QkcsRUFBWUQsS0FBa0IsS0FXL0IsU0FBU0MsRUFBWUMsRUFBS0MsR0FDN0JQLGFBQWFRLFFB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QWFzQyxZQUZBLElBRWhDLDJCQUE0QyxLQUNwQ3JJLEVBRG9DLFFBQ3hCQSxLQUNoQixHQUFJQSxFQUFLVixLQUFPQSxHQUNSK0csUUFBUSw4Q0FJUixPQUhBaEUsRUFBbUJ1SCxXQUFXNUosR0FDOUIrRixFQUFhc0QsWUFBWXRELEVBQWFzQyxXQUFXL0gsU0FDakRxQixRQUFpQlUsR0FJekIvQixLQVo0QixnQ0FxQnhDLFNBQVNnRyxJQUNMLElBQUloSCxHQUFLNEMsVUFDTDFDLEVBQVcsR0FDZixHQUFXLE9BQVBGLEVBQWEsQ0FDYixJQUFJdUssRUFBUXhILEVBQW1CN0MsU0FDL0IrRCxPQUFPOEQsT0FBT3dDLEdBQU9sSixTQUFRLFNBQUNYLEdBQzFCOEosUUFBUUMsSUFBSS9KLEdBQ1JBLEVBQUtvQyxZQUFjOUMsR0FBT1UsRUFBS0MsV0FDL0JULEVBQVNZLEtBQUtKLE1BR3RCUixFQUFTbUIsU0FBUSxTQUFDWCxHQUNkd0gsRUFBdUJ4SCxNQVpkLFVBZUErRixFQUFhc0MsWUFmYixJQWVqQiwyQkFBMEMsUUFDakNJLHVCQUFzQixXQUN2QkMsT0FqQlMsb0MiLCJmaWxlIjoidGltZXIuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUE9NT19UQVNLX0lOREVYLCBQT01PX1RBU0tfTUFQIH0gZnJvbSBcIi4vdGFza1wiO1xuaW1wb3J0IHsgUE9NT19TRVNTSU9OX0lELCBMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgUE9NT19TRVNTSU9OX01BUCB9IGZyb20gXCIuL3Nlc3Npb25cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSgpIHtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIGluaXRpYWxpemVcbiAgICBsZXQgbmVlZFRvSW5pdGlhbGl6ZSA9IGZhbHNlO1xuICAgIGlmIChnZXRPYmplY3QoUE9NT19UQVNLX01BUCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChnZXRPYmplY3QoUE9NT19UQVNLX0lOREVYKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQT01PX1NFU1NJT05fSUQpID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyB0aGVuIGluaXRpYWxpemVcbiAgICBpZiAobmVlZFRvSW5pdGlhbGl6ZSkge1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB7fSk7XG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19JTkRFWCwgMCk7XG4gICAgICAgIHN0b3JlT2JqZWN0KExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTLCBcImNvbXBsZXRlXCIpO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fSUQsIDApO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fTUFQLCB7fSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RGF0YWJhc2UoKSB7XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1RBU0tfTUFQXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fVEFTS19JTkRFWF07XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVU107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1NFU1NJT05fSURdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19TRVNTSU9OX01BUF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZU9iamVjdChrZXksIG9iamVjdCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkob2JqZWN0KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T2JqZWN0KGtleSkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xufSIsIi8qKlxuICogVGhpcyBmaWxlIGlzIHJlbGF0ZWQgdG8gZmluZGluZyBwb21vIHNlc3Npb25zXG4gKi9cbmltcG9ydCB7IGdldE9iamVjdCwgc3RvcmVPYmplY3QgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgZGVsZXRlVGFza0J5VGFza0lELCBzdG9yZVRhc2ssIFRhc2sgfSBmcm9tIFwiLi90YXNrXCI7XG5cblxuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9JRCA9IFwicG9tb19zZXNzaW9uX2lkXCI7XG5leHBvcnQgY29uc3QgTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMgPSBcImxhdGVzdF9wb21vX3Nlc3Npb25fc3RhdHVzXCI7XG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX01BUCA9IFwicG9tb19zZXNzaW9uX21hcFwiO1xuXG4vKiogdGhlIGRpZmZlcmVudCBwb21vIHNlc3Npb24gbW9kZXMgYXMgY29uc3RhbnRzICovXG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX01PREVTID0ge1xuICAvKiogd2hlbiB0aGUgdXNlciBpcyBpbiB0aGUgaW50ZXJmYWNlIG9mIGNyZWF0aW5nIGEgbmV3IHRpbWVyIGFuZCBoYXMgbm90IHN0YXJ0ZWQgdGhlaXIgbmV3IHNlc3Npb24geWV0ICovXG4gIElOQUNUSVZFOiBcImluYWN0aXZlXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGJyZWFrIHRpbWVyICovXG4gIEJSRUFLOiBcImJyZWFrXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGxvbmdlciBicmVhayB0aW1lciAqL1xuICBMT05HX0JSRUFLOiBcImxvbmdicmVha1wiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBhY3RpdmUgcG9tbyB3b3JrIHRpbWUgKi9cbiAgQUNUSVZFOiBcImFjdGl2ZVwiLFxuICAvKiogd2hlbiB0aGUgdXNlciBtYXJrcyB0aGlzIHBvbW8gc2Vzc2lvbiBhcyBjb21wbGV0ZSwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRhc2tzIGFyZSBjb21wbGV0ZWQgb3Igbm90ICovXG4gIENPTVBMRVRFOiBcImNvbXBsZXRlXCIsXG59O1xuXG5leHBvcnQgY2xhc3MgUG9tb1Nlc3Npb24ge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFBvbW8gU2Vzc2lvbiBvYmplY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gaWQgb2YgdGhpcyBzZXNzaW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICAvKiogQHR5cGUge1Rhc2tbXX0gLSBhIGxpc3Qgb2YgYWxsIHRhc2tzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHNlc3Npb24gKi9cbiAgICB0aGlzLmFsbFRhc2tzID0gW107XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9IC0gdGhlIGN1cnJlbnQgbW9kZSBvZiB0aGUgcG9tbyBzZXNzaW9uICovXG4gICAgdGhpcy5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFO1xuICAgIC8qKiBAdHlwZSB7TnVtYmVyfSAtIHRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHBvbW8gc2Vzc2lvbiAqL1xuICAgIHRoaXMudGltZSA9IDA7XG5cbiAgICAvKiogQHR5cGUge051bWJlcn0gLSBudW1iZXIgb2YgcG9tb3MgZWxhcHNlZCBzdWNjZXNmdWxseSBmb3IgdGhpcyBwb21vIHNlc3Npb24gKi9cbiAgICB0aGlzLnBvbW9zRWxhcHNlZCA9IDA7XG5cbiAgICB0aGlzLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBAcmV0dXJucyB7VGFzayB8IG51bGwgfSAtIHRoZSBjdXJyZW50IHRhc2sgZm9yIHRoaXMgcG9tbyBzZXNzaW9uIG9yIG51bGwgaWYgdGhlcmUgYXJlIG5vIHRhc2tzIGxlZnRcbiAgICovXG4gIGN1cnJlbnRUYXNrKCkge1xuICAgIGxldCBhbGxJblByb2dyZXNzVGFza3MgPSB0aGlzLmFsbFRhc2tzLmZpbHRlcigodGFzaykgPT4gIXRhc2suY29tcGxldGVkKTtcbiAgICBpZiAoYWxsSW5Qcm9ncmVzc1Rhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGFsbEluUHJvZ3Jlc3NUYXNrc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBuZXcgdGFza1xuICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAqL1xuICBhZGRUYXNrKHRhc2spIHtcbiAgICBzdG9yZVRhc2sodGFzayk7XG4gICAgdGhpcy5hbGxUYXNrcy5wdXNoKHRhc2spO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSB0YXNrXG4gICAqIEBwYXJhbSB7VGFza30gdGFzayBcbiAgICovXG4gIGRlbGV0ZVRhc2sodGFzaykge1xuICAgIGRlbGV0ZVRhc2tCeVRhc2tJRCh0YXNrLmlkKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWxsVGFza3MubGVuZ3RoOyBpKyspe1xuICAgICAgY29uc3Qgc3RvcmVkVGFzayA9IHRoaXMuYWxsVGFza3NbaV07XG4gICAgICBpZiAodGFzay5pZCA9PT0gc3RvcmVkVGFzay5pZCkge1xuICAgICAgICB0aGlzLmFsbFRhc2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgdGhlIGdpdmVuIHRhc2sgYXNzb2NpYXRlZCB0byB0aGUgaWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBjb21wbGV0ZWQsIGZhbHNlIGlmIG5vIHRhc2sgZm91bmRcbiAgICovXG4gIGNvbXBsZXRlVGFzayhpZCkge1xuICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgIHRhc2suY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV4dCBpbmNvbXBsZXRlIHRhc2sgaW4gdGhlIG9yZGVyIG9yIG51bGwgaWYgYWxsIGNvbXBsZXRlZFxuICAgKiBAcmV0dXJucyB7VGFzayB8IG51bGx9XG4gICAqL1xuICBnZXROZXh0VGFzaygpIHtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suY29tcGxldGVkID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEluY3JlbWVudCB0aGUgcG9tb3MgdXNlZCBmb3IgYSB0YXNrIGFuZCBpbmNyZW1lbnQgcG9tb3NFbGFwc2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAgICovXG4gIGluY3JlbWVudFRhc2tQb21vc1VzZWQoaWQpIHtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgIHRhc2sucG9tb3NVc2VkICs9IDE7XG4gICAgICAgIHRoaXMucG9tb3NFbGFwc2VkICs9IDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXG4gICAqIEByZXR1cm5zIHRydWUgaWYgc2Vzc2lvbiBpcyBpbiBicmVhayBtb2RlIHJpZ2h0IG5vdywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBpc0JyZWFrKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLIHx8IHRoaXMubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkJSRUFLO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE9cbiAgICovXG4gIHJlb3JkZXJUYXNrcygpIHtcblxuICB9XG5cbiAgZ2V0UG9tb3NMZWZ0SW5TZXNzaW9uKCkge1xuICAgIGxldCBsZWZ0ID0gMDtcbiAgICB0aGlzLmFsbFRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGxlZnQgKz0gTWF0aC5tYXgodGFzay5wb21vc1JlcXVpcmVkIC0gdGFzay5wb21vc1VzZWQsIDApO1xuICAgIH0pO1xuICAgIHJldHVybiBsZWZ0O1xuICB9XG4gIHBhcnNlU2Vzc2lvbkZyb21PYmooc2Vzc2lvbl9vYmopIHtcbiAgICB0aGlzLmlkID0gc2Vzc2lvbl9vYmouaWQ7XG4gICAgdGhpcy5tb2RlID0gc2Vzc2lvbl9vYmoubW9kZTtcbiAgICB0aGlzLnRpbWUgPSBzZXNzaW9uX29iai50aW1lO1xuICAgIHRoaXMucG9tb3NFbGFwc2VkID0gc2Vzc2lvbl9vYmoucG9tb3NFbGFwc2VkO1xuICAgIHRoaXMuc3RhcnREYXRlID0gbmV3IERhdGUoc2Vzc2lvbl9vYmouc3RhcnREYXRlKTtcbiAgICB0aGlzLmFsbFRhc2tzID0gc2Vzc2lvbl9vYmouYWxsVGFza3MubWFwKCh0YXNrT2JqKSA9PiB7XG4gICAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tPYmopO1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2VyaWFsaXplSW50b09iaigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsIGFsbFRhc2tzOiB0aGlzLmFsbFRhc2tzLm1hcCgodGFzaykgPT4gdGFzay5zZXJpYWxpemVJbnRvT2JqKCkpLCBtb2RlOiB0aGlzLm1vZGUsIHRpbWU6IHRoaXMudGltZSwgcG9tb3NFbGFwc2VkOiB0aGlzLnBvbW9zRWxhcHNlZCwgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKClcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0IGEgcG9tbyBzZXNzaW9uIG9iamVjdFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICogQHJldHVybnMge1BvbW9TZXNzaW9uIHwgbnVsbH0gdGhlIHNlc3Npb24gZm9yIHRoaXMgaWQgb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzZXNzaW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb21vU2Vzc2lvbihpZCkge1xuICBjb25zdCBhbGxTZXNzaW9ucyA9IGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKTtcbiAgbGV0IHAgPSBuZXcgUG9tb1Nlc3Npb24oKTtcbiAgaWYgKCFhbGxTZXNzaW9uc1tpZF0pIHJldHVybiBudWxsO1xuICByZXR1cm4gcC5wYXJzZVNlc3Npb25Gcm9tT2JqKGFsbFNlc3Npb25zW2lkXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVBvbW9TZXNzaW9uKHNlc3Npb24pIHtcbiAgY29uc3QgYWxsU2Vzc2lvbnMgPSBnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCk7XG4gIGFsbFNlc3Npb25zW3Nlc3Npb24uaWRdID0gc2Vzc2lvbi5zZXJpYWxpemVJbnRvT2JqKCk7XG4gIHN0b3JlT2JqZWN0KFBPTU9fU0VTU0lPTl9NQVAsIGFsbFNlc3Npb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ld1Nlc3Npb25JRCgpIHtcbiAgbGV0IHByZXZJRCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCkpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShQT01PX1NFU1NJT05fSUQsIHByZXZJRCArIDEpO1xuICByZXR1cm4gcHJldklEO1xufVxuXG4vKipcbiAqIFNldCB0aGUgY3VycmVudCBzZXNzaW9uJ3Mgc3RhdHVzXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIC0gY2FuIGJlIFwiY29tcGxldGVcIiBvciBcImluLXByb2dyZXNzXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzKHN0YXR1cykge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgc3RhdHVzKTtcbn1cblxuLyoqXG4gKiBXaWxsIHJldHVybiB0aGUgc2Vzc2lvbiBJRCBvZiB0aGUgbGFzdCBzZXNzaW9uIGlmIGl0IHdhcyBub3QgZW5kZWQuIE90aGVyd2lzZSBpZiB0aGUgbGFzdCBzZXNzaW9uIGRvZXMgbm90IGV4aXN0IFxuICogb3Igd2FzIGVuZGVkIGFscmVhZHksIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBudWxsXG4gKiBcbiAqIEByZXR1cm5zIHtudW1iZXIgfCBudWxsfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF0ZXN0U2Vzc2lvbklEKCkge1xuICBsZXQgc3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMpO1xuICBpZiAoc3RhdHVzID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oUE9NT19TRVNTSU9OX0lEKSkgLSAxO1xuICB9XG59XG5cbi8qKlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gdHJ1ZSBpZiB0aGVyZSBpcyBhIHVuZmluaXNoZWQgc2Vzc2lvbiB0aGF0IHdhcyBub3QgY29tcGxldGVkIG9yIHF1aXR0ZWQuIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkge1xuICBsZXQgc2Vzc2lvbklEID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gIGlmIChzZXNzaW9uSUQgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgbGV0IGN1cnJlbnRQb21vU2Vzc2lvbiA9IGdldFBvbW9TZXNzaW9uKHNlc3Npb25JRCk7XG4gIGlmIChjdXJyZW50UG9tb1Nlc3Npb24gIT09IG51bGwgJiYgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgIT09IFBPTU9fU0VTU0lPTl9NT0RFUy5DT01QTEVURSAmJiBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSAhPT0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGludWVBY3RpdmVTZXNzaW9uKCkge1xuICBpZiAodGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkpIHtcbiAgICB3aW5kb3cubG9jYXRpb24gPSBcIi90aW1lci5odG1sP2xvYWRTYXZlZD10cnVlXCI7XG4gIH1cbn0iLCJpbXBvcnQgeyBnZXRPYmplY3QsIHN0b3JlT2JqZWN0IH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24gfSBmcm9tIFwiLi9zZXNzaW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklEIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb24gXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbW9zUmVxdWlyZWQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbklELCB0aXRsZSwgZGVzY3JpcHRpb24sIHBvbW9zUmVxdWlyZWQpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uSUQgPSBzZXNzaW9uSUQ7XG4gICAgICAgIHRoaXMuaWQgPSAtMTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucG9tb3NSZXF1aXJlZCA9IHBvbW9zUmVxdWlyZWQ7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucG9tb3NVc2VkID0gMDtcbiAgICB9XG4gICAgcGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaikge1xuICAgICAgICBsZXQgdGFzayA9IG5ldyBUYXNrKHRhc2tfb2JqLnNlc3Npb25JRCwgdGFza19vYmoudGl0bGUsIHRhc2tfb2JqLmRlc2NyaXB0aW9uLCB0YXNrX29iai5wb21vc1JlcXVpcmVkKTtcbiAgICAgICAgdGFzay5jb21wbGV0ZWQgPSB0YXNrX29iai5jb21wbGV0ZWQ7XG4gICAgICAgIHRhc2suaWQgPSB0YXNrX29iai5pZDtcbiAgICAgICAgdGFzay5wb21vc1VzZWQgPSB0YXNrX29iai5wb21vc1VzZWQ7XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbiAgICBzZXJpYWxpemVJbnRvT2JqKCkge1xuICAgICAgICByZXR1cm4geyB0aXRsZTogdGhpcy50aXRsZSwgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sIHBvbW9zUmVxdWlyZWQ6IHRoaXMucG9tb3NSZXF1aXJlZCwgY29tcGxldGVkOiB0aGlzLmNvbXBsZXRlZCwgcG9tb3NVc2VkOiB0aGlzLnBvbW9zVXNlZCwgaWQ6IHRoaXMuaWQsIHNlc3Npb25JRDogdGhpcy5zZXNzaW9uSUQgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBQT01PX1RBU0tfTUFQID0gXCJwb21vX3Rhc2tfbWFwXCI7XG5leHBvcnQgY29uc3QgUE9NT19UQVNLX0lOREVYID0gXCJwb21vX3Rhc2tfaW5kZXhcIjtcblxuLyoqXG4gKiBXaWxsIHN0b3JlIGEgbmV3IG9yIHVwZGF0ZWQgdGFzayBpbnRvIGxvY2FsIHN0b3JhZ2VcbiAqIFxuICogSGFzIGEgc2lkZSBlZmZlY3Qgb2YgYWRkaW5nIHRoZSBpZCBvZiB0aGUgbmV3IHRhc2sgaWYgaXQgd2FzbnQgc3RvcmVkIGluIHN0b3JhZ2UgYmVmb3JlXG4gKiBcbiAqIEBwYXJhbSB7VGFza30gdGFza1xuICogQHJldHVybnMge251bWJlcn0gLSB0aGUgaWQgb2YgdGhlIHRhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVGFzayh0YXNrKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGlmICghdGFza19tYXBbdGFzay5pZF0pIHtcbiAgICAgICAgLy8gaWYgdGFzayBtYXAgZG9lcyBub3QgaGF2ZSB0aGlzIHRhc2ssIGNyZWF0ZSBhIG5ldyBpbmRleFxuICAgICAgICBsZXQgaWQgPSBwYXJzZUludChnZXRPYmplY3QoUE9NT19UQVNLX0lOREVYKSk7XG4gICAgICAgIHRhc2suaWQgPSBpZDtcbiAgICAgICAgLy8gaW5jcmVtZW50IGdsb2JhbCBpZFxuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfSU5ERVgsIGlkICsgMSk7XG4gICAgfVxuICAgIGxldCBvYmogPSB0YXNrLnNlcmlhbGl6ZUludG9PYmooKTtcbiAgICB0YXNrX21hcFt0YXNrLmlkXSA9IG9iajtcbiAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB0YXNrX21hcCk7XG4gICAgcmV0dXJuIHRhc2suaWQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlkXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gKiBAcmV0dXJucyB7VGFza31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2soaWQpIHtcbiAgICBsZXQgdGFza19tYXAgPSBnZXRPYmplY3QoUE9NT19UQVNLX01BUCk7XG4gICAgbGV0IHRhc2tfb2JqID0gdGFza19tYXBbaWRdO1xuICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tfb2JqKTtcbiAgICByZXR1cm4gdDtcblxufVxuLyoqXG4gKiBHZXQgYWxsIHRhc2tzXG4gKiBcbiAqIEByZXR1cm5zIHtNYXA8bnVtYmVyLCBUYXNrPn0gLSBhIG1hcCBmcm9tIHRhc2sgaWQgdG8gdGFza1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsVGFza3MoKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGxldCBwYXJzZWRfdGFza19tYXAgPSB7fTtcbiAgICBmb3IgKGxldCBpZCBpbiB0YXNrX21hcCkge1xuICAgICAgICBsZXQgdGFza19vYmogPSB0YXNrX21hcFtpZF07XG4gICAgICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICAgICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaik7XG4gICAgICAgIHBhcnNlZF90YXNrX21hcFtpZF0gPSB0O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkX3Rhc2tfbWFwO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHNwZWNpZmljIHRhc2sgZnJvbSBkYXRhYmFzZSBieSB0aGUgdW5pcXVlIHRhc2sgSURcbiAqIFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVGFza0J5VGFza0lEKGlkKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGRlbGV0ZSB0YXNrX21hcFtpZF07XG4gICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwgdGFza19tYXApO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgdW5maW5pc2hlZCB0YXNrcyBmcm9tIHRoZSBwcmV2aW91cyBzZXNzaW9uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSB0cnVlIGlmIHVuaWZpbmlzaGVkIHRhc2tzIGV4aXN0LCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFyZVRoZXJlVW5maW5pc2hlZFRhc2tzRnJvbUxhc3RTZXNzaW9uKCkge1xuICAgIGxldCBvbGRTZXNzaW9uSUQgPSBnZXRMYXRlc3RTZXNzaW9uSUQoKTtcbiAgICBpZiAob2xkU2Vzc2lvbklEID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHNlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihvbGRTZXNzaW9uSUQpO1xuICAgIGlmIChzZXNzaW9uID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHNlc3Npb24uY3VycmVudFRhc2soKSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyoqXG4gKiBUYWtlcyBhIG51bWJlciBvZiBzZWNvbmRzIGFuZCBmb3JtYXRzIGl0IGludG8gYSBNTTpTUyBmb3JtYXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kcykge1xuICBsZXQgcyA9IHNlY29uZHMgJSA2MDtcbiAgbGV0IHNzdHIgPSBcIlwiO1xuICBpZiAocyA8IDEwKSB7XG4gICAgc3N0ciA9IFwiMFwiICsgcztcbiAgfSBlbHNlIHtcbiAgICBzc3RyID0gcztcbiAgfVxuICBsZXQgbSA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgbGV0IG1zdHIgPSBcIlwiO1xuICBpZiAobSA8IDEwKSB7XG4gICAgbXN0ciA9IFwiMFwiICsgbTtcbiAgfSBlbHNlIHtcbiAgICBtc3RyID0gbTtcbiAgfVxuICByZXR1cm4gbXN0ciArIFwiOlwiICsgc3N0cjtcbn0iLCIvKipcbiAqIFdpbGwgcmFuZG9tbHkgcGljayBhIHRoZW1lIGFuZCB1bmlxdWUgYmFja2dyb3VuZCBkZXBlbmRpbmcgb24gd2hhdCBkYXkgaXQgaXMgYW5kIHdoYXQgdGltZSBpdCBpcyBhbmQgc2V0IGl0IG9uIHRoZSBwYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RBbmRTZXRUaGVtZSh0b2RheSA9IG5ldyBEYXRlKCkpIHtcbiAgbGV0IGlkID0gMDtcbiAgbGV0IG51bUJHcyA9IDY7XG5cbiAgbGV0IGQgPSB0b2RheS5nZXREYXkoKTtcblxuICBsZXQgc2VlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYmctc2VlZFwiKTtcblxuICBpZiAoc2VlZCA9PT0gbnVsbCB8fCBzZWVkWzBdICE9IGQpIHtcbiAgICBzZWVkID0gZCArIFwiLVwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtQkdzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImJnLXNlZWRcIiwgc2VlZCk7XG4gIH1cbiAgbGV0IHRpbWVQZXJpb2QgPSBnZXRUaGVtZU1vZGUodG9kYXkpO1xuICBpZCA9IHBhcnNlSW50KHNlZWRbMl0pO1xuXG4gIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZHJvcFwiKTtcbiAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmRzLyR7dGltZVBlcmlvZH0vYmcke2lkfS5qcGdcIilgO1xufTtcblxuZXhwb3J0IGNvbnN0IFRIRU1FX01PREVTID0ge1xuICBEQVk6IFwiZGF5XCIsXG4gIE5JR0hUOiBcIm5pZ2h0XCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhlbWVNb2RlKHRvZGF5ID0gbmV3IERhdGUoKSkge1xuICBsZXQgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLkRBWTtcbiAgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCA0KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLk5JR0hUO1xuICB9XG4gIGVsc2UgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCAxOCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5EQVk7XG4gIH0gZWxzZSBpZiAodG9kYXkuZ2V0SG91cnMoKSA8IDI0KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLk5JR0hUO1xuICB9XG4gIHJldHVybiB0aW1lUGVyaW9kO1xufSIsImltcG9ydCB7IGZvcm1hdFRpbWUgfSBmcm9tIFwiLi91dGlscy9mb3JtYXQtdGltZVwiO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZURhdGFiYXNlIH0gZnJvbSBcIi4vZGF0YWJhc2VcIjtcbmltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0TmV3U2Vzc2lvbklELCBnZXRQb21vU2Vzc2lvbiwgUG9tb1Nlc3Npb24sIFBPTU9fU0VTU0lPTl9NT0RFUywgc2V0Q3VycmVudFNlc3Npb25TdGF0dXMsIHN0b3JlUG9tb1Nlc3Npb24sIHRoZXJlSXNVbmZpbmlzaGVkU2Vzc2lvbiB9IGZyb20gXCIuL2RhdGFiYXNlL3Nlc3Npb25cIjtcbmltcG9ydCB7IGFyZVRoZXJlVW5maW5pc2hlZFRhc2tzRnJvbUxhc3RTZXNzaW9uLCBzdG9yZVRhc2t9IGZyb20gXCIuL2RhdGFiYXNlL3Rhc2tcIjtcbmltcG9ydCB7IFRhc2sgfSBmcm9tIFwiLi9kYXRhYmFzZS90YXNrXCI7XG5pbXBvcnQgeyBzZWxlY3RBbmRTZXRUaGVtZSB9IGZyb20gXCIuL3V0aWxzL3RoZW1lXCI7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIHNlbGVjdEFuZFNldFRoZW1lKCk7XG4gICAgXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgICBjb25zdCBsb2FkU2F2ZWQgPSB1cmxQYXJhbXMuZ2V0KFwibG9hZFNhdmVkXCIpO1xuXG4gICAgbGV0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tDcmVhdG9yXCIpO1xuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkVGFza01vZGFsXCIpO1xuICAgIGxldCB0YXNrTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0xpc3RcIik7XG4gICAgbGV0IHN0YXJ0VGltZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0VGltZXJcIik7XG4gICAgbGV0IGN1cnJlbnRUYXNrSFRNTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudFRhc2tcIik7XG4gICAgbGV0IHRhc2tMaXN0SFRNTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0xpc3RcIik7XG4gICAgbGV0IHRpbWVyUHJvZ3Jlc3NDaXJjbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVyLXByb2dyZXNzXCIpO1xuICAgIGxldCBkaXN0cmFjdGVkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXN0cmFjdGVkV3JhcHBlclwiKTtcbiAgICBsZXQgY29tcGxldGVTZXNzaW9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wbGV0ZVNlc3Npb25cIik7XG4gICAgbGV0IEVuZEJyZWFrRWFybHlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkVuZEJyZWFrRWFybHlXcmFwcGVyXCIpO1xuXG4gICAgY29tcGxldGVTZXNzaW9uQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkNPTVBMRVRFO1xuICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKGN1cnJlbnRQb21vU2Vzc2lvbik7XG4gICAgfTtcblxuICAgIC8vIFRPRE86IG1vdmUgdGhpcyB0aW1lIHZhcmlhYmxlIGludG8gdGhlIHBvbW8gc2Vzc2lvbiBvYmplY3QgY2xhc3MgdXNpbmcgbG9jYWxzdG9yYWdlXG4gICAgbGV0IG1heFBvbW9UaW1lID0gNTtcbiAgICBsZXQgbWF4QnJlYWtUaW1lID0gNSAqIDYwO1xuICAgIGxldCBtYXhMb25nQnJlYWtUaW1lID0gMTAgKiA2MDtcblxuICAgIFxuICAgIGluaXRpYWxpemVEYXRhYmFzZSgpO1xuICAgIGlmIChsb2FkU2F2ZWQgPT0gXCJmYWxzZVwiKSB7XG4gICAgICAgIGxldCBvbGRUYXNrc0xlZnQgPSBhcmVUaGVyZVVuZmluaXNoZWRUYXNrc0Zyb21MYXN0U2Vzc2lvbigpO1xuICAgICAgICBpZiAob2xkVGFza3NMZWZ0KSB7XG4gICAgICAgICAgICBsZXQgY29uZmlybWVkID0gY29uZmlybShcIkJ5IHN0YXJ0aW5nIGEgbmV3IHRpbWVyLCB5b3Ugd2lsbCBsb3NlIGFueSB1bmZpbmlzaGVkIHRhc2tzIGZyb20geW91ciBwcmV2aW91cyBzZXNzaW9uXCIpO1xuICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi4vaW5kZXguaHRtbFwiO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIFxuXG4gICAgLyoqIEB0eXBlIHtQb21vU2Vzc2lvbn0gKi9cbiAgICBsZXQgY3VycmVudFBvbW9TZXNzaW9uID0gbnVsbDtcblxuICAgIC8vIFVzZSBsZWZ0b3ZlciB0YXNrcyBhbmQgcmVuZGVyIHRoZW1cbiAgICBpZiAobG9hZFNhdmVkID09IFwidHJ1ZVwiKSB7XG4gICAgICAgIGxldCBzZXNzaW9uSUQgPSBnZXRMYXRlc3RTZXNzaW9uSUQoKTtcbiAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24oc2Vzc2lvbklEKTtcblxuICAgICAgICBpZiAodGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkgJiYgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgIT0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFKSB7XG4gICAgICAgICAgICBsb2FkVGFza3MoKTtcbiAgICAgICAgICAgIGluaXRpYXRlVGltZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgc2Vzc2lvbiBhbmQgdXNlIG9sZCB0YXNrcyBmcm9tIGxhc3QgdGltZVxuICAgICAgICAgICAgbGV0IHNlc3Npb25JRCA9IGdldE5ld1Nlc3Npb25JRCgpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNlc3Npb25TdGF0dXMoXCJpbi1wcm9ncmVzc1wiKTtcblxuICAgICAgICAgICAgLy8gdGFrZSB0aGUgb2xkIHRhc2tzIGFuZCB1cGRhdGUgdGhlIHNlc3Npb24gaWRzIHRvIHRoZSBuZXcgb25lXG4gICAgICAgICAgICBsZXQgb2xkVGFza3MgPSBjdXJyZW50UG9tb1Nlc3Npb24uYWxsVGFza3M7XG4gICAgICAgICAgICBvbGRUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXNzaW9uSUQgPSBzZXNzaW9uSUQ7XG4gICAgICAgICAgICAgICAgc3RvcmVUYXNrKHRhc2spO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbiA9IG5ldyBQb21vU2Vzc2lvbihzZXNzaW9uSUQpO1xuXG4gICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IG1heFBvbW9UaW1lO1xuICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLmFsbFRhc2tzID0gb2xkVGFza3M7XG4gICAgICAgICAgICAvLyBzYXZlIG91ciBuZXcgcG9tbyBzZXNzaW9uXG4gICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKGN1cnJlbnRQb21vU2Vzc2lvbik7XG4gICAgICAgICAgICBsb2FkVGFza3MoKTtcbiAgICAgICAgfVxuICAgIFxuICAgIH1cbiAgICBlbHNlIGlmIChsb2FkU2F2ZWQgPT0gXCJmYWxzZVwiKSB7XG4gICAgICAgIC8vIG5vdGUsIGlmIHlvdSByZWZyZXNoIGZvciBub3csIHlvdSB3aWxsIGxvc2UgeW91ciBzZXNzaW9uJ3MgY2hhbmdlcy4uLlxuICAgICAgICBsZXQgc2Vzc2lvbklEID0gZ2V0TmV3U2Vzc2lvbklEKCk7XG4gICAgICAgIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzKFwiaW4tcHJvZ3Jlc3NcIik7XG5cbiAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uID0gbmV3IFBvbW9TZXNzaW9uKHNlc3Npb25JRCk7XG4gICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi50aW1lID0gbWF4UG9tb1RpbWU7XG4gICAgICAgIC8vIHNhdmUgb3VyIG5ldyBwb21vIHNlc3Npb25cbiAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuICAgICAgICBsb2FkVGFza3MoKTtcblxuICAgIH1cblxuICAgIHVybFBhcmFtcy5zZXQoXCJsb2FkU2F2ZWRcIiwgdHJ1ZSk7XG5cbiAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldERpc3BsYXlUZXh0KGZvcm1hdFRpbWUoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUpKTtcbiAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldFBlcmNlbnRhZ2UoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLyBtYXhQb21vVGltZSk7XG4gICAgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuQlJFQUspIHtcbiAgICAgICAgcmVuZGVyQnJlYWtNb2RlKCk7XG4gICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0UGVyY2VudGFnZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSAvIG1heEJyZWFrVGltZSk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkxPTkdfQlJFQUspIHtcbiAgICAgICAgcmVuZGVyQnJlYWtNb2RlKCk7XG4gICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0UGVyY2VudGFnZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSAvIFNWR0ZFQ29sb3JNYXRyaXhFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBJbXBsZW1lbnRzIHRoZSBvbmNsaWNrIGZ1bmN0aW9uYWxpdHkgb2YgRW5kIEJyZWFrIEVhcmx5IEJ1dHRvbiwgd2hpY2ggaW1tZWRpYXRlbHkgc3RvcCB0aGUgYnJlYWsgXG4gICAgLy8gYW5kIGdvIHRvIHRoZSB3b3JrIHRpbWVcbiAgICBFbmRCcmVha0Vhcmx5QnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBicmVha0FsYXJtID0gbmV3IEF1ZGlvKFwiYXNzZXRzL2F1ZGlvL2JyZWFrQWxhcm0ubXAzXCIpO1xuICAgICAgICBicmVha0FsYXJtLnBsYXkoKTtcbiAgICAgICAgcmVuZGVyQWN0aXZlTW9kZSgpO1xuICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IG1heFBvbW9UaW1lO1xuICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9IFBPTU9fU0VTU0lPTl9NT0RFUy5BQ1RJVkU7XG4gICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0RGlzcGxheVRleHQoZm9ybWF0VGltZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSkpO1xuICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldFBlcmNlbnRhZ2UoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLyBtYXhQb21vVGltZSk7XG4gICAgICAgIHN0b3JlUG9tb1Nlc3Npb24oY3VycmVudFBvbW9TZXNzaW9uKTtcbiAgICB9O1xuXG4gICAgc3RhcnRUaW1lckJ1dHRvbi5vbmNsaWNrID0gaW5pdGlhdGVUaW1lcjtcblxuICAgIG1vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzYXZlLWJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29udGVudHNTYXZlZCk7XG4gICAgYWRkVGFza0J1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBtb2RhbC5kaXNwbGF5TW9kYWwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgb25DbGljayBmdW5jdGlvbmFsaXR5IG9mIHRoZSBTdGFydCBUaW1lciBidXR0b24sIHdoaWNoIHN0YXJ0cyB0aGUgcG9tbyB0aW1lciBhbmQgY3ljbGVzXG4gICAgICogcG9tbyBhbmQgYnJlYWsgdGltZXJzIHVudGlsIGFsbCBwb21vcyBhcmUgY29tcGxldGVkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRpYXRlVGltZXIoKSB7XG4gICAgICAgIGN1cnJlbnRUYXNrSFRNTC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImN1cnJlbnRUYXNrV29ya1RpbWVcIik7XG4gICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0U2l6ZShcIjEuNXJlbVwiKTtcblxuICAgICAgICB0YXNrTGlzdC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRhc2tMaXN0V29ya1RpbWVcIik7XG5cbiAgICAgICAgbGV0IHRpbWVyV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZXJXcmFwcGVyXCIpO1xuICAgICAgICB0aW1lcldyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0aW1lcldyYXBwZXJXb3JrVGltZVwiKTtcblxuICAgICAgICBkaXN0cmFjdGVkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cblxuICAgICAgICBsZXQgY29tcGxldGVTZXNzaW9uV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGxldGVTZXNzaW9uV3JhcHBlclwiKTtcbiAgICAgICAgY29tcGxldGVTZXNzaW9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbXBsZXRlU2Vzc2lvbldyYXBwZXJXb3JrVGltZVwiKTtcbiAgICAgICAgbGV0IHRhc2tDcmVhdG9yV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0NyZWF0b3JXcmFwcGVyXCIpO1xuICAgICAgICB0YXNrQ3JlYXRvcldyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudFRhc2tXcmFwcGVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgICAgc3RhcnROZXdUYXNrKCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuSU5BQ1RJVkUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRTtcbiAgICAgICAgICAgIHN0b3JlUG9tb1Nlc3Npb24oY3VycmVudFBvbW9TZXNzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vcmVtb3ZlcyBmaXJzdCBjaGlsZCBmcm9tIHRhc2sgbGlzdCBhbmQgYWRkcyB0byBjdXJyZW50IHRhc2tcblxuICAgICAgICBsZXQgdGltZXJMb29wID0gc2V0SW50ZXJ2YWwodGltZUNoYW5nZXIsIDEwMDApO1xuXG4gICAgICAgIGxldCBjdXJyZW50VGFza0ZpcnN0Q2hpbGQgPSBjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgY3VycmVudFRhc2tGaXJzdENoaWxkLnNldEZpbmlzaFRhc2tDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZW1vdmVDb21wbGV0ZWRUYXNrcygpO1xuICAgICAgICAgICAgc3RhcnROZXdUYXNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgY3VycmVudFRhc2sgPSBjdXJyZW50UG9tb1Nlc3Npb24uY3VycmVudFRhc2soKTtcbiAgICAgICAgY3VycmVudFRhc2tGaXJzdENoaWxkLnRhc2sgPSBjdXJyZW50VGFzaztcbiAgICAgICAgZnVuY3Rpb24gdGltZUNoYW5nZXIoKSB7XG4gICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24uaWQpO1xuICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLT0gMTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24udGltZSA8IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNlc3Npb24gaXMgaW5jb21wbGV0ZS4gaWYgaW5jb21wbGV0ZSwgXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgLy8gSWYgdGltZXIgaGl0cyAwLCB0b2dnbGUgdG8gbmV4dCBicmVhayBvciBwb21vIHRpbWVyXG4gICAgICAgICAgICBpZiAoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgd29ya0FsYXJtID0gbmV3IEF1ZGlvKFwiYXNzZXRzL2F1ZGlvL3dvcmtBbGFybS5tcDNcIik7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtBbGFybS5wbGF5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9icmVhayBcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQnJlYWtNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5wb21vc0VsYXBzZWQgKz0gMTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFRhc2tGaXJzdENoaWxkID0gY3VycmVudFRhc2tIVE1MLmNoaWxkTm9kZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrRmlyc3RDaGlsZC5pbmNyZW1lbnRQb21vc1VzZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tGaXJzdENoaWxkLnRhc2sucG9tb3NVc2VkICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5pbmNyZW1lbnRUYXNrUG9tb3NVc2VkKGN1cnJlbnRUYXNrRmlyc3RDaGlsZC50YXNrLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrRmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJwb21vc3VzZWRcIiwgMSArIHBhcnNlSW50KGN1cnJlbnRUYXNrRmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJwb21vc3VzZWRcIikpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBMb25nIGJyZWFrLCBjdXJyZW50bHkgaGFyZGNvZGVkIGFmdGVyIGV2ZXJ5IDQgcG9tb3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5wb21vc0VsYXBzZWQgJSA0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi50aW1lID0gbWF4TG9uZ0JyZWFrVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkxPTkdfQlJFQUs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gU2hvcnQgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IG1heEJyZWFrVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkJSRUFLO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE5leHQgdGltZXIgc2hvdWxkIGJlIGEgcG9tbyB0aW1lclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlICE9PSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJyZWFrQWxhcm0gPSBuZXcgQXVkaW8oXCJhc3NldHMvYXVkaW8vYnJlYWtBbGFybS5tcDNcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrQWxhcm0ucGxheSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckFjdGl2ZU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgPSBtYXhQb21vVGltZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgPSBQT01PX1NFU1NJT05fTU9ERVMuQUNUSVZFO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEFkZCBmdW5jdGlvbmFsaXR5IGZvciBtb3Zpbmcgb250byBuZXh0IHRhc2ssIHVwZGF0aW5nIHBvbW9zIHVzZWQgb24gY3VycmVudCB0YXNrLCBldGMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHVzaCB1cGRhdGVkIHRpbWUgdG8gdGhlIHBhZ2VcbiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZm9ybWF0VGltZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSk7XG4gICAgICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldERpc3BsYXlUZXh0KGZvcm1hdFRpbWUoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUpKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRSkge1xuICAgICAgICAgICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0UGVyY2VudGFnZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSAvIG1heFBvbW9UaW1lKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSArPSBcIiAtIFdvcmtcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuQlJFQUspIHtcbiAgICAgICAgICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldFBlcmNlbnRhZ2UoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLyBtYXhCcmVha1RpbWUpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlICs9IFwiIC0gQnJlYWtcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuTE9OR19CUkVBSykge1xuICAgICAgICAgICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0UGVyY2VudGFnZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSAvIG1heExvbmdCcmVha1RpbWUpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlICs9IFwiIC0gTG9uZyBCcmVha1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyQWN0aXZlTW9kZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lci1zdGF0dXNcIikuaW5uZXJUZXh0ID0gXCJQb21vIFRpbWVcIjtcbiAgICAgICAgY3VycmVudFRhc2tIVE1MLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY3VycmVudFRhc2tXb3JrVGltZVwiKTtcbiAgICAgICAgdGFza0xpc3RIVE1MLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGFza0xpc3RXb3JrVGltZVwiKTtcbiAgICAgICAgZGlzdHJhY3RlZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBFbmRCcmVha0Vhcmx5QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICB0aW1lcldyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0aW1lcldyYXBwZXJXb3JrVGltZVwiKTtcbiAgICAgICAgY29tcGxldGVTZXNzaW9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbXBsZXRlU2Vzc2lvbldyYXBwZXJXb3JrVGltZVwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJCcmVha01vZGUoKSB7XG4gICAgICAgIGN1cnJlbnRUYXNrSFRNTC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImN1cnJlbnRUYXNrQnJlYWtUaW1lXCIpO1xuICAgICAgICB0YXNrTGlzdEhUTUwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0YXNrTGlzdEJyZWFrVGltZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lci1zdGF0dXNcIikuaW5uZXJUZXh0ID0gXCJCcmVhayBUaW1lXCI7XG4gICAgICAgIEVuZEJyZWFrRWFybHlCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgZGlzdHJhY3RlZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgICAgdGltZXJXcmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGltZXJXcmFwcGVyQnJlYWtUaW1lXCIpO1xuICAgICAgICBjb21wbGV0ZVNlc3Npb25XcmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29tcGxldGVTZXNzaW9uV3JhcHBlckJyZWFrVGltZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIFJlbmRlciBhIHRhc2sgb250byB0aGUgXG4gICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAgKi9cbiAgICBmdW5jdGlvbiByZW5kZXJUYXNrSW50b1Rhc2tMaXN0KHRhc2spIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tFbGVtZW50ID0gYDxwb21vLXRhc2sgZGVzY3JpcHRpb24gPVwiJHt0YXNrLmRlc2NyaXB0aW9ufVwiIHBvbW9zVXNlZD1cIiR7dGFzay5wb21vc1VzZWR9XCIsIHBvbW9zUmVxdWlyZWQgPVwiJHt0YXNrLnBvbW9zUmVxdWlyZWR9XCI+JHt0YXNrLnRpdGxlfTwvcG9tby10YXNrPmA7XG4gICAgICAgIHRhc2tMaXN0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjdXJyZW50VGFza0VsZW1lbnQpO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFza0xpc3QuY2hpbGROb2Rlc1t0YXNrTGlzdC5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBlbGVtZW50LnNldEZpbmlzaFRhc2tDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVDb21wbGV0ZWRUYXNrcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbWVudC5zZXREZWxldGVUYXNrQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlVGFza0J5SWQodGFzay5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbGVtZW50LnRhc2sgPSB0YXNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB3ZSBzYXZlIGEgbmV3IHRhc2suXG4gICAgICogQWRkcyBuZXcgdGFzayB0byB0aGUgY3VycmVudCB0YXNrcyBsaXN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbnRlbnRzU2F2ZWQoKSB7XG4gICAgICAgIGxldCB0YXNrVmFsdWVzID0gbW9kYWwuZWxlbWVudHMudmFsdWVzO1xuICAgICAgICBpZih0YXNrVmFsdWVzICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IHNlc3Npb25JRCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGFza1ZhbHVlcyk7XG4gICAgICAgICAgICBsZXQgbmV3VGFzayA9IG5ldyBUYXNrKHNlc3Npb25JRCwgdGFza1ZhbHVlcy50YXNrTmFtZSwgdGFza1ZhbHVlcy5kZXNjcmlwdGlvbiwgcGFyc2VJbnQodGFza1ZhbHVlcy5wb21vc1JlcXVpcmVkKSk7XG4gICAgICAgICAgICByZW5kZXJUYXNrSW50b1Rhc2tMaXN0KG5ld1Rhc2spO1xuICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLmFkZFRhc2sobmV3VGFzayk7XG4gICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKGN1cnJlbnRQb21vU2Vzc2lvbik7XG5cbiAgICAgICAgICAgIHJlc2V0SW5wdXRzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgaW5wdXRzIGFuZCByZXNldHMgc3R5bGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXNldElucHV0cygpIHtcbiAgICAgICAgY29uc3QgdGFza05hbWUgPSBtb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwidGFzay1uYW1lXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgIGNvbnN0IHBvbW9zUmVxdWlyZWQgPSBtb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwicG9tb3MtcmVxdWlyZWRcIikuZWxlbWVudHMud3JhcHBlcjtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBtb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikuZWxlbWVudHMud3JhcHBlcjtcblxuICAgICAgICB0YXNrTmFtZS5pbm5lclRleHQgPSB0YXNrTmFtZS5wbGFjZWhvbGRlcjtcbiAgICAgICAgdGFza05hbWUudXNlclR5cGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0YXNrTmFtZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgcGxhY2Vob2xkZXJcIik7XG5cbiAgICAgICAgcG9tb3NSZXF1aXJlZC5pbm5lclRleHQgPSBwb21vc1JlcXVpcmVkLnBsYWNlaG9sZGVyO1xuICAgICAgICBwb21vc1JlcXVpcmVkLnVzZXJUeXBlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9tb3NSZXF1aXJlZC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgcGxhY2Vob2xkZXJcIik7XG5cbiAgICAgICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gZGVzY3JpcHRpb24ucGxhY2Vob2xkZXI7XG4gICAgICAgIGRlc2NyaXB0aW9uLnVzZXJUeXBlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IHBsYWNlaG9sZGVyXCIpO1xuXG4gICAgICAgIG1vZGFsLmVsZW1lbnRzLnZhbHVlcyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNob3dzIGEgbmV3IHRhc2sgb250byB0aGUgZGlzcGxheVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0YXJ0TmV3VGFzaygpIHtcbiAgICAgICAgbGV0IHRhc2tMaXN0Rmlyc3RDaGlsZCA9IHRhc2tMaXN0SFRNTC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICBsZXQgbmV4dFRhc2sgPSBjdXJyZW50UG9tb1Nlc3Npb24uZ2V0TmV4dFRhc2soKTtcbiAgICAgICAgaWYgKG5leHRUYXNrID09PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBjb21wbGV0ZSB0aGUgc2Vzc2lvblxuICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgPSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEU7XG4gICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKGN1cnJlbnRQb21vU2Vzc2lvbik7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPVwiLi9oaXN0b3J5Lmh0bWxcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50VGFza1RvQmVBZGRlZCA9IGA8cG9tby10YXNrIGRlc2NyaXB0aW9uPVwiJHtuZXh0VGFzay5kZXNjcmlwdGlvbn1cIiBwb21vc1VzZWQ9XCIke25leHRUYXNrLnBvbW9zVXNlZH1cIiBwb21vc1JlcXVpcmVkPSR7bmV4dFRhc2sucG9tb3NSZXF1aXJlZH0+JHtuZXh0VGFzay50aXRsZX08L3BvbW8tdGFzaz5gO1xuICAgICAgICBjdXJyZW50VGFza0hUTUwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGN1cnJlbnRUYXNrVG9CZUFkZGVkKTtcbiAgICAgICAgdGFza0xpc3RIVE1MLnJlbW92ZUNoaWxkKHRhc2tMaXN0SFRNTC5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlc1tjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgZWxlbWVudC5zZXRGaW5pc2hUYXNrQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlQ29tcGxldGVkVGFza3MoKTtcbiAgICAgICAgICAgIHN0YXJ0TmV3VGFzaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbWVudC5zZXREZWxldGVUYXNrQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlVGFza0J5SWQobmV4dFRhc2suaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbWVudC50YXNrID0gbmV4dFRhc2s7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgY29tcGxldGVkIHRhc2tzIGZyb20gZGlzcGxheSBhbmQgdXBkYXRlIHRoZSBjdXJyZW50IHBvbW8gc2Vzc2lvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUNvbXBsZXRlZFRhc2tzKCkge1xuICAgICAgICBsZXQgY29tcGxldGVkSWRzID0gW107XG4gICAgICAgIGZvciAobGV0IG5vZGUgb2YgY3VycmVudFRhc2tIVE1MLmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZElkcy5wdXNoKG5vZGUudGFzay5pZCk7XG4gICAgICAgICAgICAgICAgbm9kZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrSFRNTC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgbm9kZSBvZiB0YXNrTGlzdEhUTUwuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgaWYgKG5vZGUuY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkSWRzLnB1c2gobm9kZS50YXNrLmlkKTtcbiAgICAgICAgICAgICAgICBub2RlLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGFza0xpc3RIVE1MLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29tcGxldGVkSWRzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24uY29tcGxldGVUYXNrKGlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0b3JlUG9tb1Nlc3Npb24oY3VycmVudFBvbW9TZXNzaW9uKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVRhc2tCeUlkKGlkKSB7XG4gICAgICAgIC8vIHNlYXJjaCBjdXJyZW50IHRhc2sgbGlzdCBhbmQgdGFzayBsaXN0cyBmb3IgdGhpcyBpZCBhbmQgcmVtb3ZlIGl0IGZyb20gZGlzcGxheSBhbmQgdGhlIHBvbW8gc2Vzc2lvblxuICAgICAgICBsZXQgY3VycmVudFRhc2tFbGVtZW50TGlzdCA9IGN1cnJlbnRUYXNrSFRNTC5jaGlsZE5vZGVzO1xuICAgICAgICBpZiAoY3VycmVudFRhc2tFbGVtZW50TGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB0YXNrID0gY3VycmVudFRhc2tFbGVtZW50TGlzdFtjdXJyZW50VGFza0VsZW1lbnRMaXN0Lmxlbmd0aCAtIDFdLnRhc2s7XG4gICAgICAgICAgICBpZiAodGFzay5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrP1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24uZGVsZXRlVGFzayh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tIVE1MLnJlbW92ZUNoaWxkKGN1cnJlbnRUYXNrSFRNTC5jaGlsZE5vZGVzW2N1cnJlbnRUYXNrRWxlbWVudExpc3QubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICBzdGFydE5ld1Rhc2soKTsgICAgIFxuICAgICAgICAgICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKGN1cnJlbnRQb21vU2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tMaXN0SFRNTC5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRhc2tMaXN0SFRNTC5jaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhc2sgPSBub2RlLnRhc2s7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHRhc2s/XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24uZGVsZXRlVGFzayh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0SFRNTC5yZW1vdmVDaGlsZCh0YXNrTGlzdEhUTUwuY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKGN1cnJlbnRQb21vU2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYWxsIHRhc2tzIGZyb20gc3RvcmFnZSBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbiBhbmQgcmVuZGVyIHRoZW1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2FkVGFza3MoKSB7XG4gICAgICAgIGxldCBpZCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgICAgICBsZXQgYWxsVGFza3MgPSBbXTtcbiAgICAgICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgdGFza3MgPSBjdXJyZW50UG9tb1Nlc3Npb24uYWxsVGFza3M7XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHRhc2tzKS5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suc2Vzc2lvbklEID09PSBpZCAmJiAhdGFzay5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFsbFRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICAgICAgICByZW5kZXJUYXNrSW50b1Rhc2tMaXN0KHRhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbm9kZSBvZiB0YXNrTGlzdEhUTUwuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgbm9kZS5zZXRGaW5pc2hUYXNrQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNvbXBsZXRlZFRhc2tzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=