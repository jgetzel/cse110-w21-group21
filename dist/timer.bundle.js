(()=>{"use strict";var e={409:(e,t,r)=>{r.d(t,{xN:()=>s,RL:()=>i,RK:()=>a});var n=r(594),o=r(771);function s(){var e=!1;null===a(n.Rd)&&(e=!0),null===a(n.oi)&&(e=!0),null===!localStorage.getItem(o.Do)&&(e=!0),null===!localStorage.getItem(o.mn)&&(e=!0),null===a(o.XB)&&(e=!0),e&&(i(n.Rd,{}),i(n.oi,0),i(o.mn,"complete"),i(o.Do,0),i(o.XB,{}))}function i(e,t){localStorage.setItem(e,JSON.stringify(t))}function a(e){return JSON.parse(localStorage.getItem(e))}},771:(e,t,r)=>{r.d(t,{Do:()=>l,mn:()=>c,XB:()=>u,rA:()=>d,Nt:()=>m,_c:()=>p,E3:()=>f,qc:()=>h,yJ:()=>v,RU:()=>y,hY:()=>k});var n=r(409),o=r(594);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l="pomo_session_id",c="latest_pomo_session_status",u="pomo_session_map",d={INACTIVE:"inactive",BREAK:"break",LONG_BREAK:"longbreak",ACTIVE:"active",COMPLETE:"complete"},m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.allTasks=[],this.mode=d.INACTIVE,this.time=0,this.pomosElapsed=0,this.startDate=new Date}var t,r;return t=e,(r=[{key:"currentTask",value:function(){var e=this.allTasks.filter((function(e){return!e.completed}));return e.length>0?e[0]:null}},{key:"addTask",value:function(e){(0,o.rs)(e),this.allTasks.push(e)}},{key:"deleteTask",value:function(e){(0,o.c_)(e.id);for(var t=0;t<this.allTasks.length;t++){var r=this.allTasks[t];if(e.id===r.id)return void this.allTasks.splice(t,1)}}},{key:"completeTask",value:function(e){var t,r=s(this.allTasks);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.id===e)return n.completed=!0,!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"getNextTask",value:function(){var e,t=s(this.allTasks);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!1===r.completed)return r}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"incrementTaskPomosUsed",value:function(e){var t,r=s(this.allTasks);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.id===e)return n.pomosUsed+=1,void(this.pomosElapsed+=1)}}catch(e){r.e(e)}finally{r.f()}}},{key:"isBreak",value:function(){return this.mode===d.LONG_BREAK||this.mode===d.BREAK}},{key:"reorderTasks",value:function(){}},{key:"getPomosLeftInSession",value:function(){var e=0;return this.allTasks.forEach((function(t){e+=Math.max(t.pomosRequired-t.pomosUsed,0)})),e}},{key:"parseSessionFromObj",value:function(e){return this.id=e.id,this.mode=e.mode,this.time=e.time,this.pomosElapsed=e.pomosElapsed,this.startDate=new Date(e.startDate),this.allTasks=e.allTasks.map((function(e){var t=new o.iQ;return t.parseTaskFromObj(e)})),this}},{key:"serializeIntoObj",value:function(){return{id:this.id,allTasks:this.allTasks.map((function(e){return e.serializeIntoObj()})),mode:this.mode,time:this.time,pomosElapsed:this.pomosElapsed,startDate:this.startDate.getTime()}}}])&&a(t.prototype,r),e}();function p(e){var t=(0,n.RK)(u),r=new m;return t[e]?r.parseSessionFromObj(t[e]):null}function f(e){var t=(0,n.RK)(u);t[e.id]=e.serializeIntoObj(),(0,n.RL)(u,t)}function h(){var e=parseInt(localStorage.getItem(l));return localStorage.setItem(l,e+1),e}function v(e){localStorage.setItem(c,e)}function y(){return"complete"===localStorage.getItem(c)?null:parseInt(localStorage.getItem(l))-1}function k(){var e=y();if(null===e)return!1;var t=p(e);return null!==t&&t.mode!==d.COMPLETE&&t.mode!==d.INACTIVE}},594:(e,t,r)=>{r.d(t,{iQ:()=>i,Rd:()=>a,oi:()=>l,rs:()=>c,c_:()=>u,zT:()=>d});var n=r(409),o=r(771);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionID=t,this.id=-1,this.title=r,this.description=n,this.pomosRequired=o,this.completed=!1,this.pomosUsed=0}var t,r;return t=e,(r=[{key:"parseTaskFromObj",value:function(t){var r=new e(t.sessionID,t.title,t.description,t.pomosRequired);return r.completed=t.completed,r.id=t.id,r.pomosUsed=t.pomosUsed,r}},{key:"serializeIntoObj",value:function(){return{title:this.title,description:this.description,pomosRequired:this.pomosRequired,completed:this.completed,pomosUsed:this.pomosUsed,id:this.id,sessionID:this.sessionID}}}])&&s(t.prototype,r),e}(),a="pomo_task_map",l="pomo_task_index";function c(e){var t=(0,n.RK)(a);if(!t[e.id]){var r=parseInt((0,n.RK)(l));e.id=r,(0,n.RL)(l,r+1)}var o=e.serializeIntoObj();return t[e.id]=o,(0,n.RL)(a,t),e.id}function u(e){var t=(0,n.RK)(a);delete t[e],(0,n.RL)(a,t)}function d(){var e=(0,o.RU)();if(null===e)return!1;var t=(0,o._c)(e);return null!==t&&null!==t.currentTask()}}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{function e(e){var t,r=e%60;t=r<10?"0"+r:r;var n=Math.floor(e/60);return(n<10?"0"+n:n)+":"+t}var t=r(409),n=r(771),o=r(594),s="day",i="night";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=s;return e.getHours()<4?t=i:e.getHours()<18?t=s:e.getHours()<24&&(t=i),t}function l(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}window.addEventListener("DOMContentLoaded",(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=0,r=6,n=e.getDay(),o=localStorage.getItem("bg-seed");null!==o&&o[0]==n||(o=n+"-"+Math.floor(Math.random()*r),localStorage.setItem("bg-seed",o));var s=a(e);t=parseInt(o[2]),document.getElementById("backdrop").style.backgroundImage='url("../assets/images/backgrounds/'.concat(s,"/bg").concat(t,'.jpg")')}();var r=new URLSearchParams(window.location.search),s=r.get("loadSaved"),i=document.getElementById("taskCreator"),c=document.getElementById("addTaskModal"),u=document.getElementById("taskList"),d=document.getElementById("startTimer"),m=document.getElementById("currentTask"),p=document.getElementById("taskList"),f=document.getElementById("timer-progress"),h=document.getElementById("distractedWrapper"),v=document.getElementById("completeSession"),y=document.getElementById("EndBreakEarlyWrapper");v.onclick=function(){g.mode=n.rA.COMPLETE,(0,n.E3)(g)};var k=1500;if((0,t.xN)(),"false"!=s||!(0,o.zT)()||confirm("By starting a new timer, you will lose any unfinished tasks from your previous session")){var g=null;if("true"==s){var T=(0,n.RU)();if(g=(0,n._c)(T),(0,n.hY)()&&g.mode!=n.rA.INACTIVE)O(),A();else{var E=(0,n.qc)();(0,n.yJ)("in-progress");var b=g.allTasks;b.forEach((function(e){e.sessionID=E,(0,o.rs)(e)})),(g=new n.Nt(E)).time=k,g.allTasks=b,(0,n.E3)(g),O()}}else if("false"==s){var I=(0,n.qc)();(0,n.yJ)("in-progress"),(g=new n.Nt(I)).time=k,(0,n.E3)(g),O()}r.set("loadSaved",!0),f.setDisplayText(e(g.time)),f.setPercentage(g.time/k),g.mode===n.rA.BREAK?(B(),f.setPercentage(g.time/300)):g.mode===n.rA.LONG_BREAK&&(B(),f.setPercentage(g.time/SVGFEColorMatrixElement)),y.onclick=function(){w(),g.time=k,g.mode=n.rA.ACTIVE},d.onclick=A,c.shadowRoot.getElementById("save-btn").addEventListener("click",(function(){var e,t,r,s=c.elements.values;if(null!=s){var i=(0,n.RU)(),a=new o.iQ(i,s.taskName,s.description,parseInt(s.pomosRequired));R(a),g.addTask(a),(0,n.E3)(g),e=c.shadowRoot.getElementById("task-name").elements.wrapper,t=c.shadowRoot.getElementById("pomos-required").elements.wrapper,r=c.shadowRoot.getElementById("description").elements.wrapper,e.innerText=e.placeholder,e.userTyped=void 0,e.setAttribute("class","pomo-input placeholder"),t.innerText=t.placeholder,t.userTyped=void 0,t.setAttribute("class","pomo-input placeholder"),r.innerText=r.placeholder,r.userTyped=void 0,r.setAttribute("class","pomo-input placeholder"),c.elements.values=void 0}})),i.onclick=function(){c.displayModal()}}else window.location="./index.html";function A(){m.setAttribute("class","currentTaskWorkTime"),f.setSize("1.5rem"),u.setAttribute("class","taskListWorkTime"),document.getElementById("timerWrapper").setAttribute("class","timerWrapperWorkTime"),h.style.display="block",document.getElementById("completeSessionWrapper").setAttribute("class","completeSessionWrapperWorkTime"),document.getElementById("taskCreatorWrapper").style.display="none",document.getElementById("currentTaskWrapper").style.display="block",S(),g.mode===n.rA.INACTIVE&&(g.mode=n.rA.ACTIVE,(0,n.E3)(g)),setInterval((function(){if((g=(0,n._c)(g.id)).time-=1,g.time<0&&(g.time=0),0==g.time)if(g.mode===n.rA.ACTIVE){B(),g.pomosElapsed+=1;var t=m.childNodes[0];t.incrementPomosUsed(),t.task.pomosUsed+=1,t.setAttribute("pomosused",1+parseInt(t.getAttribute("pomosused"))),g.pomosElapsed%4==0?(g.time=600,g.mode=n.rA.LONG_BREAK):(g.time=300,g.mode=n.rA.BREAK)}else g.mode!==n.rA.COMPLETE&&(w(),g.time=k,g.mode=n.rA.ACTIVE);document.title=e(g.time),f.setDisplayText(e(g.time)),g.mode===n.rA.ACTIVE?(f.setPercentage(g.time/k),document.title+=" - Work"):g.mode===n.rA.BREAK?(f.setPercentage(g.time/300),document.title+=" - Break"):g.mode===n.rA.LONG_BREAK&&(f.setPercentage(g.time/600),document.title+=" - Long Break"),(0,n.E3)(g)}),1e3);var t=m.childNodes[0];t.setFinishTaskCallback((function(){N(),S()}));var r=g.currentTask();t.task=r}function w(){document.getElementById("timer-status").innerText="Pomo Time",m.setAttribute("class","currentTaskWorkTime"),p.setAttribute("class","taskListWorkTime"),h.style.display="block",y.style.display="none",timerWrapper.setAttribute("class","timerWrapperWorkTime"),completeSessionWrapper.setAttribute("class","completeSessionWrapperWorkTime")}function B(){m.setAttribute("class","currentTaskBreakTime"),p.setAttribute("class","taskListBreakTime"),document.getElementById("timer-status").innerText="Break Time",y.style.display="block",h.style.display="none",timerWrapper.setAttribute("class","timerWrapperBreakTime"),completeSessionWrapper.setAttribute("class","completeSessionWrapperBreakTime")}function R(e){var t='<pomo-task description ="'.concat(e.description,'" pomosUsed="').concat(e.pomosUsed,'", pomosRequired ="').concat(e.pomosRequired,'">').concat(e.title,"</pomo-task>");u.insertAdjacentHTML("beforeend",t);var r=u.childNodes[u.childNodes.length-1];r.setFinishTaskCallback((function(){N()})),r.task=e}function S(){p.childNodes[0];var e=g.getNextTask();if(null===e)return g.mode=n.rA.COMPLETE,(0,n.E3)(g),void(window.location="./history.html");var t='<pomo-task description="'.concat(e.description,'" pomosUsed="').concat(e.pomosUsed,'" pomosRequired=').concat(e.pomosRequired,">").concat(e.title,"</pomo-task>");m.insertAdjacentHTML("beforeend",t),p.removeChild(p.childNodes[0]),m.childNodes[m.childNodes.length-1].setFinishTaskCallback((function(){N(),S()})),m.childNodes[m.childNodes.length-1].task=e}function N(){var e,t=[],r=l(m.childNodes);try{var o=function(){var r=e.value;r.completed&&(t.push(r.task.id),r.hide(),setTimeout((function(){m.removeChild(r)}),200))};for(r.s();!(e=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}var s,i=l(p.childNodes);try{var a=function(){var e=s.value;e.completed&&(t.push(e.task.id),e.hide(),setTimeout((function(){p.removeChild(e)}),200))};for(i.s();!(s=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}t.forEach((function(e){g.completeTask(e)})),(0,n.E3)(g)}function O(){var e=(0,n.RU)(),t=[];if(null!==e){var r=g.allTasks;Object.values(r).forEach((function(r){console.log(r),r.sessionID!==e||r.completed||t.push(r)})),t.forEach((function(e){R(e)}))}var o,s=l(p.childNodes);try{for(s.s();!(o=s.n()).done;)o.value.setFinishTaskCallback((function(){N()}))}catch(e){s.e(e)}finally{s.f()}}}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvZGF0YWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Nlc3Npb24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Rhc2suanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL3V0aWxzL2Zvcm1hdC10aW1lLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy91dGlscy90aGVtZS5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvdGltZXIuanMiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZURhdGFiYXNlIiwibmVlZFRvSW5pdGlhbGl6ZSIsImdldE9iamVjdCIsIlBPTU9fVEFTS19NQVAiLCJQT01PX1RBU0tfSU5ERVgiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiUE9NT19TRVNTSU9OX0lEIiwiTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMiLCJQT01PX1NFU1NJT05fTUFQIiwic3RvcmVPYmplY3QiLCJrZXkiLCJvYmplY3QiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiUE9NT19TRVNTSU9OX01PREVTIiwiSU5BQ1RJVkUiLCJCUkVBSyIsIkxPTkdfQlJFQUsiLCJBQ1RJVkUiLCJDT01QTEVURSIsIlBvbW9TZXNzaW9uIiwiaWQiLCJ0aGlzIiwiYWxsVGFza3MiLCJtb2RlIiwidGltZSIsInBvbW9zRWxhcHNlZCIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJhbGxJblByb2dyZXNzVGFza3MiLCJmaWx0ZXIiLCJ0YXNrIiwiY29tcGxldGVkIiwibGVuZ3RoIiwic3RvcmVUYXNrIiwicHVzaCIsImRlbGV0ZVRhc2tCeVRhc2tJRCIsImkiLCJzdG9yZWRUYXNrIiwic3BsaWNlIiwicG9tb3NVc2VkIiwibGVmdCIsImZvckVhY2giLCJNYXRoIiwibWF4IiwicG9tb3NSZXF1aXJlZCIsInNlc3Npb25fb2JqIiwibWFwIiwidGFza09iaiIsInQiLCJUYXNrIiwicGFyc2VUYXNrRnJvbU9iaiIsInNlcmlhbGl6ZUludG9PYmoiLCJnZXRUaW1lIiwiZ2V0UG9tb1Nlc3Npb24iLCJhbGxTZXNzaW9ucyIsInAiLCJwYXJzZVNlc3Npb25Gcm9tT2JqIiwic3RvcmVQb21vU2Vzc2lvbiIsInNlc3Npb24iLCJnZXROZXdTZXNzaW9uSUQiLCJwcmV2SUQiLCJwYXJzZUludCIsInNldEN1cnJlbnRTZXNzaW9uU3RhdHVzIiwic3RhdHVzIiwiZ2V0TGF0ZXN0U2Vzc2lvbklEIiwidGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uIiwic2Vzc2lvbklEIiwiY3VycmVudFBvbW9TZXNzaW9uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInRhc2tfb2JqIiwidGFza19tYXAiLCJvYmoiLCJhcmVUaGVyZVVuZmluaXNoZWRUYXNrc0Zyb21MYXN0U2Vzc2lvbiIsIm9sZFNlc3Npb25JRCIsImN1cnJlbnRUYXNrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZm9ybWF0VGltZSIsInNlY29uZHMiLCJzc3RyIiwicyIsIm0iLCJmbG9vciIsIlRIRU1FX01PREVTIiwiZ2V0VGhlbWVNb2RlIiwidG9kYXkiLCJ0aW1lUGVyaW9kIiwiZ2V0SG91cnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwibnVtQkdzIiwiZ2V0RGF5Iiwic2VlZCIsInJhbmRvbSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInNlbGVjdEFuZFNldFRoZW1lIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJsb2FkU2F2ZWQiLCJhZGRUYXNrQnV0dG9uIiwibW9kYWwiLCJ0YXNrTGlzdCIsInN0YXJ0VGltZXJCdXR0b24iLCJjdXJyZW50VGFza0hUTUwiLCJ0YXNrTGlzdEhUTUwiLCJ0aW1lclByb2dyZXNzQ2lyY2xlIiwiZGlzdHJhY3RlZEJ1dHRvbiIsImNvbXBsZXRlU2Vzc2lvbkJ1dHRvbiIsIkVuZEJyZWFrRWFybHlCdXR0b24iLCJvbmNsaWNrIiwibWF4UG9tb1RpbWUiLCJjb25maXJtIiwibG9hZFRhc2tzIiwiaW5pdGlhdGVUaW1lciIsIm9sZFRhc2tzIiwic2V0Iiwic2V0RGlzcGxheVRleHQiLCJzZXRQZXJjZW50YWdlIiwicmVuZGVyQnJlYWtNb2RlIiwiU1ZHRkVDb2xvck1hdHJpeEVsZW1lbnQiLCJyZW5kZXJBY3RpdmVNb2RlIiwic2hhZG93Um9vdCIsInRhc2tOYW1lIiwidGFza1ZhbHVlcyIsImVsZW1lbnRzIiwidmFsdWVzIiwidW5kZWZpbmVkIiwibmV3VGFzayIsInJlbmRlclRhc2tJbnRvVGFza0xpc3QiLCJhZGRUYXNrIiwid3JhcHBlciIsImlubmVyVGV4dCIsInBsYWNlaG9sZGVyIiwidXNlclR5cGVkIiwic2V0QXR0cmlidXRlIiwiZGlzcGxheU1vZGFsIiwic2V0U2l6ZSIsImRpc3BsYXkiLCJzdGFydE5ld1Rhc2siLCJzZXRJbnRlcnZhbCIsImN1cnJlbnRUYXNrRmlyc3RDaGlsZCIsImNoaWxkTm9kZXMiLCJpbmNyZW1lbnRQb21vc1VzZWQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRGaW5pc2hUYXNrQ2FsbGJhY2siLCJyZW1vdmVDb21wbGV0ZWRUYXNrcyIsInRpbWVyV3JhcHBlciIsImNvbXBsZXRlU2Vzc2lvbldyYXBwZXIiLCJjdXJyZW50VGFza0VsZW1lbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJlbGVtZW50IiwibmV4dFRhc2siLCJnZXROZXh0VGFzayIsImN1cnJlbnRUYXNrVG9CZUFkZGVkIiwicmVtb3ZlQ2hpbGQiLCJjb21wbGV0ZWRJZHMiLCJub2RlIiwiaGlkZSIsInNldFRpbWVvdXQiLCJjb21wbGV0ZVRhc2siLCJ0YXNrcyIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJrR0FHTyxTQUFTQSxJQUVaLElBQUlDLEdBQW1CLEVBQ1UsT0FBN0JDLEVBQVVDLFFBQ1ZGLEdBQW1CLEdBRVksT0FBL0JDLEVBQVVFLFFBQ1ZILEdBQW1CLEdBRXdCLFFBQTFDSSxhQUFhQyxRQUFRQyxRQUN0Qk4sR0FBbUIsR0FFbUMsUUFBckRJLGFBQWFDLFFBQVFFLFFBQ3RCUCxHQUFtQixHQUVhLE9BQWhDQyxFQUFVTyxRQUNWUixHQUFtQixHQUluQkEsSUFDQVMsRUFBWVAsS0FBZSxJQUMzQk8sRUFBWU4sS0FBaUIsR0FDN0JNLEVBQVlGLEtBQTRCLFlBQ3hDRSxFQUFZSCxLQUFpQixHQUM3QkcsRUFBWUQsS0FBa0IsS0FXL0IsU0FBU0MsRUFBWUMsRUFBS0MsR0FDN0JQLGFBQWFRLFFBQVFGLEVBQUtHLEtBQUtDLFVBQVVILElBRXRDLFNBQVNWLEVBQVVTLEdBQ3RCLE9BQU9HLEtBQUtFLE1BQU1YLGFBQWFDLFFBQVFLLE0sMHpDQ3BDcEMsSUFBTUosRUFBa0Isa0JBQ2xC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RUFBYXFDLFlBYkYseUJBYW5CZSxFQWJtQixRQWNwQkEsRUFBS2xKLFlBQ0xpSixFQUFhOUksS0FBSytJLEVBQUtuSixLQUFLVixJQUM1QjZKLEVBQUtDLE9BQ0xDLFlBQVcsV0FDUHRELEVBQWFrRCxZQUFZRSxLQUMxQixPQU5YLDJCQUEwQyxJQWJkLDhCQXVCNUJELEVBQWF2SSxTQUFRLFNBQUNyQixHQUNsQitDLEVBQW1CaUgsYUFBYWhLLE9BRXBDcUMsUUFBaUJVLEdBT3JCLFNBQVNrRSxJQUNMLElBQUlqSCxHQUFLNEMsVUFDTDFDLEVBQVcsR0FDZixHQUFXLE9BQVBGLEVBQWEsQ0FDYixJQUFJaUssRUFBUWxILEVBQW1CN0MsU0FDL0IrRCxPQUFPNkQsT0FBT21DLEdBQU81SSxTQUFRLFNBQUNYLEdBQzFCd0osUUFBUUMsSUFBSXpKLEdBQ1JBLEVBQUtvQyxZQUFjOUMsR0FBT1UsRUFBS0MsV0FDL0JULEVBQVNZLEtBQUtKLE1BR3RCUixFQUFTbUIsU0FBUSxTQUFDWCxHQUNkdUgsRUFBdUJ2SCxNQVpkLFVBZUErRixFQUFhcUMsWUFmYixJQWVqQiwyQkFBMEMsUUFDakNHLHVCQUFzQixXQUN2QkMsT0FqQlMsb0MiLCJmaWxlIjoidGltZXIuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUE9NT19UQVNLX0lOREVYLCBQT01PX1RBU0tfTUFQIH0gZnJvbSBcIi4vdGFza1wiO1xuaW1wb3J0IHsgUE9NT19TRVNTSU9OX0lELCBMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgUE9NT19TRVNTSU9OX01BUCB9IGZyb20gXCIuL3Nlc3Npb25cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSgpIHtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIGluaXRpYWxpemVcbiAgICBsZXQgbmVlZFRvSW5pdGlhbGl6ZSA9IGZhbHNlO1xuICAgIGlmIChnZXRPYmplY3QoUE9NT19UQVNLX01BUCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChnZXRPYmplY3QoUE9NT19UQVNLX0lOREVYKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQT01PX1NFU1NJT05fSUQpID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyB0aGVuIGluaXRpYWxpemVcbiAgICBpZiAobmVlZFRvSW5pdGlhbGl6ZSkge1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB7fSk7XG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19JTkRFWCwgMCk7XG4gICAgICAgIHN0b3JlT2JqZWN0KExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTLCBcImNvbXBsZXRlXCIpO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fSUQsIDApO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fTUFQLCB7fSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RGF0YWJhc2UoKSB7XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1RBU0tfTUFQXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fVEFTS19JTkRFWF07XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVU107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1NFU1NJT05fSURdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19TRVNTSU9OX01BUF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZU9iamVjdChrZXksIG9iamVjdCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkob2JqZWN0KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T2JqZWN0KGtleSkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xufSIsIi8qKlxuICogVGhpcyBmaWxlIGlzIHJlbGF0ZWQgdG8gZmluZGluZyBwb21vIHNlc3Npb25zXG4gKi9cbmltcG9ydCB7IGdldE9iamVjdCwgc3RvcmVPYmplY3QgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgZGVsZXRlVGFza0J5VGFza0lELCBzdG9yZVRhc2ssIFRhc2sgfSBmcm9tIFwiLi90YXNrXCI7XG5cblxuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9JRCA9IFwicG9tb19zZXNzaW9uX2lkXCI7XG5leHBvcnQgY29uc3QgTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMgPSBcImxhdGVzdF9wb21vX3Nlc3Npb25fc3RhdHVzXCI7XG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX01BUCA9IFwicG9tb19zZXNzaW9uX21hcFwiO1xuXG4vKiogdGhlIGRpZmZlcmVudCBwb21vIHNlc3Npb24gbW9kZXMgYXMgY29uc3RhbnRzICovXG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX01PREVTID0ge1xuICAvKiogd2hlbiB0aGUgdXNlciBpcyBpbiB0aGUgaW50ZXJmYWNlIG9mIGNyZWF0aW5nIGEgbmV3IHRpbWVyIGFuZCBoYXMgbm90IHN0YXJ0ZWQgdGhlaXIgbmV3IHNlc3Npb24geWV0ICovXG4gIElOQUNUSVZFOiBcImluYWN0aXZlXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGJyZWFrIHRpbWVyICovXG4gIEJSRUFLOiBcImJyZWFrXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGxvbmdlciBicmVhayB0aW1lciAqL1xuICBMT05HX0JSRUFLOiBcImxvbmdicmVha1wiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBhY3RpdmUgcG9tbyB3b3JrIHRpbWUgKi9cbiAgQUNUSVZFOiBcImFjdGl2ZVwiLFxuICAvKiogd2hlbiB0aGUgdXNlciBtYXJrcyB0aGlzIHBvbW8gc2Vzc2lvbiBhcyBjb21wbGV0ZSwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRhc2tzIGFyZSBjb21wbGV0ZWQgb3Igbm90ICovXG4gIENPTVBMRVRFOiBcImNvbXBsZXRlXCIsXG59O1xuXG5leHBvcnQgY2xhc3MgUG9tb1Nlc3Npb24ge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFBvbW8gU2Vzc2lvbiBvYmplY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gaWQgb2YgdGhpcyBzZXNzaW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICAvKiogQHR5cGUge1Rhc2tbXX0gLSBhIGxpc3Qgb2YgYWxsIHRhc2tzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHNlc3Npb24gKi9cbiAgICB0aGlzLmFsbFRhc2tzID0gW107XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9IC0gdGhlIGN1cnJlbnQgbW9kZSBvZiB0aGUgcG9tbyBzZXNzaW9uICovXG4gICAgdGhpcy5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFO1xuICAgIC8qKiBAdHlwZSB7TnVtYmVyfSAtIHRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHBvbW8gc2Vzc2lvbiAqL1xuICAgIHRoaXMudGltZSA9IDA7XG5cbiAgICAvKiogQHR5cGUge051bWJlcn0gLSBudW1iZXIgb2YgcG9tb3MgZWxhcHNlZCBzdWNjZXNmdWxseSBmb3IgdGhpcyBwb21vIHNlc3Npb24gKi9cbiAgICB0aGlzLnBvbW9zRWxhcHNlZCA9IDA7XG5cbiAgICB0aGlzLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBAcmV0dXJucyB7VGFzayB8IG51bGwgfSAtIHRoZSBjdXJyZW50IHRhc2sgZm9yIHRoaXMgcG9tbyBzZXNzaW9uIG9yIG51bGwgaWYgdGhlcmUgYXJlIG5vIHRhc2tzIGxlZnRcbiAgICovXG4gIGN1cnJlbnRUYXNrKCkge1xuICAgIGxldCBhbGxJblByb2dyZXNzVGFza3MgPSB0aGlzLmFsbFRhc2tzLmZpbHRlcigodGFzaykgPT4gIXRhc2suY29tcGxldGVkKTtcbiAgICBpZiAoYWxsSW5Qcm9ncmVzc1Rhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGFsbEluUHJvZ3Jlc3NUYXNrc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBuZXcgdGFza1xuICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAqL1xuICBhZGRUYXNrKHRhc2spIHtcbiAgICBzdG9yZVRhc2sodGFzayk7XG4gICAgdGhpcy5hbGxUYXNrcy5wdXNoKHRhc2spO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSB0YXNrXG4gICAqIEBwYXJhbSB7VGFza30gdGFzayBcbiAgICovXG4gIGRlbGV0ZVRhc2sodGFzaykge1xuICAgIGRlbGV0ZVRhc2tCeVRhc2tJRCh0YXNrLmlkKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWxsVGFza3MubGVuZ3RoOyBpKyspe1xuICAgICAgY29uc3Qgc3RvcmVkVGFzayA9IHRoaXMuYWxsVGFza3NbaV07XG4gICAgICBpZiAodGFzay5pZCA9PT0gc3RvcmVkVGFzay5pZCkge1xuICAgICAgICB0aGlzLmFsbFRhc2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgdGhlIGdpdmVuIHRhc2sgYXNzb2NpYXRlZCB0byB0aGUgaWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBjb21wbGV0ZWQsIGZhbHNlIGlmIG5vIHRhc2sgZm91bmRcbiAgICovXG4gIGNvbXBsZXRlVGFzayhpZCkge1xuICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgIHRhc2suY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV4dCBpbmNvbXBsZXRlIHRhc2sgaW4gdGhlIG9yZGVyIG9yIG51bGwgaWYgYWxsIGNvbXBsZXRlZFxuICAgKiBAcmV0dXJucyB7VGFzayB8IG51bGx9XG4gICAqL1xuICBnZXROZXh0VGFzaygpIHtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suY29tcGxldGVkID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEluY3JlbWVudCB0aGUgcG9tb3MgdXNlZCBmb3IgYSB0YXNrIGFuZCBpbmNyZW1lbnQgcG9tb3NFbGFwc2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAgICovXG4gIGluY3JlbWVudFRhc2tQb21vc1VzZWQoaWQpIHtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgIHRhc2sucG9tb3NVc2VkICs9IDE7XG4gICAgICAgIHRoaXMucG9tb3NFbGFwc2VkICs9IDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXG4gICAqIEByZXR1cm5zIHRydWUgaWYgc2Vzc2lvbiBpcyBpbiBicmVhayBtb2RlIHJpZ2h0IG5vdywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBpc0JyZWFrKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLIHx8IHRoaXMubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkJSRUFLO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE9cbiAgICovXG4gIHJlb3JkZXJUYXNrcygpIHtcblxuICB9XG5cbiAgZ2V0UG9tb3NMZWZ0SW5TZXNzaW9uKCkge1xuICAgIGxldCBsZWZ0ID0gMDtcbiAgICB0aGlzLmFsbFRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGxlZnQgKz0gTWF0aC5tYXgodGFzay5wb21vc1JlcXVpcmVkIC0gdGFzay5wb21vc1VzZWQsIDApO1xuICAgIH0pO1xuICAgIHJldHVybiBsZWZ0O1xuICB9XG4gIHBhcnNlU2Vzc2lvbkZyb21PYmooc2Vzc2lvbl9vYmopIHtcbiAgICB0aGlzLmlkID0gc2Vzc2lvbl9vYmouaWQ7XG4gICAgdGhpcy5tb2RlID0gc2Vzc2lvbl9vYmoubW9kZTtcbiAgICB0aGlzLnRpbWUgPSBzZXNzaW9uX29iai50aW1lO1xuICAgIHRoaXMucG9tb3NFbGFwc2VkID0gc2Vzc2lvbl9vYmoucG9tb3NFbGFwc2VkO1xuICAgIHRoaXMuc3RhcnREYXRlID0gbmV3IERhdGUoc2Vzc2lvbl9vYmouc3RhcnREYXRlKTtcbiAgICB0aGlzLmFsbFRhc2tzID0gc2Vzc2lvbl9vYmouYWxsVGFza3MubWFwKCh0YXNrT2JqKSA9PiB7XG4gICAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tPYmopO1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2VyaWFsaXplSW50b09iaigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsIGFsbFRhc2tzOiB0aGlzLmFsbFRhc2tzLm1hcCgodGFzaykgPT4gdGFzay5zZXJpYWxpemVJbnRvT2JqKCkpLCBtb2RlOiB0aGlzLm1vZGUsIHRpbWU6IHRoaXMudGltZSwgcG9tb3NFbGFwc2VkOiB0aGlzLnBvbW9zRWxhcHNlZCwgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKClcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0IGEgcG9tbyBzZXNzaW9uIG9iamVjdFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICogQHJldHVybnMge1BvbW9TZXNzaW9uIHwgbnVsbH0gdGhlIHNlc3Npb24gZm9yIHRoaXMgaWQgb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzZXNzaW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb21vU2Vzc2lvbihpZCkge1xuICBjb25zdCBhbGxTZXNzaW9ucyA9IGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKTtcbiAgbGV0IHAgPSBuZXcgUG9tb1Nlc3Npb24oKTtcbiAgaWYgKCFhbGxTZXNzaW9uc1tpZF0pIHJldHVybiBudWxsO1xuICByZXR1cm4gcC5wYXJzZVNlc3Npb25Gcm9tT2JqKGFsbFNlc3Npb25zW2lkXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVBvbW9TZXNzaW9uKHNlc3Npb24pIHtcbiAgY29uc3QgYWxsU2Vzc2lvbnMgPSBnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCk7XG4gIGFsbFNlc3Npb25zW3Nlc3Npb24uaWRdID0gc2Vzc2lvbi5zZXJpYWxpemVJbnRvT2JqKCk7XG4gIHN0b3JlT2JqZWN0KFBPTU9fU0VTU0lPTl9NQVAsIGFsbFNlc3Npb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ld1Nlc3Npb25JRCgpIHtcbiAgbGV0IHByZXZJRCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCkpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShQT01PX1NFU1NJT05fSUQsIHByZXZJRCArIDEpO1xuICByZXR1cm4gcHJldklEO1xufVxuXG4vKipcbiAqIFNldCB0aGUgY3VycmVudCBzZXNzaW9uJ3Mgc3RhdHVzXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIC0gY2FuIGJlIFwiY29tcGxldGVcIiBvciBcImluLXByb2dyZXNzXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzKHN0YXR1cykge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgc3RhdHVzKTtcbn1cblxuLyoqXG4gKiBXaWxsIHJldHVybiB0aGUgc2Vzc2lvbiBJRCBvZiB0aGUgbGFzdCBzZXNzaW9uIGlmIGl0IHdhcyBub3QgZW5kZWQuIE90aGVyd2lzZSBpZiB0aGUgbGFzdCBzZXNzaW9uIGRvZXMgbm90IGV4aXN0IFxuICogb3Igd2FzIGVuZGVkIGFscmVhZHksIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBudWxsXG4gKiBcbiAqIEByZXR1cm5zIHtudW1iZXIgfCBudWxsfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF0ZXN0U2Vzc2lvbklEKCkge1xuICBsZXQgc3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMpO1xuICBpZiAoc3RhdHVzID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oUE9NT19TRVNTSU9OX0lEKSkgLSAxO1xuICB9XG59XG5cbi8qKlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gdHJ1ZSBpZiB0aGVyZSBpcyBhIHVuZmluaXNoZWQgc2Vzc2lvbiB0aGF0IHdhcyBub3QgY29tcGxldGVkIG9yIHF1aXR0ZWQuIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkge1xuICBsZXQgc2Vzc2lvbklEID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gIGlmIChzZXNzaW9uSUQgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgbGV0IGN1cnJlbnRQb21vU2Vzc2lvbiA9IGdldFBvbW9TZXNzaW9uKHNlc3Npb25JRCk7XG4gIGlmIChjdXJyZW50UG9tb1Nlc3Npb24gIT09IG51bGwgJiYgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgIT09IFBPTU9fU0VTU0lPTl9NT0RFUy5DT01QTEVURSAmJiBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSAhPT0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGludWVBY3RpdmVTZXNzaW9uKCkge1xuICBpZiAodGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkpIHtcbiAgICB3aW5kb3cubG9jYXRpb24gPSBcIi90aW1lci5odG1sP2xvYWRTYXZlZD10cnVlXCI7XG4gIH1cbn0iLCJpbXBvcnQgeyBnZXRPYmplY3QsIHN0b3JlT2JqZWN0IH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24gfSBmcm9tIFwiLi9zZXNzaW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklEIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb24gXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbW9zUmVxdWlyZWQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbklELCB0aXRsZSwgZGVzY3JpcHRpb24sIHBvbW9zUmVxdWlyZWQpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uSUQgPSBzZXNzaW9uSUQ7XG4gICAgICAgIHRoaXMuaWQgPSAtMTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucG9tb3NSZXF1aXJlZCA9IHBvbW9zUmVxdWlyZWQ7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucG9tb3NVc2VkID0gMDtcbiAgICB9XG4gICAgcGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaikge1xuICAgICAgICBsZXQgdGFzayA9IG5ldyBUYXNrKHRhc2tfb2JqLnNlc3Npb25JRCwgdGFza19vYmoudGl0bGUsIHRhc2tfb2JqLmRlc2NyaXB0aW9uLCB0YXNrX29iai5wb21vc1JlcXVpcmVkKTtcbiAgICAgICAgdGFzay5jb21wbGV0ZWQgPSB0YXNrX29iai5jb21wbGV0ZWQ7XG4gICAgICAgIHRhc2suaWQgPSB0YXNrX29iai5pZDtcbiAgICAgICAgdGFzay5wb21vc1VzZWQgPSB0YXNrX29iai5wb21vc1VzZWQ7XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbiAgICBzZXJpYWxpemVJbnRvT2JqKCkge1xuICAgICAgICByZXR1cm4geyB0aXRsZTogdGhpcy50aXRsZSwgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sIHBvbW9zUmVxdWlyZWQ6IHRoaXMucG9tb3NSZXF1aXJlZCwgY29tcGxldGVkOiB0aGlzLmNvbXBsZXRlZCwgcG9tb3NVc2VkOiB0aGlzLnBvbW9zVXNlZCwgaWQ6IHRoaXMuaWQsIHNlc3Npb25JRDogdGhpcy5zZXNzaW9uSUQgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBQT01PX1RBU0tfTUFQID0gXCJwb21vX3Rhc2tfbWFwXCI7XG5leHBvcnQgY29uc3QgUE9NT19UQVNLX0lOREVYID0gXCJwb21vX3Rhc2tfaW5kZXhcIjtcblxuLyoqXG4gKiBXaWxsIHN0b3JlIGEgbmV3IG9yIHVwZGF0ZWQgdGFzayBpbnRvIGxvY2FsIHN0b3JhZ2VcbiAqIFxuICogSGFzIGEgc2lkZSBlZmZlY3Qgb2YgYWRkaW5nIHRoZSBpZCBvZiB0aGUgbmV3IHRhc2sgaWYgaXQgd2FzbnQgc3RvcmVkIGluIHN0b3JhZ2UgYmVmb3JlXG4gKiBcbiAqIEBwYXJhbSB7VGFza30gdGFza1xuICogQHJldHVybnMge251bWJlcn0gLSB0aGUgaWQgb2YgdGhlIHRhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVGFzayh0YXNrKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGlmICghdGFza19tYXBbdGFzay5pZF0pIHtcbiAgICAgICAgLy8gaWYgdGFzayBtYXAgZG9lcyBub3QgaGF2ZSB0aGlzIHRhc2ssIGNyZWF0ZSBhIG5ldyBpbmRleFxuICAgICAgICBsZXQgaWQgPSBwYXJzZUludChnZXRPYmplY3QoUE9NT19UQVNLX0lOREVYKSk7XG4gICAgICAgIHRhc2suaWQgPSBpZDtcbiAgICAgICAgLy8gaW5jcmVtZW50IGdsb2JhbCBpZFxuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfSU5ERVgsIGlkICsgMSk7XG4gICAgfVxuICAgIGxldCBvYmogPSB0YXNrLnNlcmlhbGl6ZUludG9PYmooKTtcbiAgICB0YXNrX21hcFt0YXNrLmlkXSA9IG9iajtcbiAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB0YXNrX21hcCk7XG4gICAgcmV0dXJuIHRhc2suaWQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlkXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gKiBAcmV0dXJucyB7VGFza31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2soaWQpIHtcbiAgICBsZXQgdGFza19tYXAgPSBnZXRPYmplY3QoUE9NT19UQVNLX01BUCk7XG4gICAgbGV0IHRhc2tfb2JqID0gdGFza19tYXBbaWRdO1xuICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tfb2JqKTtcbiAgICByZXR1cm4gdDtcblxufVxuLyoqXG4gKiBHZXQgYWxsIHRhc2tzXG4gKiBcbiAqIEByZXR1cm5zIHtNYXA8bnVtYmVyLCBUYXNrPn0gLSBhIG1hcCBmcm9tIHRhc2sgaWQgdG8gdGFza1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsVGFza3MoKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGxldCBwYXJzZWRfdGFza19tYXAgPSB7fTtcbiAgICBmb3IgKGxldCBpZCBpbiB0YXNrX21hcCkge1xuICAgICAgICBsZXQgdGFza19vYmogPSB0YXNrX21hcFtpZF07XG4gICAgICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICAgICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaik7XG4gICAgICAgIHBhcnNlZF90YXNrX21hcFtpZF0gPSB0O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkX3Rhc2tfbWFwO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHNwZWNpZmljIHRhc2sgZnJvbSBkYXRhYmFzZSBieSB0aGUgdW5pcXVlIHRhc2sgSURcbiAqIFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVGFza0J5VGFza0lEKGlkKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGRlbGV0ZSB0YXNrX21hcFtpZF07XG4gICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwgdGFza19tYXApO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgdW5maW5pc2hlZCB0YXNrcyBmcm9tIHRoZSBwcmV2aW91cyBzZXNzaW9uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSB0cnVlIGlmIHVuaWZpbmlzaGVkIHRhc2tzIGV4aXN0LCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFyZVRoZXJlVW5maW5pc2hlZFRhc2tzRnJvbUxhc3RTZXNzaW9uKCkge1xuICAgIGxldCBvbGRTZXNzaW9uSUQgPSBnZXRMYXRlc3RTZXNzaW9uSUQoKTtcbiAgICBpZiAob2xkU2Vzc2lvbklEID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHNlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihvbGRTZXNzaW9uSUQpO1xuICAgIGlmIChzZXNzaW9uID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHNlc3Npb24uY3VycmVudFRhc2soKSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyoqXG4gKiBUYWtlcyBhIG51bWJlciBvZiBzZWNvbmRzIGFuZCBmb3JtYXRzIGl0IGludG8gYSBNTTpTUyBmb3JtYXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kcykge1xuICBsZXQgcyA9IHNlY29uZHMgJSA2MDtcbiAgbGV0IHNzdHIgPSBcIlwiO1xuICBpZiAocyA8IDEwKSB7XG4gICAgc3N0ciA9IFwiMFwiICsgcztcbiAgfSBlbHNlIHtcbiAgICBzc3RyID0gcztcbiAgfVxuICBsZXQgbSA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgbGV0IG1zdHIgPSBcIlwiO1xuICBpZiAobSA8IDEwKSB7XG4gICAgbXN0ciA9IFwiMFwiICsgbTtcbiAgfSBlbHNlIHtcbiAgICBtc3RyID0gbTtcbiAgfVxuICByZXR1cm4gbXN0ciArIFwiOlwiICsgc3N0cjtcbn0iLCIvKipcbiAqIFdpbGwgcmFuZG9tbHkgcGljayBhIHRoZW1lIGFuZCB1bmlxdWUgYmFja2dyb3VuZCBkZXBlbmRpbmcgb24gd2hhdCBkYXkgaXQgaXMgYW5kIHdoYXQgdGltZSBpdCBpcyBhbmQgc2V0IGl0IG9uIHRoZSBwYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RBbmRTZXRUaGVtZSh0b2RheSA9IG5ldyBEYXRlKCkpIHtcbiAgbGV0IGlkID0gMDtcbiAgbGV0IG51bUJHcyA9IDY7XG5cbiAgbGV0IGQgPSB0b2RheS5nZXREYXkoKTtcblxuICBsZXQgc2VlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYmctc2VlZFwiKTtcblxuICBpZiAoc2VlZCA9PT0gbnVsbCB8fCBzZWVkWzBdICE9IGQpIHtcbiAgICBzZWVkID0gZCArIFwiLVwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtQkdzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImJnLXNlZWRcIiwgc2VlZCk7XG4gIH1cbiAgbGV0IHRpbWVQZXJpb2QgPSBnZXRUaGVtZU1vZGUodG9kYXkpO1xuICBpZCA9IHBhcnNlSW50KHNlZWRbMl0pO1xuXG4gIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZHJvcFwiKTtcbiAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiLi4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kcy8ke3RpbWVQZXJpb2R9L2JnJHtpZH0uanBnXCIpYDtcbn07XG5cbmV4cG9ydCBjb25zdCBUSEVNRV9NT0RFUyA9IHtcbiAgREFZOiBcImRheVwiLFxuICBOSUdIVDogXCJuaWdodFwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRoZW1lTW9kZSh0b2RheSA9IG5ldyBEYXRlKCkpIHtcbiAgbGV0IHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5EQVk7XG4gIGlmICh0b2RheS5nZXRIb3VycygpIDwgNCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5OSUdIVDtcbiAgfVxuICBlbHNlIGlmICh0b2RheS5nZXRIb3VycygpIDwgMTgpIHtcbiAgICB0aW1lUGVyaW9kID0gVEhFTUVfTU9ERVMuREFZO1xuICB9IGVsc2UgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCAyNCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5OSUdIVDtcbiAgfVxuICByZXR1cm4gdGltZVBlcmlvZDtcbn0iLCJpbXBvcnQgeyBmb3JtYXRUaW1lIH0gZnJvbSBcIi4vdXRpbHMvZm9ybWF0LXRpbWVcIjtcbmltcG9ydCB7IGluaXRpYWxpemVEYXRhYmFzZSB9IGZyb20gXCIuL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBnZXRMYXRlc3RTZXNzaW9uSUQsIGdldE5ld1Nlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24sIFBvbW9TZXNzaW9uLCBQT01PX1NFU1NJT05fTU9ERVMsIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzLCBzdG9yZVBvbW9TZXNzaW9uLCB0aGVyZUlzVW5maW5pc2hlZFNlc3Npb24gfSBmcm9tIFwiLi9kYXRhYmFzZS9zZXNzaW9uXCI7XG5pbXBvcnQgeyBhcmVUaGVyZVVuZmluaXNoZWRUYXNrc0Zyb21MYXN0U2Vzc2lvbiwgc3RvcmVUYXNrfSBmcm9tIFwiLi9kYXRhYmFzZS90YXNrXCI7XG5pbXBvcnQgeyBUYXNrIH0gZnJvbSBcIi4vZGF0YWJhc2UvdGFza1wiO1xuaW1wb3J0IHsgc2VsZWN0QW5kU2V0VGhlbWUgfSBmcm9tIFwiLi91dGlscy90aGVtZVwiO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICBzZWxlY3RBbmRTZXRUaGVtZSgpO1xuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgY29uc3QgbG9hZFNhdmVkID0gdXJsUGFyYW1zLmdldChcImxvYWRTYXZlZFwiKTtcblxuICAgIGxldCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrQ3JlYXRvclwiKTtcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFRhc2tNb2RhbFwiKTtcbiAgICBsZXQgdGFza0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tMaXN0XCIpO1xuICAgIGxldCBzdGFydFRpbWVyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFydFRpbWVyXCIpO1xuICAgIGxldCBjdXJyZW50VGFza0hUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1cnJlbnRUYXNrXCIpO1xuICAgIGxldCB0YXNrTGlzdEhUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tMaXN0XCIpO1xuICAgIGxldCB0aW1lclByb2dyZXNzQ2lyY2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lci1wcm9ncmVzc1wiKTtcbiAgICBsZXQgZGlzdHJhY3RlZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzdHJhY3RlZFdyYXBwZXJcIik7XG4gICAgbGV0IGNvbXBsZXRlU2Vzc2lvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGxldGVTZXNzaW9uXCIpO1xuICAgIGxldCBFbmRCcmVha0Vhcmx5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJFbmRCcmVha0Vhcmx5V3JhcHBlclwiKTtcblxuICAgIGNvbXBsZXRlU2Vzc2lvbkJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9IFBPTU9fU0VTU0lPTl9NT0RFUy5DT01QTEVURTtcbiAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuICAgIH07XG5cbiAgICAvLyBUT0RPOiBtb3ZlIHRoaXMgdGltZSB2YXJpYWJsZSBpbnRvIHRoZSBwb21vIHNlc3Npb24gb2JqZWN0IGNsYXNzIHVzaW5nIGxvY2Fsc3RvcmFnZVxuICAgIGxldCBtYXhQb21vVGltZSA9IDI1ICogNjA7XG4gICAgbGV0IG1heEJyZWFrVGltZSA9IDUgKiA2MDtcbiAgICBsZXQgbWF4TG9uZ0JyZWFrVGltZSA9IDEwICogNjA7XG5cbiAgICBcbiAgICBpbml0aWFsaXplRGF0YWJhc2UoKTtcbiAgICBpZiAobG9hZFNhdmVkID09IFwiZmFsc2VcIikge1xuICAgICAgICBsZXQgb2xkVGFza3NMZWZ0ID0gYXJlVGhlcmVVbmZpbmlzaGVkVGFza3NGcm9tTGFzdFNlc3Npb24oKTtcbiAgICAgICAgaWYgKG9sZFRhc2tzTGVmdCkge1xuICAgICAgICAgICAgbGV0IGNvbmZpcm1lZCA9IGNvbmZpcm0oXCJCeSBzdGFydGluZyBhIG5ldyB0aW1lciwgeW91IHdpbGwgbG9zZSBhbnkgdW5maW5pc2hlZCB0YXNrcyBmcm9tIHlvdXIgcHJldmlvdXMgc2Vzc2lvblwiKTtcbiAgICAgICAgICAgIGlmICghY29uZmlybWVkKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gXCIuL2luZGV4Lmh0bWxcIjtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBcblxuICAgIC8qKiBAdHlwZSB7UG9tb1Nlc3Npb259ICovXG4gICAgbGV0IGN1cnJlbnRQb21vU2Vzc2lvbiA9IG51bGw7XG5cbiAgICAvLyBVc2UgbGVmdG92ZXIgdGFza3MgYW5kIHJlbmRlciB0aGVtXG4gICAgaWYgKGxvYWRTYXZlZCA9PSBcInRydWVcIikge1xuICAgICAgICBsZXQgc2Vzc2lvbklEID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbiA9IGdldFBvbW9TZXNzaW9uKHNlc3Npb25JRCk7XG5cbiAgICAgICAgaWYgKHRoZXJlSXNVbmZpbmlzaGVkU2Vzc2lvbigpICYmIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlICE9IFBPTU9fU0VTU0lPTl9NT0RFUy5JTkFDVElWRSkge1xuICAgICAgICAgICAgbG9hZFRhc2tzKCk7XG4gICAgICAgICAgICBpbml0aWF0ZVRpbWVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjcmVhdGUgbmV3IHNlc3Npb24gYW5kIHVzZSBvbGQgdGFza3MgZnJvbSBsYXN0IHRpbWVcbiAgICAgICAgICAgIGxldCBzZXNzaW9uSUQgPSBnZXROZXdTZXNzaW9uSUQoKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzKFwiaW4tcHJvZ3Jlc3NcIik7XG5cbiAgICAgICAgICAgIC8vIHRha2UgdGhlIG9sZCB0YXNrcyBhbmQgdXBkYXRlIHRoZSBzZXNzaW9uIGlkcyB0byB0aGUgbmV3IG9uZVxuICAgICAgICAgICAgbGV0IG9sZFRhc2tzID0gY3VycmVudFBvbW9TZXNzaW9uLmFsbFRhc2tzO1xuICAgICAgICAgICAgb2xkVGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICAgICAgICAgIHRhc2suc2Vzc2lvbklEID0gc2Vzc2lvbklEO1xuICAgICAgICAgICAgICAgIHN0b3JlVGFzayh0YXNrKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24gPSBuZXcgUG9tb1Nlc3Npb24oc2Vzc2lvbklEKTtcblxuICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgPSBtYXhQb21vVGltZTtcbiAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5hbGxUYXNrcyA9IG9sZFRhc2tzO1xuICAgICAgICAgICAgLy8gc2F2ZSBvdXIgbmV3IHBvbW8gc2Vzc2lvblxuICAgICAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuICAgICAgICAgICAgbG9hZFRhc2tzKCk7XG4gICAgICAgIH1cbiAgICBcbiAgICB9XG4gICAgZWxzZSBpZiAobG9hZFNhdmVkID09IFwiZmFsc2VcIikge1xuICAgICAgICAvLyBub3RlLCBpZiB5b3UgcmVmcmVzaCBmb3Igbm93LCB5b3Ugd2lsbCBsb3NlIHlvdXIgc2Vzc2lvbidzIGNoYW5nZXMuLi5cbiAgICAgICAgbGV0IHNlc3Npb25JRCA9IGdldE5ld1Nlc3Npb25JRCgpO1xuICAgICAgICBzZXRDdXJyZW50U2Vzc2lvblN0YXR1cyhcImluLXByb2dyZXNzXCIpO1xuXG4gICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbiA9IG5ldyBQb21vU2Vzc2lvbihzZXNzaW9uSUQpO1xuICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IG1heFBvbW9UaW1lO1xuICAgICAgICAvLyBzYXZlIG91ciBuZXcgcG9tbyBzZXNzaW9uXG4gICAgICAgIHN0b3JlUG9tb1Nlc3Npb24oY3VycmVudFBvbW9TZXNzaW9uKTtcbiAgICAgICAgbG9hZFRhc2tzKCk7XG5cbiAgICB9XG5cbiAgICB1cmxQYXJhbXMuc2V0KFwibG9hZFNhdmVkXCIsIHRydWUpO1xuXG4gICAgdGltZXJQcm9ncmVzc0NpcmNsZS5zZXREaXNwbGF5VGV4dChmb3JtYXRUaW1lKGN1cnJlbnRQb21vU2Vzc2lvbi50aW1lKSk7XG4gICAgdGltZXJQcm9ncmVzc0NpcmNsZS5zZXRQZXJjZW50YWdlKGN1cnJlbnRQb21vU2Vzc2lvbi50aW1lIC8gbWF4UG9tb1RpbWUpO1xuICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkJSRUFLKSB7XG4gICAgICAgIHJlbmRlckJyZWFrTW9kZSgpO1xuICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldFBlcmNlbnRhZ2UoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLyBtYXhCcmVha1RpbWUpO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLKSB7XG4gICAgICAgIHJlbmRlckJyZWFrTW9kZSgpO1xuICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldFBlcmNlbnRhZ2UoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLyBTVkdGRUNvbG9yTWF0cml4RWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gSW1wbGVtZW50cyB0aGUgb25jbGljayBmdW5jdGlvbmFsaXR5IG9mIEVuZCBCcmVhayBFYXJseSBCdXR0b24sIHdoaWNoIGltbWVkaWF0ZWx5IHN0b3AgdGhlIGJyZWFrIFxuICAgIC8vIGFuZCBnbyB0byB0aGUgd29yayB0aW1lXG4gICAgRW5kQnJlYWtFYXJseUJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZW5kZXJBY3RpdmVNb2RlKCk7XG4gICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi50aW1lID0gbWF4UG9tb1RpbWU7XG4gICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRTtcbiAgICB9O1xuXG4gICAgc3RhcnRUaW1lckJ1dHRvbi5vbmNsaWNrID0gaW5pdGlhdGVUaW1lcjtcblxuICAgIG1vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzYXZlLWJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29udGVudHNTYXZlZCk7XG4gICAgYWRkVGFza0J1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBtb2RhbC5kaXNwbGF5TW9kYWwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgb25DbGljayBmdW5jdGlvbmFsaXR5IG9mIHRoZSBTdGFydCBUaW1lciBidXR0b24sIHdoaWNoIHN0YXJ0cyB0aGUgcG9tbyB0aW1lciBhbmQgY3ljbGVzXG4gICAgICogcG9tbyBhbmQgYnJlYWsgdGltZXJzIHVudGlsIGFsbCBwb21vcyBhcmUgY29tcGxldGVkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRpYXRlVGltZXIoKSB7XG4gICAgICAgIGN1cnJlbnRUYXNrSFRNTC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImN1cnJlbnRUYXNrV29ya1RpbWVcIik7XG4gICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0U2l6ZShcIjEuNXJlbVwiKTtcblxuICAgICAgICB0YXNrTGlzdC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRhc2tMaXN0V29ya1RpbWVcIik7XG5cbiAgICAgICAgbGV0IHRpbWVyV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZXJXcmFwcGVyXCIpO1xuICAgICAgICB0aW1lcldyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0aW1lcldyYXBwZXJXb3JrVGltZVwiKTtcblxuICAgICAgICBkaXN0cmFjdGVkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cblxuICAgICAgICBsZXQgY29tcGxldGVTZXNzaW9uV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGxldGVTZXNzaW9uV3JhcHBlclwiKTtcbiAgICAgICAgY29tcGxldGVTZXNzaW9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbXBsZXRlU2Vzc2lvbldyYXBwZXJXb3JrVGltZVwiKTtcbiAgICAgICAgbGV0IHRhc2tDcmVhdG9yV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0NyZWF0b3JXcmFwcGVyXCIpO1xuICAgICAgICB0YXNrQ3JlYXRvcldyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudFRhc2tXcmFwcGVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgICAgc3RhcnROZXdUYXNrKCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuSU5BQ1RJVkUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRTtcbiAgICAgICAgICAgIHN0b3JlUG9tb1Nlc3Npb24oY3VycmVudFBvbW9TZXNzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vcmVtb3ZlcyBmaXJzdCBjaGlsZCBmcm9tIHRhc2sgbGlzdCBhbmQgYWRkcyB0byBjdXJyZW50IHRhc2tcblxuICAgICAgICBsZXQgdGltZXJMb29wID0gc2V0SW50ZXJ2YWwodGltZUNoYW5nZXIsIDEwMDApO1xuXG4gICAgICAgIGxldCBjdXJyZW50VGFza0ZpcnN0Q2hpbGQgPSBjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgY3VycmVudFRhc2tGaXJzdENoaWxkLnNldEZpbmlzaFRhc2tDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZW1vdmVDb21wbGV0ZWRUYXNrcygpO1xuICAgICAgICAgICAgc3RhcnROZXdUYXNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgY3VycmVudFRhc2sgPSBjdXJyZW50UG9tb1Nlc3Npb24uY3VycmVudFRhc2soKTtcbiAgICAgICAgY3VycmVudFRhc2tGaXJzdENoaWxkLnRhc2sgPSBjdXJyZW50VGFzaztcbiAgICAgICAgZnVuY3Rpb24gdGltZUNoYW5nZXIoKSB7XG4gICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24uaWQpO1xuICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLT0gMTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24udGltZSA8IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNlc3Npb24gaXMgaW5jb21wbGV0ZS4gaWYgaW5jb21wbGV0ZSwgXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgLy8gSWYgdGltZXIgaGl0cyAwLCB0b2dnbGUgdG8gbmV4dCBicmVhayBvciBwb21vIHRpbWVyXG4gICAgICAgICAgICBpZiAoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRSkge1xuICAgICAgICAgICAgICAgICAgICAvL2JyZWFrIFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJCcmVha01vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnBvbW9zRWxhcHNlZCArPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VGFza0ZpcnN0Q2hpbGQgPSBjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tGaXJzdENoaWxkLmluY3JlbWVudFBvbW9zVXNlZCgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza0ZpcnN0Q2hpbGQudGFzay5wb21vc1VzZWQgKz0gMTtcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza0ZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwicG9tb3N1c2VkXCIsIDEgKyBwYXJzZUludChjdXJyZW50VGFza0ZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwicG9tb3N1c2VkXCIpKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTG9uZyBicmVhaywgY3VycmVudGx5IGhhcmRjb2RlZCBhZnRlciBldmVyeSA0IHBvbW9zXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ucG9tb3NFbGFwc2VkICUgNCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24udGltZSA9IG1heExvbmdCcmVha1RpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3J0IGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgPSBtYXhCcmVha1RpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9IFBPTU9fU0VTU0lPTl9NT0RFUy5CUkVBSztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBOZXh0IHRpbWVyIHNob3VsZCBiZSBhIHBvbW8gdGltZXJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSAhPT0gUE9NT19TRVNTSU9OX01PREVTLkNPTVBMRVRFKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckFjdGl2ZU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgPSBtYXhQb21vVGltZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgPSBQT01PX1NFU1NJT05fTU9ERVMuQUNUSVZFO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEFkZCBmdW5jdGlvbmFsaXR5IGZvciBtb3Zpbmcgb250byBuZXh0IHRhc2ssIHVwZGF0aW5nIHBvbW9zIHVzZWQgb24gY3VycmVudCB0YXNrLCBldGMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHVzaCB1cGRhdGVkIHRpbWUgdG8gdGhlIHBhZ2VcbiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZm9ybWF0VGltZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSk7XG4gICAgICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldERpc3BsYXlUZXh0KGZvcm1hdFRpbWUoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUpKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkFDVElWRSkge1xuICAgICAgICAgICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0UGVyY2VudGFnZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSAvIG1heFBvbW9UaW1lKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSArPSBcIiAtIFdvcmtcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuQlJFQUspIHtcbiAgICAgICAgICAgICAgICB0aW1lclByb2dyZXNzQ2lyY2xlLnNldFBlcmNlbnRhZ2UoY3VycmVudFBvbW9TZXNzaW9uLnRpbWUgLyBtYXhCcmVha1RpbWUpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlICs9IFwiIC0gQnJlYWtcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuTE9OR19CUkVBSykge1xuICAgICAgICAgICAgICAgIHRpbWVyUHJvZ3Jlc3NDaXJjbGUuc2V0UGVyY2VudGFnZShjdXJyZW50UG9tb1Nlc3Npb24udGltZSAvIG1heExvbmdCcmVha1RpbWUpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlICs9IFwiIC0gTG9uZyBCcmVha1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyQWN0aXZlTW9kZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lci1zdGF0dXNcIikuaW5uZXJUZXh0ID0gXCJQb21vIFRpbWVcIjtcbiAgICAgICAgY3VycmVudFRhc2tIVE1MLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY3VycmVudFRhc2tXb3JrVGltZVwiKTtcbiAgICAgICAgdGFza0xpc3RIVE1MLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGFza0xpc3RXb3JrVGltZVwiKTtcbiAgICAgICAgZGlzdHJhY3RlZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBFbmRCcmVha0Vhcmx5QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICB0aW1lcldyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0aW1lcldyYXBwZXJXb3JrVGltZVwiKTtcbiAgICAgICAgY29tcGxldGVTZXNzaW9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbXBsZXRlU2Vzc2lvbldyYXBwZXJXb3JrVGltZVwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJCcmVha01vZGUoKSB7XG4gICAgICAgIGN1cnJlbnRUYXNrSFRNTC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImN1cnJlbnRUYXNrQnJlYWtUaW1lXCIpO1xuICAgICAgICB0YXNrTGlzdEhUTUwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0YXNrTGlzdEJyZWFrVGltZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lci1zdGF0dXNcIikuaW5uZXJUZXh0ID0gXCJCcmVhayBUaW1lXCI7XG4gICAgICAgIEVuZEJyZWFrRWFybHlCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgZGlzdHJhY3RlZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgICAgdGltZXJXcmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGltZXJXcmFwcGVyQnJlYWtUaW1lXCIpO1xuICAgICAgICBjb21wbGV0ZVNlc3Npb25XcmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29tcGxldGVTZXNzaW9uV3JhcHBlckJyZWFrVGltZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIFJlbmRlciBhIHRhc2sgb250byB0aGUgXG4gICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAgKi9cbiAgICBmdW5jdGlvbiByZW5kZXJUYXNrSW50b1Rhc2tMaXN0KHRhc2spIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tFbGVtZW50ID0gYDxwb21vLXRhc2sgZGVzY3JpcHRpb24gPVwiJHt0YXNrLmRlc2NyaXB0aW9ufVwiIHBvbW9zVXNlZD1cIiR7dGFzay5wb21vc1VzZWR9XCIsIHBvbW9zUmVxdWlyZWQgPVwiJHt0YXNrLnBvbW9zUmVxdWlyZWR9XCI+JHt0YXNrLnRpdGxlfTwvcG9tby10YXNrPmA7XG4gICAgICAgIHRhc2tMaXN0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjdXJyZW50VGFza0VsZW1lbnQpO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFza0xpc3QuY2hpbGROb2Rlc1t0YXNrTGlzdC5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBlbGVtZW50LnNldEZpbmlzaFRhc2tDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVDb21wbGV0ZWRUYXNrcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbWVudC50YXNrID0gdGFzaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIHdoZW4gd2Ugc2F2ZSBhIG5ldyB0YXNrLlxuICAgICAqIEFkZHMgbmV3IHRhc2sgdG8gdGhlIGN1cnJlbnQgdGFza3MgbGlzdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb250ZW50c1NhdmVkKCkge1xuICAgICAgICBsZXQgdGFza1ZhbHVlcyA9IG1vZGFsLmVsZW1lbnRzLnZhbHVlcztcbiAgICAgICAgaWYodGFza1ZhbHVlcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBzZXNzaW9uSUQgPSBnZXRMYXRlc3RTZXNzaW9uSUQoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhc2tWYWx1ZXMpO1xuICAgICAgICAgICAgbGV0IG5ld1Rhc2sgPSBuZXcgVGFzayhzZXNzaW9uSUQsIHRhc2tWYWx1ZXMudGFza05hbWUsIHRhc2tWYWx1ZXMuZGVzY3JpcHRpb24sIHBhcnNlSW50KHRhc2tWYWx1ZXMucG9tb3NSZXF1aXJlZCkpO1xuICAgICAgICAgICAgcmVuZGVyVGFza0ludG9UYXNrTGlzdChuZXdUYXNrKTtcbiAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5hZGRUYXNrKG5ld1Rhc2spO1xuICAgICAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuXG4gICAgICAgICAgICByZXNldElucHV0cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGlucHV0cyBhbmQgcmVzZXRzIHN0eWxlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVzZXRJbnB1dHMoKSB7XG4gICAgICAgIGNvbnN0IHRhc2tOYW1lID0gbW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInRhc2stbmFtZVwiKS5lbGVtZW50cy53cmFwcGVyO1xuICAgICAgICBjb25zdCBwb21vc1JlcXVpcmVkID0gbW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInBvbW9zLXJlcXVpcmVkXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gbW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLmVsZW1lbnRzLndyYXBwZXI7XG5cbiAgICAgICAgdGFza05hbWUuaW5uZXJUZXh0ID0gdGFza05hbWUucGxhY2Vob2xkZXI7XG4gICAgICAgIHRhc2tOYW1lLnVzZXJUeXBlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGFza05hbWUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IHBsYWNlaG9sZGVyXCIpO1xuXG4gICAgICAgIHBvbW9zUmVxdWlyZWQuaW5uZXJUZXh0ID0gcG9tb3NSZXF1aXJlZC5wbGFjZWhvbGRlcjtcbiAgICAgICAgcG9tb3NSZXF1aXJlZC51c2VyVHlwZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBvbW9zUmVxdWlyZWQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IHBsYWNlaG9sZGVyXCIpO1xuXG4gICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGRlc2NyaXB0aW9uLnBsYWNlaG9sZGVyO1xuICAgICAgICBkZXNjcmlwdGlvbi51c2VyVHlwZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBwbGFjZWhvbGRlclwiKTtcblxuICAgICAgICBtb2RhbC5lbGVtZW50cy52YWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTaG93cyBhIG5ldyB0YXNrIG9udG8gdGhlIGRpc3BsYXlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdGFydE5ld1Rhc2soKSB7XG4gICAgICAgIGxldCB0YXNrTGlzdEZpcnN0Q2hpbGQgPSB0YXNrTGlzdEhUTUwuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgbGV0IG5leHRUYXNrID0gY3VycmVudFBvbW9TZXNzaW9uLmdldE5leHRUYXNrKCk7XG4gICAgICAgIGlmIChuZXh0VGFzayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gY29tcGxldGUgdGhlIHNlc3Npb25cbiAgICAgICAgICAgIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLkNPTVBMRVRFO1xuICAgICAgICAgICAgc3RvcmVQb21vU2Vzc2lvbihjdXJyZW50UG9tb1Nlc3Npb24pO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID1cIi4vaGlzdG9yeS5odG1sXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tUb0JlQWRkZWQgPSBgPHBvbW8tdGFzayBkZXNjcmlwdGlvbj1cIiR7bmV4dFRhc2suZGVzY3JpcHRpb259XCIgcG9tb3NVc2VkPVwiJHtuZXh0VGFzay5wb21vc1VzZWR9XCIgcG9tb3NSZXF1aXJlZD0ke25leHRUYXNrLnBvbW9zUmVxdWlyZWR9PiR7bmV4dFRhc2sudGl0bGV9PC9wb21vLXRhc2s+YDtcbiAgICAgICAgY3VycmVudFRhc2tIVE1MLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjdXJyZW50VGFza1RvQmVBZGRlZCk7XG4gICAgICAgIHRhc2tMaXN0SFRNTC5yZW1vdmVDaGlsZCh0YXNrTGlzdEhUTUwuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgIGN1cnJlbnRUYXNrSFRNTC5jaGlsZE5vZGVzW2N1cnJlbnRUYXNrSFRNTC5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdLnNldEZpbmlzaFRhc2tDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVDb21wbGV0ZWRUYXNrcygpO1xuICAgICAgICAgICAgc3RhcnROZXdUYXNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlc1tjdXJyZW50VGFza0hUTUwuY2hpbGROb2Rlcy5sZW5ndGggLSAxXS50YXNrID0gbmV4dFRhc2s7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgY29tcGxldGVkIHRhc2tzIGZyb20gZGlzcGxheSBhbmQgdXBkYXRlIHRoZSBjdXJyZW50IHBvbW8gc2Vzc2lvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUNvbXBsZXRlZFRhc2tzKCkge1xuICAgICAgICBsZXQgY29tcGxldGVkSWRzID0gW107XG4gICAgICAgIGZvciAobGV0IG5vZGUgb2YgY3VycmVudFRhc2tIVE1MLmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZElkcy5wdXNoKG5vZGUudGFzay5pZCk7XG4gICAgICAgICAgICAgICAgbm9kZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrSFRNTC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgbm9kZSBvZiB0YXNrTGlzdEhUTUwuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgaWYgKG5vZGUuY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkSWRzLnB1c2gobm9kZS50YXNrLmlkKTtcbiAgICAgICAgICAgICAgICBub2RlLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGFza0xpc3RIVE1MLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29tcGxldGVkSWRzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50UG9tb1Nlc3Npb24uY29tcGxldGVUYXNrKGlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0b3JlUG9tb1Nlc3Npb24oY3VycmVudFBvbW9TZXNzaW9uKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYWxsIHRhc2tzIGZyb20gc3RvcmFnZSBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbiBhbmQgcmVuZGVyIHRoZW1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2FkVGFza3MoKSB7XG4gICAgICAgIGxldCBpZCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgICAgICBsZXQgYWxsVGFza3MgPSBbXTtcbiAgICAgICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgdGFza3MgPSBjdXJyZW50UG9tb1Nlc3Npb24uYWxsVGFza3M7XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHRhc2tzKS5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suc2Vzc2lvbklEID09PSBpZCAmJiAhdGFzay5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFsbFRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICAgICAgICByZW5kZXJUYXNrSW50b1Rhc2tMaXN0KHRhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbm9kZSBvZiB0YXNrTGlzdEhUTUwuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgbm9kZS5zZXRGaW5pc2hUYXNrQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNvbXBsZXRlZFRhc2tzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=