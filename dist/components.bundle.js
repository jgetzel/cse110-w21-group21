(()=>{var t={614:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n}function r(t){var e="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)})(t)}function o(t,e,n){return(o=i()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var r,o,u,c,l=(r=p,o=i(),function(){var t,e=a(r);if(o){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return n(this,t)});function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this)).userTyped="",t.elements={},t.attachShadow({mode:"open"});var e=document.createElement("div");e.setAttribute("class","pomo-input"),e.placeholder="Default Text",e.contentEditable=!0,e.max=50,t.elements.wrapper=e;var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","./assets/styles/input-field.css"),t.elements.linkElem=n,t.shadowRoot.append(n,e),t.elements.wrapper.setAttribute("class",t.elements.wrapper.getAttribute("class")+" placeholder"),e.addEventListener("focus",(function(){this.userTyped||(e.setAttribute("class","pomo-input"),e.textContent="")})),e.addEventListener("blur",(function(){this.userTyped||(e.setAttribute("class","pomo-input placeholder"),e.textContent=e.placeholder)})),t}return u=p,(c=[{key:"limitCharCount",value:function(t){return this.userTyped=this.textContent,0==window.getSelection().toString().length&&this.textContent.length>=this.max?(this.setAttribute("class","pomo-input max"),t.preventDefault(),!1):(this.setAttribute("class","pomo-input"),!0)}},{key:"numericInputOnly",value:function(t){if(this.userTyped=this.textContent,0==window.getSelection().toString().length&&this.textContent.length>=this.max)return this.setAttribute("class","pomo-input max"),t.preventDefault(),!1;this.setAttribute("class","pomo-input"),"keypress"==t.type&&isNaN(t.key)?(this.classList.add("invalid"),t.preventDefault()):("input"==t.type&&isNaN(t.data)||"paste"==t.type&&isNaN(t.clipboardData.getData("Text")))&&(this.setAttribute("class","pomo-input invalid"),t.preventDefault())}},{key:"value",get:function(){return this.userTyped}},{key:"connectedCallback",value:function(){var t=this.getAttribute("max");null!=t&&(this.elements.wrapper.max=Number(t)),this.elements.wrapper.textContent=this.textContent,this.getAttribute("required")&&(this.required=!0,this.elements.wrapper.textContent+="*"),"number"==this.getAttribute("type")?(this.elements.wrapper.addEventListener("keypress",this.numericInputOnly,!1),this.elements.wrapper.addEventListener("paste",this.numericInputOnly,!1),this.elements.wrapper.addEventListener("input",this.numericInputOnly,!1)):(this.elements.wrapper.addEventListener("keypress",this.limitCharCount,!1),this.elements.wrapper.addEventListener("paste",this.limitCharCount,!1),this.elements.wrapper.addEventListener("input",this.limitCharCount,!1)),this.elements.wrapper.placeholder=this.elements.wrapper.textContent}}])&&e(u.prototype,c),p}(r(HTMLElement));customElements.define("pomo-input",u)},223:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n}function n(t){var e="function"==typeof Map?new Map:void 0;return(n=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return r(t,arguments,s(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i(o,t)})(t)}function r(t,e,n){return(r=o()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(u,t);var n,r,a=(n=u,r=o(),function(){var t,o=s(n);if(r){var i=s(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return e(this,t)});function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=a.call(this);var e=document.getElementById("addTaskModal");return e.shadowRoot.getElementById("modal-close").onclick=function(){var t,n,r;e.hideModal(),t=e.shadowRoot.getElementById("task-name").elements.wrapper,n=e.shadowRoot.getElementById("pomos-required").elements.wrapper,r=e.shadowRoot.getElementById("description").elements.wrapper,t.innerText=t.placeholder,t.userTyped=void 0,t.setAttribute("class","pomo-input placeholder"),n.innerText=n.placeholder,n.userTyped=void 0,n.setAttribute("class","pomo-input placeholder"),r.innerText=r.placeholder,r.userTyped=void 0,r.setAttribute("class","pomo-input placeholder"),e.elements.values=void 0},e.elements.saveBtn=e.shadowRoot.getElementById("save-btn"),e.elements.saveBtn.onclick=function(){var t,n,r;t=!0,n=e.shadowRoot.getElementById("task-name").elements.wrapper,r=e.shadowRoot.getElementById("pomos-required").elements.wrapper,null==n.userTyped&&(n.setAttribute("class","pomo-input invalid"),t=!1),null==r.userTyped&&(r.setAttribute("class","pomo-input invalid"),t=!1),t&&(e.hideModal(),e.elements.values=function(){var t=e.shadowRoot.getElementById("task-name").elements.wrapper,n=e.shadowRoot.getElementById("pomos-required").elements.wrapper,r=e.shadowRoot.getElementById("description").elements.wrapper,o={taskName:t.userTyped,pomosRequired:n.userTyped,description:""};return null!=r.userTyped&&(o.description=r.userTyped),o}())}.bind(e),t}return u}(n(HTMLElement));customElements.define("modal-input",a)},870:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n}function r(t){var e="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)})(t)}function o(t,e,n){return(o=i()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var r,o,u,c,l=(r=p,o=i(),function(){var t,e=a(r);if(o){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return n(this,t)});function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this)).elements={},t.attachShadow({mode:"open"});var e=document.createElement("div");e.setAttribute("id","wrapper"),t.elements.wrapper=e,t.displayText="0%",e.innerHTML='\n        <div id="progress-circle" class="progress-circle">\n            <span id="displayText">\n                0%\n            </span>\n            <div class="left-half-clipper">\n                <div class="first50-bar"></div>\n                <div class="value-bar" id="progress-bar"></div>\n            </div>\n        </div>\n        ',e.innerHTML='\n        <span id="displayText">0%</span>\n        <svg id="circular-loader"viewBox="25 25 50 50" >\n            <circle id="loader-path" cx="50" cy="50" r="20" fill="none" />\n            <circle id="loader-path-bg" cx="50" cy="50" r="20" fill="none" />\n        </svg>\n        ';var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","./assets/styles/progress-circle.css"),t.elements.linkElem=n,t.shadowRoot.append(n,e),t}return u=p,(c=[{key:"setSize",value:function(t){this.shadowRoot.getElementById("wrapper").style.fontSize=t}},{key:"setDisplayText",value:function(t){this.displayText=t,this.shadowRoot.getElementById("displayText").textContent=t}},{key:"setPercentage",value:function(t){this.shadowRoot.getElementById("loader-path").style.strokeDashoffset=127.5*-(1-t)}}])&&e(u.prototype,c),p}(r(HTMLElement));customElements.define("progress-circle",u)},907:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return i(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,t)})(t)}function i(t,e,n){return(i=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(d,t);var o,i,c,p,f=(o=d,i=s(),function(){var t,e=u(o);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return n(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(t=f.call(this)).elements={},t.attachShadow({mode:"open"});var e=r(t);e.isCurrentTask=!0,e.completed=!1;var n=document.createElement("div"),o=document.createElement("li");o.setAttribute("class","task"),n.appendChild(o);var i=document.createElement("div");i.setAttribute("class","textwrapper"),o.appendChild(i);var s=document.createElement("p");s.setAttribute("class","title"),s.innerText=t.textContent||"",t.elements.title=s,i.appendChild(s);var a=document.createElement("p");a.setAttribute("class","description"),a.innerText=t.getAttribute("description")||"",t.elements.description=a,i.appendChild(a);var u=document.createElement("div");u.setAttribute("class","wrapperCircle"),o.appendChild(u);var c=document.createElement("div");c.setAttribute("class","pomoCircle"),t.pomosUsed=parseInt(t.getAttribute("pomosUsed")),c.preq=t.getAttribute("pomosRequired"),c.innerText=t.getAttribute("pomosUsed")+"/"+t.getAttribute("pomosRequired"),t.elements.pomoCircle=c,u.appendChild(c),o.appendChild(u);var p=document.createElement("div");p.setAttribute("class","wrapperCheckMark"),o.appendChild(p);var m=document.createElement("img");1==t.completed?(m.setAttribute("class","completeCheckMark"),m.setAttribute("src","./assets/svgImages/check_Complete.svg")):(m.setAttribute("class","incompleteCheckMark"),m.setAttribute("src","./assets/svgImages/check_Incomplete.svg")),m.onclick=function(){m.setAttribute("class","completeCheckMark"),m.setAttribute("src","./assets/svgImages/check_Complete.svg"),e.completed=!0,e.isCurrentTask=!1,l(c,e)},p.appendChild(m),t.elements.checkMark=m;var y=document.createElement("div");y.setAttribute("class","wrapperDragAndDrop"),o.appendChild(y);var h=document.createElement("img");h.setAttribute("class","dragAndDrop"),h.setAttribute("src","./assets/svgImages/drag-dots.svg"),y.appendChild(h),t.elements.dragAndDrop=h,t.elements.wrapper=o;var b=document.createElement("link");return b.setAttribute("rel","stylesheet"),b.setAttribute("href","./assets/styles/task.css"),t.elements.linkElem=b,t.shadowRoot.append(n,b),t}return c=d,(p=[{key:"pomosused",set:function(t){console.log("HELLO")}},{key:"attributeChangedCallback",value:function(t,e,n){console.log(t,e,n),"pomosused"===t&&(console.log(n),this.elements.pomoCircle.innerText=n+"/"+this.getAttribute("pomosRequired"))}},{key:"setFinishTaskCallback",value:function(t){var e=this.elements.checkMark,n=this;e.onclick=function(){e.setAttribute("class","completeCheckMark"),e.setAttribute("src","./assets/svgImages/check_Complete.svg"),n.completed=!0,n.isCurrentTask=!1,l(n.elements.pomoCircle,n),t()}}},{key:"incrementPomosUsed",value:function(){this.pomosUsed+=1,this.elements.pomoCircle.innerText=this.pomosUsed+"/"+this.getAttribute("pomosRequired")}},{key:"hide",value:function(){this.elements.wrapper.style.opacity=0}}])&&e(c.prototype,p),d}(o(HTMLElement));function l(t,e){!0===e.isCurrentTask?t.setAttribute("class","currentTask"):!0===e.completed?e.pomosUsed<=t.preq?t.setAttribute("class","goodTimingTask"):t.setAttribute("class","badTimingTask"):e.completed||t.setAttribute("class","incompleteTask")}customElements.define("pomo-task",c)},409:(t,e,n)=>{"use strict";function r(t,e){localStorage.setItem(t,JSON.stringify(e))}function o(t){return JSON.parse(localStorage.getItem(t))}n.d(e,{RL:()=>r,RK:()=>o}),n(594),n(771)},771:(t,e,n)=>{"use strict";n.d(e,{rA:()=>c,_c:()=>p,E3:()=>f,RU:()=>d});var r=n(409),o=n(594);function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u="pomo_session_map",c={INACTIVE:"inactive",BREAK:"break",LONG_BREAK:"longbreak",ACTIVE:"active",COMPLETE:"complete"},l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.allTasks=[],this.mode=c.INACTIVE,this.time=0,this.pomosElapsed=0,this.startDate=new Date}var e,n;return e=t,(n=[{key:"currentTask",value:function(){var t=this.allTasks.filter((function(t){return!t.completed}));return t.length>0?t[0]:null}},{key:"addTask",value:function(t){(0,o.rs)(t),this.allTasks.push(t)}},{key:"deleteTask",value:function(t){(0,o.c_)(t.id);for(var e=0;e<this.allTasks.length;e++){var n=this.allTasks[e];if(t.id===n.id)return void this.allTasks.splice(e,1)}}},{key:"completeTask",value:function(t){var e,n=i(this.allTasks);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.id===t)return r.completed=!0,!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"getNextTask",value:function(){var t,e=i(this.allTasks);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!1===n.completed)return n}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"incrementTaskPomosUsed",value:function(t){var e,n=i(this.allTasks);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.id===t)return r.pomosUsed+=1,void(this.pomosElapsed+=1)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isBreak",value:function(){return this.mode===c.LONG_BREAK||this.mode===c.BREAK}},{key:"reorderTasks",value:function(){}},{key:"getPomosLeftInSession",value:function(){var t=0;return this.allTasks.forEach((function(e){t+=Math.max(e.pomosRequired-e.pomosUsed,0)})),t}},{key:"parseSessionFromObj",value:function(t){return this.id=t.id,this.mode=t.mode,this.time=t.time,this.pomosElapsed=t.pomosElapsed,this.startDate=new Date(t.startDate),this.allTasks=t.allTasks.map((function(t){var e=new o.iQ;return e.parseTaskFromObj(t)})),this}},{key:"serializeIntoObj",value:function(){return{id:this.id,allTasks:this.allTasks.map((function(t){return t.serializeIntoObj()})),mode:this.mode,time:this.time,pomosElapsed:this.pomosElapsed,startDate:this.startDate.getTime()}}}])&&a(e.prototype,n),t}();function p(t){var e=(0,r.RK)(u),n=new l;return e[t]?n.parseSessionFromObj(e[t]):null}function f(t){var e=(0,r.RK)(u);e[t.id]=t.serializeIntoObj(),(0,r.RL)(u,e)}function d(){return"complete"===localStorage.getItem("latest_pomo_session_status")?null:parseInt(localStorage.getItem("pomo_session_id"))-1}},594:(t,e,n)=>{"use strict";n.d(e,{iQ:()=>i,rs:()=>u,c_:()=>c});var r=n(409);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(771);var i=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sessionID=e,this.id=-1,this.title=n,this.description=r,this.pomosRequired=o,this.completed=!1,this.pomosUsed=0}var e,n;return e=t,(n=[{key:"parseTaskFromObj",value:function(e){var n=new t(e.sessionID,e.title,e.description,e.pomosRequired);return n.completed=e.completed,n.id=e.id,n.pomosUsed=e.pomosUsed,n}},{key:"serializeIntoObj",value:function(){return{title:this.title,description:this.description,pomosRequired:this.pomosRequired,completed:this.completed,pomosUsed:this.pomosUsed,id:this.id,sessionID:this.sessionID}}}])&&o(e.prototype,n),t}(),s="pomo_task_map",a="pomo_task_index";function u(t){var e=(0,r.RK)(s);if(!e[t.id]){var n=parseInt((0,r.RK)(a));t.id=n,(0,r.RL)(a,n+1)}var o=t.serializeIntoObj();return e[t.id]=o,(0,r.RL)(s,e),t.id}function c(t){var e=(0,r.RK)(s);delete e[t],(0,r.RL)(s,e)}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t="day",e="night";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function s(t,e,n){return(s=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(l,n);var r,i,s=(r=l,i=a(),function(){var t,e=c(r);if(i){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return o(this,t)});function l(){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this)).elements={},n.attachShadow({mode:"open"});var r=document.createElement("button");r.setAttribute("class","pomo-button"),r.innerText=n.textContent||"",n.elements.button=r,r.setAttribute("part","button"),r.style.display="none";var o=document.createElement("link");return o.setAttribute("rel","stylesheet"),o.setAttribute("href","./assets/styles/button.css"),n.elements.linkElem=o,n.shadowRoot.append(o,r),n.type=n.getAttribute("type"),"outline"==n.type?n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" outline"):"nav"==n.type&&n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" nav"),n.size=n.getAttribute("size"),"small"===n.size?n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" small"):"tiny"===n.size&&n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" tiny"),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=t;return n.getHours()<4?r=e:n.getHours()<18?r=t:n.getHours()<24&&(r=e),r}()===e&&"true"!==n.getAttribute("nodark")&&n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" dark"),n}return l}(i(HTMLElement));function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){var e="function"==typeof Map?new Map:void 0;return(m=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function y(t,e,n){return(y=h()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&b(o,n.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}customElements.define("pomo-button",l);var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(s,t);var e,n,r,o,i=(e=s,n=h(),function(){var t,r=v(e);if(n){var o=v(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return d(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this)).elements={},t.attachShadow({mode:"open"});var e=document.createElement("div");t.elements.wrapper=e,t.elements.wrapper.setAttribute("class","modal-wrapper"),t.elements.wrapper.innerHTML='<div class="shadow"></div><div class="modal"></div>';var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","./assets/styles/modal.css"),t.elements.linkElem=n,t.elements.wrapper.style.display="none",t.shadowRoot.appendChild(n),t}return r=s,(o=[{key:"displayModal",value:function(){var t=this;this.elements.wrapper.style.display="block",setTimeout((function(){t.elements.wrapper.style.opacity=1}),20)}},{key:"hideModal",value:function(){var t=this;this.elements.wrapper.style.opacity=0,setTimeout((function(){t.elements.wrapper.style.display="none"}),400)}},{key:"connectedCallback",value:function(){this.type=this.getAttribute("type");var t=this.childNodes,e="";t.forEach((function(t){t.nodeType!=Node.TEXT_NODE&&(e+=t.outerHTML)})),this.elements.wrapper.innerHTML='<div class="shadow"></div><div class="modal">'.concat(e,"</div>");for(var n=t.length,r=0;r<n;r++)this.removeChild(t[0]);this.shadowRoot.appendChild(this.elements.wrapper)}}])&&f(r.prototype,o),s}(m(HTMLElement));customElements.define("pomo-modal",w),n(223);var g=n(771);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(t){var e="function"==typeof Map?new Map:void 0;return(T=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return O(t,arguments,S(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),R(r,t)})(t)}function O(t,e,n){return(O=A()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&R(o,n.prototype),o}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(o,t);var e,n,r=(e=o,n=A(),function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return E(this,t)});function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).elements={},t.attachShadow({mode:"open"});var e=document.createElement("nav");e.setAttribute("class","pomo-header");var n=document.createElement("img");n.src="./assets/svgImages/logo.svg",n.setAttribute("class","pomo-header logo");var i=document.createElement("a");i.href="index.html",i.id="home-btn",i.appendChild(n),e.appendChild(i),e.innerHTML+='<a id="hist-btn" href="history.html"><pomo-button type="nav" id="hist">History</pomo-button></a>',e.innerHTML+='<pomo-button type="nav" id="help">Help</pomo-button>',e.innerHTML+='<pomo-modal id="modal-help">  \n            <button id="modal-close" class="close-btn">x</button>\n            <p class="title">What\'s a Pomo Timer?</p>\n            <p>'.concat("The Pomodoro Technique is a time management method developed by Francesco Cirillo in the late 1980s. The technique uses a timer to break down work into intervals, traditionally 25 minutes in length, separated by short breaks. Each interval is known as a pomodoro, from the Italian word for 'tomato', after the tomato-shaped kitchen timer that Cirillo used as a university student.",'</p>\n            <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique">Wikipedia</a>\n        </pomo-modal>'),t.elements.wrapper=e;var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","./assets/styles/header.css"),t.elements.linkElem=s,t.shadowRoot.append(s,e);var a=e.childNodes[3];a.elements.wrapper.style.display="none";var u=e.childNodes[2],c=a.shadowRoot.getElementById("modal-close");u.onclick=function(){a.displayModal()},c.onclick=function(){a.hideModal()};var l=function(t){var e=(0,g.RU)();if(null!==e){var n=(0,g._c)(e);n.mode!==g.rA.ACTIVE&&n.mode!==g.rA.LONG_BREAK&&n.mode!==g.rA.BREAK||(confirm("Are you sure want to leave? This will automatically complete your session")?(console.log("CHANGE"),n.mode=g.rA.COMPLETE,(0,g.E3)(n),console.log((0,g._c)(n.id))):t.preventDefault())}};return t.shadowRoot.getElementById("hist-btn").onclick=l,t.shadowRoot.getElementById("home-btn").onclick=l,t}return o}(T(HTMLElement));customElements.define("pomo-header",_),n(614),n(870),n(907)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvY29tcG9uZW50cy9pbnB1dC9pbnB1dC5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvY29tcG9uZW50cy9tb2RhbC1pbnB1dC9tb2RhbC1pbnB1dC5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvY29tcG9uZW50cy9wcm9ncmVzcy1jaXJjbGUvcHJvZ3Jlc3MtY2lyY2xlLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy9jb21wb25lbnRzL3Rhc2svdGFzay5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvZGF0YWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Nlc3Npb24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Rhc2suanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL3V0aWxzL3RoZW1lLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy9jb21wb25lbnRzL2J1dHRvbi9idXR0b24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2NvbXBvbmVudHMvbW9kYWwvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2NvbXBvbmVudHMvaGVhZGVyL2hlYWRlci5qcyJdLCJuYW1lcyI6WyJJbnB1dEZpZWxkIiwidXNlclR5cGVkIiwiZWxlbWVudHMiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwid3JhcHBlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInBsYWNlaG9sZGVyIiwiY29udGVudEVkaXRhYmxlIiwibWF4IiwibGlua0VsZW0iLCJzaGFkb3dSb290IiwiYXBwZW5kIiwiZ2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJ0ZXh0Q29udGVudCIsImUiLCJ3aW5kb3ciLCJnZXRTZWxlY3Rpb24iLCJ0b1N0cmluZyIsImxlbmd0aCIsInByZXZlbnREZWZhdWx0IiwiZXZlbnQiLCJ0eXBlIiwiaXNOYU4iLCJrZXkiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhIiwiY2xpcGJvYXJkRGF0YSIsImdldERhdGEiLCJtYXhDaGFyIiwiTnVtYmVyIiwicmVxdWlyZWQiLCJudW1lcmljSW5wdXRPbmx5IiwibGltaXRDaGFyQ291bnQiLCJIVE1MRWxlbWVudCIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiTW9kYWxJbnB1dCIsInRhc2tNb2RhbCIsImdldEVsZW1lbnRCeUlkIiwib25jbGljayIsInRhc2tOYW1lIiwicG9tb3NSZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwiaGlkZU1vZGFsIiwiaW5uZXJUZXh0IiwidW5kZWZpbmVkIiwidmFsdWVzIiwic2F2ZUJ0biIsImdvb2RJbnB1dCIsInJldHVyblZhbCIsImdldFZhbHVlcyIsImJpbmQiLCJQcm9ncmVzc0NpcmNsZUNvbXBvbmVudCIsImRpc3BsYXlUZXh0IiwiaW5uZXJIVE1MIiwiZm9udFNpemUiLCJzdHlsZSIsInRleHQiLCJwZXJjZW50Iiwic3Ryb2tlRGFzaG9mZnNldCIsIlRhc2tDb21wb25lbnQiLCJwb21vdGFzayIsImlzQ3VycmVudFRhc2siLCJjb21wbGV0ZWQiLCJ3cmFwcGVyRGl2IiwiYXBwZW5kQ2hpbGQiLCJ3cmFwcGVyVGV4dCIsInRpdGxlIiwid3JhcHBlckNvbXBsZXRpb25DaXJjbGUiLCJwb21vQ2lyY2xlIiwicG9tb3NVc2VkIiwicGFyc2VJbnQiLCJwcmVxIiwid3JhcHBlckNoZWNrTWFyayIsImNoZWNrTWFyayIsImNvbG9yRGVjaWRlciIsIndyYXBwZXJEcmFnQW5kRHJvcCIsImltZ0RyYWdBbmREcm9wIiwiZHJhZ0FuZERyb3AiLCJ2YWwiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJjYiIsIm9wYWNpdHkiLCJzdG9yZU9iamVjdCIsIm9iamVjdCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0T2JqZWN0IiwicGFyc2UiLCJnZXRJdGVtIiwiUE9NT19TRVNTSU9OX01BUCIsIlBPTU9fU0VTU0lPTl9NT0RFUyIsIklOQUNUSVZFIiwiQlJFQUsiLCJMT05HX0JSRUFLIiwiQUNUSVZFIiwiQ09NUExFVEUiLCJQb21vU2Vzc2lvbiIsImlkIiwiYWxsVGFza3MiLCJ0aW1lIiwicG9tb3NFbGFwc2VkIiwic3RhcnREYXRlIiwiRGF0ZSIsImFsbEluUHJvZ3Jlc3NUYXNrcyIsImZpbHRlciIsInRhc2siLCJzdG9yZVRhc2siLCJwdXNoIiwiZGVsZXRlVGFza0J5VGFza0lEIiwiaSIsInN0b3JlZFRhc2siLCJzcGxpY2UiLCJsZWZ0IiwiZm9yRWFjaCIsIk1hdGgiLCJzZXNzaW9uX29iaiIsIm1hcCIsInRhc2tPYmoiLCJ0IiwiVGFzayIsInBhcnNlVGFza0Zyb21PYmoiLCJzZXJpYWxpemVJbnRvT2JqIiwiZ2V0VGltZSIsImdldFBvbW9TZXNzaW9uIiwiYWxsU2Vzc2lvbnMiLCJwIiwicGFyc2VTZXNzaW9uRnJvbU9iaiIsInN0b3JlUG9tb1Nlc3Npb24iLCJzZXNzaW9uIiwiZ2V0TGF0ZXN0U2Vzc2lvbklEIiwic2Vzc2lvbklEIiwidGFza19vYmoiLCJQT01PX1RBU0tfTUFQIiwiUE9NT19UQVNLX0lOREVYIiwidGFza19tYXAiLCJvYmoiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJUSEVNRV9NT0RFUyIsIkJ1dHRvbiIsImJ1dHRvbiIsImRpc3BsYXkiLCJzaXplIiwidG9kYXkiLCJ0aW1lUGVyaW9kIiwiZ2V0SG91cnMiLCJnZXRUaGVtZU1vZGUiLCJNb2RhbENvbXBvbmVudCIsInNldFRpbWVvdXQiLCJjaGlsZDEiLCJjaGlsZE5vZGVzIiwiaHRtbFN0cmluZyIsImVsZW1lbnQiLCJub2RlVHlwZSIsIk5vZGUiLCJURVhUX05PREUiLCJvdXRlckhUTUwiLCJuIiwicmVtb3ZlQ2hpbGQiLCJIZWFkZXIiLCJsb2dvIiwic3JjIiwiaG9tZUxpbmsiLCJocmVmIiwibW9kYWwiLCJoZWxwQnRuIiwiY2xvc2VCdG4iLCJkaXNwbGF5TW9kYWwiLCJjaGVja1BvbW9TZXNzaW9uTW9kZUJlZm9yZUxlYXZpbmciLCJwb21vU2Vzc2lvbiIsImNvbmZpcm0iXSwibWFwcGluZ3MiOiJ3dURBVU1BLEUsMlpBS0YsYUFBYyxPLDRGQUFBLFVBQ1YsZ0JBQ0tDLFVBQVksR0FFakIsRUFBS0MsU0FBVyxHQUdoQixFQUFLQyxhQUFhLENBQUVDLEtBQU0sU0FHMUIsSUFBTUMsRUFBVUMsU0FBU0MsY0FBYyxPQUV2Q0YsRUFBUUcsYUFBYSxRQUFTLGNBRTlCSCxFQUFRSSxZQUFjLGVBQ3RCSixFQUFRSyxpQkFBa0IsRUFDMUJMLEVBQVFNLElBQU0sR0FHZCxFQUFLVCxTQUFTRyxRQUFVQSxFQUd4QixJQUFNTyxFQUFXTixTQUFTQyxjQUFjLFFBdEI5QixPQXVCVkssRUFBU0osYUFBYSxNQUFPLGNBRTdCSSxFQUFTSixhQUFhLE9BQVEsbUNBQzlCLEVBQUtOLFNBQVNVLFNBQVdBLEVBR3pCLEVBQUtDLFdBQVdDLE9BQU9GLEVBQVVQLEdBR2pDLEVBQUtILFNBQVNHLFFBQVFHLGFBQWEsUUFBUyxFQUFLTixTQUFTRyxRQUFRVSxhQUFhLFNBQVcsZ0JBTTFGVixFQUFRVyxpQkFBaUIsU0FBUyxXQUUxQkMsS0FBS2hCLFlBQ0xJLEVBQVFHLGFBQWEsUUFBUyxjQUM5QkgsRUFBUWEsWUFBYyxPQVE5QmIsRUFBUVcsaUJBQWlCLFFBQVEsV0FFekJDLEtBQUtoQixZQUNMSSxFQUFRRyxhQUFhLFFBQVMsMEJBQzlCSCxFQUFRYSxZQUFjYixFQUFRSSxnQkF0RDVCLEUsMkNBaUVkLFNBQWVVLEdBR1gsT0FGQUYsS0FBS2hCLFVBQVlnQixLQUFLQyxZQUV3QixHQUEzQ0UsT0FBT0MsZUFBZUMsV0FBV0MsUUFBZU4sS0FBS0MsWUFBWUssUUFBVU4sS0FBS04sS0FDL0VNLEtBQUtULGFBQWEsUUFBUyxrQkFDM0JXLEVBQUVLLGtCQUNLLElBR1BQLEtBQUtULGFBQWEsUUFBUyxlQUNwQixLLDhCQVNmLFNBQWlCaUIsR0FHYixHQUZBUixLQUFLaEIsVUFBWWdCLEtBQUtDLFlBRXdCLEdBQTNDRSxPQUFPQyxlQUFlQyxXQUFXQyxRQUFlTixLQUFLQyxZQUFZSyxRQUFVTixLQUFLTixJQUcvRSxPQUZBTSxLQUFLVCxhQUFhLFFBQVMsa0JBQzNCaUIsRUFBTUQsa0JBQ0MsRUFHUFAsS0FBS1QsYUFBYSxRQUFTLGNBR2QsWUFBZGlCLEVBQU1DLE1BQXNCQyxNQUFNRixFQUFNRyxNQUN2Q1gsS0FBS1ksVUFBVUMsSUFBSSxXQUNuQkwsRUFBTUQsbUJBRVksU0FBZEMsRUFBTUMsTUFBbUJDLE1BQU1GLEVBQU1NLE9BSXZCLFNBQWROLEVBQU1DLE1BQW1CQyxNQUFNRixFQUFNTyxjQUFjQyxRQUFRLFlBSC9EaEIsS0FBS1QsYUFBYSxRQUFTLHNCQUMzQmlCLEVBQU1ELG9CLGlCQVFkLFdBQ0ksT0FBT1AsS0FBS2hCLFksK0JBR2hCLFdBQ0ksSUFBSWlDLEVBQVVqQixLQUFLRixhQUFhLE9BR2pCLE1BQVhtQixJQUNBakIsS0FBS2YsU0FBU0csUUFBUU0sSUFBTXdCLE9BQU9ELElBRXZDakIsS0FBS2YsU0FBU0csUUFBUWEsWUFBY0QsS0FBS0MsWUFDckNELEtBQUtGLGFBQWEsY0FDbEJFLEtBQUttQixVQUFXLEVBQ2hCbkIsS0FBS2YsU0FBU0csUUFBUWEsYUFBZSxLQUdULFVBQTdCRCxLQUFLRixhQUFhLFNBQ2pCRSxLQUFLZixTQUFTRyxRQUFRVyxpQkFBaUIsV0FBWUMsS0FBS29CLGtCQUFrQixHQUMxRXBCLEtBQUtmLFNBQVNHLFFBQVFXLGlCQUFpQixRQUFTQyxLQUFLb0Isa0JBQWtCLEdBQ3ZFcEIsS0FBS2YsU0FBU0csUUFBUVcsaUJBQWlCLFFBQVNDLEtBQUtvQixrQkFBa0IsS0FJdkVwQixLQUFLZixTQUFTRyxRQUFRVyxpQkFBaUIsV0FBWUMsS0FBS3FCLGdCQUFnQixHQUN4RXJCLEtBQUtmLFNBQVNHLFFBQVFXLGlCQUFpQixRQUFTQyxLQUFLcUIsZ0JBQWdCLEdBQ3JFckIsS0FBS2YsU0FBU0csUUFBUVcsaUJBQWlCLFFBQVNDLEtBQUtxQixnQkFBZ0IsSUFHekVyQixLQUFLZixTQUFTRyxRQUFRSSxZQUFjUSxLQUFLZixTQUFTRyxRQUFRYSxpQixzQkFoSnpDcUIsY0FvSnpCQyxlQUFlQyxPQUFPLGFBQWN6QyxJLHFqREN4SjlCMEMsRSx1WkFDRixhQUFjLE8sNEZBQUEsU0FDVixlQUNBLElBQUlDLEVBQVlyQyxTQUFTc0MsZUFBZSxnQkFGOUIsT0FHS0QsRUFBVTlCLFdBQVcrQixlQUFlLGVBRTFDQyxRQUFVLFdBMkRuQixJQUNVQyxFQUNBQyxFQUNBQyxFQTdETkwsRUFBVU0sWUEyREpILEVBQVdILEVBQVU5QixXQUFXK0IsZUFBZSxhQUFhMUMsU0FBU0csUUFDckUwQyxFQUFnQkosRUFBVTlCLFdBQVcrQixlQUFlLGtCQUFrQjFDLFNBQVNHLFFBQy9FMkMsRUFBY0wsRUFBVTlCLFdBQVcrQixlQUFlLGVBQWUxQyxTQUFTRyxRQUVoRnlDLEVBQVNJLFVBQVlKLEVBQVNyQyxZQUM5QnFDLEVBQVM3QyxlQUFZa0QsRUFDckJMLEVBQVN0QyxhQUFhLFFBQVMsMEJBRS9CdUMsRUFBY0csVUFBWUgsRUFBY3RDLFlBQ3hDc0MsRUFBYzlDLGVBQVlrRCxFQUMxQkosRUFBY3ZDLGFBQWEsUUFBUywwQkFFcEN3QyxFQUFZRSxVQUFZRixFQUFZdkMsWUFDcEN1QyxFQUFZL0MsZUFBWWtELEVBQ3hCSCxFQUFZeEMsYUFBYSxRQUFTLDBCQUVsQ21DLEVBQVV6QyxTQUFTa0QsWUFBU0QsR0F0RWhDUixFQUFVekMsU0FBU21ELFFBQVVWLEVBQVU5QixXQUFXK0IsZUFBZSxZQUNqRUQsRUFBVXpDLFNBQVNtRCxRQUFRUixRQUFVLFdBWXJDLElBQ1FTLEVBQ0VSLEVBQ0FDLEVBRkZPLEdBQVksRUFDVlIsRUFBV0gsRUFBVTlCLFdBQVcrQixlQUFlLGFBQWExQyxTQUFTRyxRQUNyRTBDLEVBQWdCSixFQUFVOUIsV0FBVytCLGVBQWUsa0JBQWtCMUMsU0FBU0csUUFFNUQ4QyxNQUF0QkwsRUFBUzdDLFlBQ1I2QyxFQUFTdEMsYUFBYSxRQUFTLHNCQUMvQjhDLEdBQVksR0FHY0gsTUFBM0JKLEVBQWM5QyxZQUNiOEMsRUFBY3ZDLGFBQWEsUUFBUyxzQkFDcEM4QyxHQUFZLEdBR1RBLElBeEJIWCxFQUFVTSxZQUNWTixFQUFVekMsU0FBU2tELE9BOEIzQixXQUNJLElBQU1OLEVBQVdILEVBQVU5QixXQUFXK0IsZUFBZSxhQUFhMUMsU0FBU0csUUFDckUwQyxFQUFnQkosRUFBVTlCLFdBQVcrQixlQUFlLGtCQUFrQjFDLFNBQVNHLFFBQy9FMkMsRUFBY0wsRUFBVTlCLFdBQVcrQixlQUFlLGVBQWUxQyxTQUFTRyxRQUMxRWtELEVBQVksQ0FDZFQsU0FBVUEsRUFBUzdDLFVBQ25COEMsY0FBZUEsRUFBYzlDLFVBQzdCK0MsWUFBYSxJQUtqQixPQUg0QkcsTUFBekJILEVBQVkvQyxZQUNYc0QsRUFBUyxZQUFrQlAsRUFBWS9DLFdBRXBDc0QsRUExQ3lCQyxLQUVsQ0MsS0FBS2QsR0FsQkcsRSxZQURPSixjQXVGekJDLGVBQWVDLE9BQU8sY0FBZUMsSSwydERDMUYvQmdCLEUsMlpBQ0YsYUFBYyxPLDRGQUFBLFVBQ1YsZ0JBR0t4RCxTQUFXLEdBR2hCLEVBQUtDLGFBQWEsQ0FBRUMsS0FBTSxTQUcxQixJQUFNQyxFQUFVQyxTQUFTQyxjQUFjLE9BRXZDRixFQUFRRyxhQUFhLEtBQU0sV0FFM0IsRUFBS04sU0FBU0csUUFBVUEsRUFFeEIsRUFBS3NELFlBQWMsS0FFbkJ0RCxFQUFRdUQsVUFBUiwwVkFXQXZELEVBQVF1RCxVQUFSLDRSQVNBLElBQU1oRCxFQUFXTixTQUFTQyxjQUFjLFFBdEM5QixPQXVDVkssRUFBU0osYUFBYSxNQUFPLGNBRTdCSSxFQUFTSixhQUFhLE9BQVEsdUNBQzlCLEVBQUtOLFNBQVNVLFNBQVdBLEVBR3pCLEVBQUtDLFdBQVdDLE9BQU9GLEVBQVVQLEdBN0N2QixFLG9DQW1EZCxTQUFRd0QsR0FDWTVDLEtBQUtKLFdBQVcrQixlQUFlLFdBQ3ZDa0IsTUFBTUQsU0FBV0EsSSw0QkFPN0IsU0FBZUUsR0FDWDlDLEtBQUswQyxZQUFjSSxFQUNMOUMsS0FBS0osV0FBVytCLGVBQWUsZUFDckMxQixZQUFjNkMsSSwyQkFPMUIsU0FBY0MsR0FDSS9DLEtBQUtKLFdBQVcrQixlQUFlLGVBQ3JDa0IsTUFBTUcsaUJBQXFDLFFBQWYsRUFBSUQsUSxzQkF6RVZ6QixjQTZFdENDLGVBQWVDLE9BQU8sa0JBQW1CaUIsSSw4dERDekVuQ1EsRSwyWkFDSCxhQUFjLE8sNEZBQUEsVUFDWCxnQkFDS2hFLFNBQVcsR0FDaEIsRUFBS0MsYUFBYSxDQUFFQyxLQUFNLFNBRTFCLElBQU0rRCxFQUFXLEVBQUgsR0FDZEEsRUFBU0MsZUFBZ0IsRUFDekJELEVBQVNFLFdBQVksRUFFckIsSUFBTUMsRUFBYWhFLFNBQVNDLGNBQWMsT0FDcENGLEVBQVVDLFNBQVNDLGNBQWMsTUFDdkNGLEVBQVFHLGFBQWEsUUFBUyxRQUM5QjhELEVBQVdDLFlBQVlsRSxHQUV2QixJQUFNbUUsRUFBY2xFLFNBQVNDLGNBQWMsT0FDM0NpRSxFQUFZaEUsYUFBYSxRQUFTLGVBQ2xDSCxFQUFRa0UsWUFBWUMsR0FFcEIsSUFBTUMsRUFBUW5FLFNBQVNDLGNBQWMsS0FDckNrRSxFQUFNakUsYUFBYSxRQUFTLFNBQzVCaUUsRUFBTXZCLFVBQVksRUFBS2hDLGFBQWUsR0FDdEMsRUFBS2hCLFNBQVN1RSxNQUFRQSxFQUN0QkQsRUFBWUQsWUFBWUUsR0FFeEIsSUFBTXpCLEVBQWMxQyxTQUFTQyxjQUFjLEtBQzNDeUMsRUFBWXhDLGFBQWEsUUFBUyxlQUNsQ3dDLEVBQVlFLFVBQVksRUFBS25DLGFBQWEsZ0JBQWtCLEdBQzVELEVBQUtiLFNBQVM4QyxZQUFjQSxFQUM1QndCLEVBQVlELFlBQVl2QixHQUl4QixJQUFNMEIsRUFBMEJwRSxTQUFTQyxjQUFjLE9BQ3ZEbUUsRUFBd0JsRSxhQUFhLFFBQVMsaUJBQzlDSCxFQUFRa0UsWUFBWUcsR0FFcEIsSUFBTUMsRUFBYXJFLFNBQVNDLGNBQWMsT0FDMUNvRSxFQUFXbkUsYUFBYSxRQUFTLGNBQ2pDLEVBQUtvRSxVQUFZQyxTQUFTLEVBQUs5RCxhQUFhLGNBQzVDNEQsRUFBV0csS0FBTyxFQUFLL0QsYUFBYSxpQkFDcEM0RCxFQUFXekIsVUFBWSxFQUFLbkMsYUFBYSxhQUFlLElBQU0sRUFBS0EsYUFBYSxpQkFDaEYsRUFBS2IsU0FBU3lFLFdBQWFBLEVBRTNCRCxFQUF3QkgsWUFBWUksR0FDcEN0RSxFQUFRa0UsWUFBWUcsR0FHcEIsSUFBTUssRUFBbUJ6RSxTQUFTQyxjQUFjLE9BQ2hEd0UsRUFBaUJ2RSxhQUFhLFFBQVMsb0JBQ3ZDSCxFQUFRa0UsWUFBWVEsR0FFcEIsSUFBTUMsRUFBWTFFLFNBQVNDLGNBQWMsT0FFbkIsR0FBbEIsRUFBSzhELFdBQ05XLEVBQVV4RSxhQUFhLFFBQVMscUJBQ2hDd0UsRUFBVXhFLGFBQWEsTUFBTywyQ0FHOUJ3RSxFQUFVeEUsYUFBYSxRQUFTLHVCQUNoQ3dFLEVBQVV4RSxhQUFhLE1BQU8sNENBR2pDd0UsRUFBVW5DLFFBQVUsV0FDakJtQyxFQUFVeEUsYUFBYSxRQUFTLHFCQUNoQ3dFLEVBQVV4RSxhQUFhLE1BQU8seUNBQzlCMkQsRUFBU0UsV0FBWSxFQUNyQkYsRUFBU0MsZUFBZ0IsRUFFekJhLEVBQWFOLEVBQVlSLElBSTVCWSxFQUFpQlIsWUFBWVMsR0FDN0IsRUFBSzlFLFNBQVM4RSxVQUFZQSxFQUcxQixJQUFNRSxFQUFxQjVFLFNBQVNDLGNBQWMsT0FDbEQyRSxFQUFtQjFFLGFBQWEsUUFBUyxzQkFDekNILEVBQVFrRSxZQUFZVyxHQUVwQixJQUFNQyxFQUFpQjdFLFNBQVNDLGNBQWMsT0FDOUM0RSxFQUFlM0UsYUFBYSxRQUFTLGVBQ3JDMkUsRUFBZTNFLGFBQWEsTUFBTyxvQ0FDbkMwRSxFQUFtQlgsWUFBWVksR0FDL0IsRUFBS2pGLFNBQVNrRixZQUFjRCxFQUU1QixFQUFLakYsU0FBU0csUUFBVUEsRUFFeEIsSUFBTU8sRUFBV04sU0FBU0MsY0FBYyxRQXhGN0IsT0F5RlhLLEVBQVNKLGFBQWEsTUFBTyxjQUU3QkksRUFBU0osYUFBYSxPQUFRLDRCQUM5QixFQUFLTixTQUFTVSxTQUFXQSxFQUV6QixFQUFLQyxXQUFXQyxPQUFPd0QsRUFBWTFELEdBOUZ4QixFLG9DQWdHZCxTQUFjeUUsR0FDWEMsUUFBUUMsSUFBSSxXLHNDQUVmLFNBQXlCQyxFQUFNQyxFQUFVQyxHQUN0Q0osUUFBUUMsSUFBSUMsRUFBTUMsRUFBVUMsR0FDZixjQUFURixJQUNERixRQUFRQyxJQUFJRyxHQUNaekUsS0FBS2YsU0FBU3lFLFdBQVd6QixVQUFZd0MsRUFBVyxJQUFNekUsS0FBS0YsYUFBYSxvQixtQ0FJOUUsU0FBc0I0RSxHQUNuQixJQUFNWCxFQUFZL0QsS0FBS2YsU0FBUzhFLFVBQzFCYixFQUFXbEQsS0FDakIrRCxFQUFVbkMsUUFBVSxXQUNqQm1DLEVBQVV4RSxhQUFhLFFBQVMscUJBQ2hDd0UsRUFBVXhFLGFBQWEsTUFBTyx5Q0FDOUIyRCxFQUFTRSxXQUFZLEVBQ3JCRixFQUFTQyxlQUFnQixFQUV6QmEsRUFBYWQsRUFBU2pFLFNBQVN5RSxXQUFZUixHQUMzQ3dCLE8sZ0NBSU4sV0FDRzFFLEtBQUsyRCxXQUFhLEVBQ2xCM0QsS0FBS2YsU0FBU3lFLFdBQVd6QixVQUFZakMsS0FBSzJELFVBQVksSUFBTTNELEtBQUtGLGFBQWEsbUIsa0JBR2pGLFdBQ0dFLEtBQUtmLFNBQVNHLFFBQVF5RCxNQUFNOEIsUUFBVSxPLHNCQWhJaEJyRCxjQXFJNUIsU0FBUzBDLEVBQWFOLEVBQVlSLElBRUEsSUFBM0JBLEVBQVNDLGNBQ1ZPLEVBQVduRSxhQUFhLFFBQVMsZ0JBRUosSUFBdkIyRCxFQUFTRSxVQUNYRixFQUFTUyxXQUFhRCxFQUFXRyxLQUNsQ0gsRUFBV25FLGFBQWEsUUFBUyxrQkFHakNtRSxFQUFXbkUsYUFBYSxRQUFTLGlCQUc3QjJELEVBQVNFLFdBQ2hCTSxFQUFXbkUsYUFBYSxRQUFTLGtCQUt2Q2dDLGVBQWVDLE9BQU8sWUFBYXlCLEksMkJDeEg1QixTQUFTMkIsRUFBWWpFLEVBQUtrRSxHQUM3QkMsYUFBYUMsUUFBUXBFLEVBQUtxRSxLQUFLQyxVQUFVSixJQUV0QyxTQUFTSyxFQUFVdkUsR0FDdEIsT0FBT3FFLEtBQUtHLE1BQU1MLGFBQWFNLFFBQVF6RSxJLGt6Q0NwQ3BDLElBRU0wRSxFQUFtQixtQkFHbkJDLEVBQXFCLENBRWhDQyxTQUFVLFdBRVZDLE1BQU8sUUFFUEMsV0FBWSxZQUVaQyxPQUFRLFNBRVJDLFNBQVUsWUFHQ0MsRUFBYixXQUtFLFdBQVlDLEksNEZBQUksU0FDZDdGLEtBQUs2RixHQUFLQSxFQUVWN0YsS0FBSzhGLFNBQVcsR0FFaEI5RixLQUFLYixLQUFPbUcsRUFBbUJDLFNBRS9CdkYsS0FBSytGLEtBQU8sRUFHWi9GLEtBQUtnRyxhQUFlLEVBRXBCaEcsS0FBS2lHLFVBQVksSUFBSUMsSyxRQWpCekIsTyxFQUFBLEcsRUFBQSwwQkF1QkUsV0FDRSxJQUFJQyxFQUFxQm5HLEtBQUs4RixTQUFTTSxRQUFPLFNBQUNDLEdBQUQsT0FBV0EsRUFBS2pELGFBQzlELE9BQUkrQyxFQUFtQjdGLE9BQVMsRUFDckI2RixFQUFtQixHQUV2QixPQTVCWCxxQkFrQ0UsU0FBUUUsSUFDTkMsUUFBVUQsR0FDVnJHLEtBQUs4RixTQUFTUyxLQUFLRixLQXBDdkIsd0JBMENFLFNBQVdBLElBQ1RHLFFBQW1CSCxFQUFLUixJQUN4QixJQUFLLElBQUlZLEVBQUksRUFBR0EsRUFBSXpHLEtBQUs4RixTQUFTeEYsT0FBUW1HLElBQUksQ0FDNUMsSUFBTUMsRUFBYTFHLEtBQUs4RixTQUFTVyxHQUNqQyxHQUFJSixFQUFLUixLQUFPYSxFQUFXYixHQUV6QixZQURBN0YsS0FBSzhGLFNBQVNhLE9BQU9GLEVBQUcsTUEvQ2hDLDBCQTBERSxTQUFhWixHQUFJLFVBQ0U3RixLQUFLOEYsVUFEUCxJQUNmLDJCQUFnQyxLQUF2Qk8sRUFBdUIsUUFDOUIsR0FBSUEsRUFBS1IsS0FBT0EsRUFFZCxPQURBUSxFQUFLakQsV0FBWSxHQUNWLEdBSkksOEJBT2YsT0FBTyxJQWpFWCx5QkF1RUUsV0FBYyxVQUNPcEQsS0FBSzhGLFVBRFosSUFDWiwyQkFBa0MsS0FBdkJPLEVBQXVCLFFBQ2hDLElBQXVCLElBQW5CQSxFQUFLakQsVUFDUCxPQUFPaUQsR0FIQyw4QkFNWixPQUFPLE9BN0VYLG9DQW1GRSxTQUF1QlIsR0FBSSxVQUNON0YsS0FBSzhGLFVBREMsSUFDekIsMkJBQWtDLEtBQXZCTyxFQUF1QixRQUNoQyxHQUFJQSxFQUFLUixLQUFPQSxFQUdkLE9BRkFRLEVBQUsxQyxXQUFhLE9BQ2xCM0QsS0FBS2dHLGNBQWdCLElBSkEsaUNBbkY3QixxQkFpR0UsV0FDRSxPQUFPaEcsS0FBS2IsT0FBU21HLEVBQW1CRyxZQUFjekYsS0FBS2IsT0FBU21HLEVBQW1CRSxRQWxHM0YsMEJBd0dFLGNBeEdGLG1DQTRHRSxXQUNFLElBQUlvQixFQUFPLEVBSVgsT0FIQTVHLEtBQUs4RixTQUFTZSxTQUFRLFNBQUNSLEdBQ3JCTyxHQUFRRSxLQUFLcEgsSUFBSTJHLEVBQUt2RSxjQUFnQnVFLEVBQUsxQyxVQUFXLE1BRWpEaUQsSUFqSFgsaUNBbUhFLFNBQW9CRyxHQVdsQixPQVZBL0csS0FBSzZGLEdBQUtrQixFQUFZbEIsR0FDdEI3RixLQUFLYixLQUFPNEgsRUFBWTVILEtBQ3hCYSxLQUFLK0YsS0FBT2dCLEVBQVloQixLQUN4Qi9GLEtBQUtnRyxhQUFlZSxFQUFZZixhQUNoQ2hHLEtBQUtpRyxVQUFZLElBQUlDLEtBQUthLEVBQVlkLFdBQ3RDakcsS0FBSzhGLFNBQVdpQixFQUFZakIsU0FBU2tCLEtBQUksU0FBQ0MsR0FDeEMsSUFBSUMsRUFBSSxJQUFJQyxLQUVaLE9BRElELEVBQUVFLGlCQUFpQkgsTUFHbEJqSCxPQTlIWCw4QkFnSUUsV0FDRSxNQUFPLENBQ0w2RixHQUFJN0YsS0FBSzZGLEdBQUlDLFNBQVU5RixLQUFLOEYsU0FBU2tCLEtBQUksU0FBQ1gsR0FBRCxPQUFVQSxFQUFLZ0Isc0JBQXFCbEksS0FBTWEsS0FBS2IsS0FBTTRHLEtBQU0vRixLQUFLK0YsS0FBTUMsYUFBY2hHLEtBQUtnRyxhQUFjQyxVQUFXakcsS0FBS2lHLFVBQVVxQixnQixpQkFsSWhMLEtBNElPLFNBQVNDLEVBQWUxQixHQUM3QixJQUFNMkIsR0FBY3RDLFFBQVVHLEdBQzFCb0MsRUFBSSxJQUFJN0IsRUFDWixPQUFLNEIsRUFBWTNCLEdBQ1Y0QixFQUFFQyxvQkFBb0JGLEVBQVkzQixJQURaLEtBSXhCLFNBQVM4QixFQUFpQkMsR0FDL0IsSUFBTUosR0FBY3RDLFFBQVVHLEdBQzlCbUMsRUFBWUksRUFBUS9CLElBQU0rQixFQUFRUCxvQkFDbEN6QyxRQUFZUyxFQUFrQm1DLEdBdUJ6QixTQUFTSyxJQUVkLE1BQWUsYUFERi9DLGFBQWFNLFFBL0xjLDhCQWlNL0IsS0FFQXhCLFNBQVNrQixhQUFhTSxRQXBNRixvQkFvTThCLEkseVBDeE10RCxJQUFNK0IsRUFBYixXQVFJLFdBQVlXLEVBQVd0RSxFQUFPekIsRUFBYUQsSSw0RkFBZSxTQUN0RDlCLEtBQUs4SCxVQUFZQSxFQUNqQjlILEtBQUs2RixJQUFNLEVBQ1g3RixLQUFLd0QsTUFBUUEsRUFDYnhELEtBQUsrQixZQUFjQSxFQUNuQi9CLEtBQUs4QixjQUFnQkEsRUFDckI5QixLQUFLb0QsV0FBWSxFQUNqQnBELEtBQUsyRCxVQUFZLEUsUUFmekIsTyxFQUFBLEcsRUFBQSwrQkFpQkksU0FBaUJvRSxHQUNiLElBQUkxQixFQUFPLElBQUljLEVBQUtZLEVBQVNELFVBQVdDLEVBQVN2RSxNQUFPdUUsRUFBU2hHLFlBQWFnRyxFQUFTakcsZUFJdkYsT0FIQXVFLEVBQUtqRCxVQUFZMkUsRUFBUzNFLFVBQzFCaUQsRUFBS1IsR0FBS2tDLEVBQVNsQyxHQUNuQlEsRUFBSzFDLFVBQVlvRSxFQUFTcEUsVUFDbkIwQyxJQXRCZiw4QkF3QkksV0FDSSxNQUFPLENBQUU3QyxNQUFPeEQsS0FBS3dELE1BQU96QixZQUFhL0IsS0FBSytCLFlBQWFELGNBQWU5QixLQUFLOEIsY0FBZXNCLFVBQVdwRCxLQUFLb0QsVUFBV08sVUFBVzNELEtBQUsyRCxVQUFXa0MsR0FBSTdGLEtBQUs2RixHQUFJaUMsVUFBVzlILEtBQUs4SCxnQixpQkF6QnpMLEtBNkJhRSxFQUFnQixnQkFDaEJDLEVBQWtCLGtCQVV4QixTQUFTM0IsRUFBVUQsR0FDdEIsSUFBSTZCLEdBQVdoRCxRQUFVOEMsR0FDekIsSUFBS0UsRUFBUzdCLEVBQUtSLElBQUssQ0FFcEIsSUFBSUEsRUFBS2pDLFVBQVNzQixRQUFVK0MsSUFDNUI1QixFQUFLUixHQUFLQSxHQUVWakIsUUFBWXFELEVBQWlCcEMsRUFBSyxHQUV0QyxJQUFJc0MsRUFBTTlCLEVBQUtnQixtQkFHZixPQUZBYSxFQUFTN0IsRUFBS1IsSUFBTXNDLEdBQ3BCdkQsUUFBWW9ELEVBQWVFLEdBQ3BCN0IsRUFBS1IsR0FzQ1QsU0FBU1csRUFBbUJYLEdBQy9CLElBQUlxQyxHQUFXaEQsUUFBVThDLFVBQ2xCRSxFQUFTckMsSUFDaEJqQixRQUFZb0QsRUFBZUUsTUMvRjNCRSxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVQyxRQUczQyxJQUFJQyxFQUFTSixFQUF5QkUsR0FBWSxDQUdqREMsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSCxHQUFVRSxFQUFRQSxFQUFPRCxRQUFTRixHQUcvQ0csRUFBT0QsUUNuQmZGLEVBQW9CSyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSWhJLEtBQU9nSSxFQUNYTixFQUFvQk8sRUFBRUQsRUFBWWhJLEtBQVMwSCxFQUFvQk8sRUFBRUwsRUFBUzVILElBQzVFa0ksT0FBT0MsZUFBZVAsRUFBUzVILEVBQUssQ0FBRW9JLFlBQVksRUFBTUMsSUFBS0wsRUFBV2hJLE1DSjNFMEgsRUFBb0JPLEVBQUksQ0FBQ1QsRUFBS2MsSUFBVUosT0FBT0ssVUFBVUMsZUFBZUMsS0FBS2pCLEVBQUtjLEcsbUJDc0IzRSxJQUFNSSxFQUNOLE1BRE1BLEVBRUosUSw0aURDYkhDLEUsdVpBQ0YsYUFBYyxPLDRGQUFBLFVBQ1YsZ0JBRUtySyxTQUFXLEdBSWhCLEVBQUtDLGFBQWEsQ0FBRUMsS0FBTSxTQUcxQixJQUFNb0ssRUFBU2xLLFNBQVNDLGNBQWMsVUFFdENpSyxFQUFPaEssYUFBYSxRQUFTLGVBQzdCZ0ssRUFBT3RILFVBQVksRUFBS2hDLGFBQWUsR0FHdkMsRUFBS2hCLFNBQVNzSyxPQUFTQSxFQUN2QkEsRUFBT2hLLGFBQWEsT0FBUSxVQUM1QmdLLEVBQU8xRyxNQUFNMkcsUUFBVSxPQUd2QixJQUFNN0osRUFBV04sU0FBU0MsY0FBYyxRQXJCOUIsT0FzQlZLLEVBQVNKLGFBQWEsTUFBTyxjQUU3QkksRUFBU0osYUFBYSxPQUFRLDhCQUM5QixFQUFLTixTQUFTVSxTQUFXQSxFQUd6QixFQUFLQyxXQUFXQyxPQUFPRixFQUFVNEosR0FFakMsRUFBSzlJLEtBQU8sRUFBS1gsYUFBYSxRQUNiLFdBQWIsRUFBS1csS0FDTCxFQUFLeEIsU0FBU3NLLE9BQU9oSyxhQUFhLFFBQVMsRUFBS04sU0FBU3NLLE9BQU96SixhQUFhLFNBQVcsWUFDcEUsT0FBYixFQUFLVyxNQUNaLEVBQUt4QixTQUFTc0ssT0FBT2hLLGFBQWEsUUFBUyxFQUFLTixTQUFTc0ssT0FBT3pKLGFBQWEsU0FBVyxRQUc1RixFQUFLMkosS0FBTyxFQUFLM0osYUFBYSxRQUNaLFVBQWQsRUFBSzJKLEtBQ0wsRUFBS3hLLFNBQVNzSyxPQUFPaEssYUFBYSxRQUFTLEVBQUtOLFNBQVNzSyxPQUFPekosYUFBYSxTQUFXLFVBQ25FLFNBQWQsRUFBSzJKLE1BQ1osRUFBS3hLLFNBQVNzSyxPQUFPaEssYUFBYSxRQUFTLEVBQUtOLFNBQVNzSyxPQUFPekosYUFBYSxTQUFXLFNEMUI3RixXQUEwQyxJQUFwQjRKLEVBQW9CLHVEQUFaLElBQUl4RCxLQUNuQ3lELEVBQWFOLEVBU2pCLE9BUklLLEVBQU1FLFdBQWEsRUFDckJELEVBQWFOLEVBRU5LLEVBQU1FLFdBQWEsR0FDMUJELEVBQWFOLEVBQ0pLLEVBQU1FLFdBQWEsS0FDNUJELEVBQWFOLEdBRVJNLEVDbUJlRSxLQUNFUixHQUFxRCxTQUFoQyxFQUFLdkosYUFBYSxXQUNyRCxFQUFLYixTQUFTc0ssT0FBT2hLLGFBQWEsUUFBUyxFQUFLTixTQUFTc0ssT0FBT3pKLGFBQWEsU0FBVyxTQTlDbEYsRSxZQURHd0IsYyw4c0RBb0RyQkMsZUFBZUMsT0FBTyxjQUFlOEgsRyxJQy9EaEJRLEUsMlpBQ25CLGFBQWMsTyw0RkFBQSxVQUNaLGdCQUdLN0ssU0FBVyxHQUVoQixFQUFLQyxhQUFhLENBQUVDLEtBQU0sU0FHMUIsSUFBTUMsRUFBVUMsU0FBU0MsY0FBYyxPQUN2QyxFQUFLTCxTQUFTRyxRQUFVQSxFQUN4QixFQUFLSCxTQUFTRyxRQUFRRyxhQUFhLFFBQVMsaUJBQzVDLEVBQUtOLFNBQVNHLFFBQVF1RCxVQUFZLHNEQUdsQyxJQUFNaEQsRUFBV04sU0FBU0MsY0FBYyxRQWY1QixPQWdCWkssRUFBU0osYUFBYSxNQUFPLGNBRTdCSSxFQUFTSixhQUFhLE9BQVEsNkJBQzlCLEVBQUtOLFNBQVNVLFNBQVdBLEVBQ3pCLEVBQUtWLFNBQVNHLFFBQVF5RCxNQUFNMkcsUUFBVSxPQUV0QyxFQUFLNUosV0FBVzBELFlBQVkzRCxHQXRCaEIsRSx5Q0F5QmQsV0FBZSxXQUNiSyxLQUFLZixTQUFTRyxRQUFReUQsTUFBTTJHLFFBQVUsUUFDdENPLFlBQVcsV0FDVCxFQUFLOUssU0FBU0csUUFBUXlELE1BQU04QixRQUFVLElBQ3JDLE0sdUJBRUwsV0FBWSxXQUNWM0UsS0FBS2YsU0FBU0csUUFBUXlELE1BQU04QixRQUFVLEVBQ3RDb0YsWUFBVyxXQUNULEVBQUs5SyxTQUFTRyxRQUFReUQsTUFBTTJHLFFBQVUsU0FDckMsTywrQkFJTCxXQUNFeEosS0FBS1MsS0FBT1QsS0FBS0YsYUFBYSxRQUU5QixJQUFJa0ssRUFBU2hLLEtBQUtpSyxXQUNkQyxFQUFhLEdBQ2pCRixFQUFPbkQsU0FBUSxTQUFBc0QsR0FDVkEsRUFBUUMsVUFBWUMsS0FBS0MsWUFDMUJKLEdBQWNDLEVBQVFJLGNBSTFCdkssS0FBS2YsU0FBU0csUUFBUXVELFVBQXRCLHVEQUFrRnVILEVBQWxGLFVBSUEsSUFEQSxJQUFJTSxFQUFJUixFQUFPMUosT0FDUG1HLEVBQUksRUFBR0EsRUFBSStELEVBQUcvRCxJQUNwQnpHLEtBQUt5SyxZQUFZVCxFQUFPLElBRTFCaEssS0FBS0osV0FBVzBELFlBQVl0RCxLQUFLZixTQUFTRyxjLHNCQTFERmtDLGNBOEQ1Q0MsZUFBZUMsT0FBTyxhQUFjc0ksRyw0akRDckRwQyxJQUNNWSxFLHVaQUNGLGFBQWMsTyw0RkFBQSxVQUNWLGdCQUVLekwsU0FBVyxHQUdoQixFQUFLQyxhQUFhLENBQUVDLEtBQU0sU0FHMUIsSUFBTUMsRUFBVUMsU0FBU0MsY0FBYyxPQUV2Q0YsRUFBUUcsYUFBYSxRQUFTLGVBRTlCLElBQUlvTCxFQUFPdEwsU0FBU0MsY0FBYyxPQUNsQ3FMLEVBQUtDLElBQU0sOEJBQ1hELEVBQUtwTCxhQUFhLFFBQVMsb0JBRTNCLElBQUlzTCxFQUFXeEwsU0FBU0MsY0FBYyxLQUN0Q3VMLEVBQVNDLEtBQUssYUFDZEQsRUFBU2hGLEdBQUssV0FFZGdGLEVBQVN2SCxZQUFZcUgsR0FDckJ2TCxFQUFRa0UsWUFBWXVILEdBUXBCekwsRUFBUXVELFdBQWEsbUdBRXJCdkQsRUFBUXVELFdBQWEsdURBQ3JCdkQsRUFBUXVELFdBQVIsb0xBbkNVLCtYQW1DVixxSEFRQSxFQUFLMUQsU0FBU0csUUFBVUEsRUFHeEIsSUFBTU8sRUFBV04sU0FBU0MsY0FBYyxRQUN4Q0ssRUFBU0osYUFBYSxNQUFPLGNBRTdCSSxFQUFTSixhQUFhLE9BQVEsOEJBQzlCLEVBQUtOLFNBQVNVLFNBQVdBLEVBR3pCLEVBQUtDLFdBQVdDLE9BQU9GLEVBQVVQLEdBRWpDLElBQUkyTCxFQUFRM0wsRUFBUTZLLFdBQVcsR0FDL0JjLEVBQU05TCxTQUFTRyxRQUFReUQsTUFBTTJHLFFBQVUsT0FDdkMsSUFBSXdCLEVBQVU1TCxFQUFRNkssV0FBVyxHQUM3QmdCLEVBQVdGLEVBQU1uTCxXQUFXK0IsZUFBZSxlQUMvQ3FKLEVBQVFwSixRQUFVLFdBQ2RtSixFQUFNRyxnQkFHVkQsRUFBU3JKLFFBQVUsV0FDZm1KLEVBQU0vSSxhQUdWLElBQU1tSixFQUFvQyxTQUFDakwsR0FFdkMsSUFBSTJGLEdBQUtnQyxVQUNULEdBQVcsT0FBUGhDLEVBQWEsQ0FDYixJQUFJdUYsR0FBYzdELFFBQWUxQixHQUM3QnVGLEVBQVlqTSxPQUFTbUcsYUFBNkI4RixFQUFZak0sT0FBU21HLGlCQUFpQzhGLEVBQVlqTSxPQUFTbUcsYUFDeEgrRixRQUFRLDhFQUlUaEgsUUFBUUMsSUFBSSxVQUNaOEcsRUFBWWpNLEtBQU9tRyxlQUNuQnFDLFFBQWlCeUQsR0FDakIvRyxRQUFRQyxLQUFJaUQsUUFBZTZELEVBQVl2RixNQU52QzNGLEVBQUVLLG9CQXhFUixPQXFGVixFQUFLWCxXQUFXK0IsZUFBZSxZQUFZQyxRQUFVdUosRUFDckQsRUFBS3ZMLFdBQVcrQixlQUFlLFlBQVlDLFFBQVV1SixFQXRGM0MsRSxZQURHN0osY0EyRnJCQyxlQUFlQyxPQUFPLGNBQWVrSixHIiwiZmlsZSI6ImNvbXBvbmVudHMuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbnB1dEZpZWxkIGNsYXNzIHRvIG1ha2UgYSB3ZWIgY29tcG9uZW50IHRoYXQgY2FuIGhhbmRsZSB1c2VyIGlucHV0LlxuICogQnkgZGVmYXVsdCB0aGUgbWF4IGNoYXJhY3RlciBjb3VudCBpcyA1MC5cbiAqIFxuICogRXhhbXBsZTogPHBvbW8taW5wdXQgcmVxdWlyZWQ9XCJ0cnVlXCIgbWF4PVwiMTBcIj5UZXN0aW5nPC9wb21vLWlucHV0PlxuICogV2lsbCBtYWtlIGFuIGlucHV0IGZpZWxkIG9mIG1heCAxMCBjaGFyYWN0ZXJzIGFuZCB0aGUgcGxhY2Vob2xkZXIgXG4gKiB0ZXh0IHdpbGwgYmUgXCJUZXN0aW5nKlwiLiBUaGUgXCIqXCIgaXMgYmVjYXVzZSB0aGlzIGlucHV0IGlzIHNldCBhcyByZXF1aXJlZC5cbiAqIEBjbGFzc1xuICogQGF1dGhvciBFdGhhbiBIdXluaFxuICovXG5jbGFzcyBJbnB1dEZpZWxkIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIC8qKiBDb25zdHJ1Y3RvciBmb3IgcG9tby1pbnB1dCBjb21wb25lbnQgY3JlYXRlcyBhIGNvbnRlbnRFZGl0YWJsZSBkaXYgd2l0aFxuICAgICAqIGEgZGVmYXVsdCBtYXggY2hhcmFjdGVyIGxpbWl0IG9mIDUwXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudXNlclR5cGVkID0gXCJcIjtcbiAgICAgICAgLy8gdXNlIGFuIG9iamVjdCB0byBzdG9yZSBhbGwgcmVsZXZhbnQgZWxlbWVudHMgdG8gdGhlIGNvbXBvbmVudHMgZm9yIGNvbnZlbmllbmNlXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB7fTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzaGFkb3cgcm9vdFxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pOyAvLyBzZXRzIGFuZCByZXR1cm5zICd0aGlzLnNoYWRvd1Jvb3QnXG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGV4YW1wbGUgZWxlbWVudCB0aGF0IHdpbGwgc2VydmUgYXMgb3VyIFwicm9vdFwiIGVsZW1lbnQgaGVyZVxuICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgLy8gc2V0IGNsYXNzIGFzIGFuIGV4YW1wbGUsIHRoaXMgY2FuIGJlIGxhdGVyIHVzZWQgZm9yIGNzcyFcbiAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXRcIik7XG5cbiAgICAgICAgd3JhcHBlci5wbGFjZWhvbGRlciA9IFwiRGVmYXVsdCBUZXh0XCI7XG4gICAgICAgIHdyYXBwZXIuY29udGVudEVkaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgd3JhcHBlci5tYXggPSA1MDsgLy9ieSBkZWZhdWx0IHRoZSBtYXggY2hhcmFjdGVyIGNvdW50IGlzIDUwXG5cbiAgICAgICAgLy8gc3RvcmUgaXQgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyID0gd3JhcHBlcjtcblxuICAgICAgICAvLyBBZGQgU3R5bGVzXG4gICAgICAgIGNvbnN0IGxpbmtFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHRoZSBjb3JyZWN0IHN0eWxlc2hlZXQgd2l0aCB0aGUgY29ycmVjdCBzdHlsaW5nc1xuICAgICAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiLi9hc3NldHMvc3R5bGVzL2lucHV0LWZpZWxkLmNzc1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgY3JlYXRlZCBlbGVtZW50cyB0byB0aGUgc2hhZG93IERPTVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKGxpbmtFbGVtLCB3cmFwcGVyKTtcblxuICAgICAgICAvL2FkZCBkZWZhdWx0IHN0eWxlXG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLndyYXBwZXIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgKyBcIiBwbGFjZWhvbGRlclwiKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW5vbnltb3VzIGZ1bmN0aW9uIHRvIHJlcGxhY2UgcGxhY2Vob2xkZXIgdGV4dCB3aXRoIGVtcHR5IHN0cmluZyB3aGVuIHVzZXIgY2xpY2tzIG9uIGNvbXBvbmVudFxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vaWYgZm9jdXNlZCBhbmQgY3VycmVudCB0ZXh0IGlzIHRoZSBwbGFjZWhvbGRlciB0ZXh0IHJlcGxhY2UgaXQgd2l0aCBlbXB0eSBzdHJpbmdcbiAgICAgICAgICAgIGlmKCF0aGlzLnVzZXJUeXBlZCkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0XCIpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW5vbnltb3VzIGZ1bmN0aW9uIHRvIHJlcGxhY2UgZW1wdHkgc3RyaW5nIHdpdGggcGxhY2Vob2xkZXIgdGV4dCB3aGVuIHVzZXIgY2xpY2tzIGF3YXlcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vaWYgbm90IGZvY3VzZWQgYW5kIHRoZXJlIGlzIG5vIGlucHV0LCByZXR1cm4gYmFjayB0byBwbGFjZWhvbGRlciBzdHJpbmdcbiAgICAgICAgICAgIGlmKCF0aGlzLnVzZXJUeXBlZCkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IHBsYWNlaG9sZGVyXCIpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIudGV4dENvbnRlbnQgPSB3cmFwcGVyLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqIFxuICAgICAqIENoZWNrcyBpbnB1dCBmaWVsZCBpZiBpdCdzIGV4Y2VlZGVkIHRoZSBtYXhpbXVtIGNoYXJhY3RlciBsaW1pdCBvbiBhbiBldmVudFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGUgQ2hlY2tzIG9uIGtleWRvd24scGFzdGUsIGFuZCBpbnB1dCBldmVudHNcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gZmFsc2UgSWYgdGhlIG1heCBjaGFyYWN0ZXIgbGltaXQgaGFzIGJlZW4gcmVhY2hlZFxuICAgICovXG4gICAgbGltaXRDaGFyQ291bnQoZSkge1xuICAgICAgICB0aGlzLnVzZXJUeXBlZCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICAgIC8vaWYgdGhlIHVzZXIgaGFzbid0IGhpZ2hsaWdodGVkIGFueSB0ZXh0IGFuZCB3ZSBhcmUgYXQgbWF4IGxlbmd0aFxuICAgICAgICBpZih3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKS5sZW5ndGggPT0gMCAmJiB0aGlzLnRleHRDb250ZW50Lmxlbmd0aCA+PSB0aGlzLm1heCkge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgbWF4XCIpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXRcIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBTdG9wIHRoZSB1c2VyIGZyb20gaW5wdXR0aW5nIGFueXRoaW5nIGJ1dCBudW1iZXJzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQ2hlY2tzIG9uIGtleWRvd24scGFzdGUsIGFuZCBpbnB1dCBldmVudHNcbiAgICAqL1xuICAgIG51bWVyaWNJbnB1dE9ubHkoZXZlbnQpIHtcbiAgICAgICAgdGhpcy51c2VyVHlwZWQgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICAvL2lmIHRoZSB1c2VyIGhhc24ndCBoaWdobGlnaHRlZCBhbnkgdGV4dCBhbmQgd2UgYXJlIGF0IG1heCBsZW5ndGhcbiAgICAgICAgaWYod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkubGVuZ3RoID09IDAgJiYgdGhpcy50ZXh0Q29udGVudC5sZW5ndGggPj0gdGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IG1heFwiKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXRcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgLy9kaWZmZXJlbnQgZXZlbnRzIHN0b3JlIHRoZSB0ZXh0IGluIGRpZmZlcmVudCB3YXlzIHNvIHdlIG5lZWQgdGhlc2UgaWZzXG4gICAgICAgIGlmKGV2ZW50LnR5cGUgPT0gXCJrZXlwcmVzc1wiICYmIGlzTmFOKGV2ZW50LmtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImludmFsaWRcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoZXZlbnQudHlwZSA9PSBcImlucHV0XCIgJiYgaXNOYU4oZXZlbnQuZGF0YSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IGludmFsaWRcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoZXZlbnQudHlwZSA9PSBcInBhc3RlXCIgJiYgaXNOYU4oZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwiVGV4dFwiKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IGludmFsaWRcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyVHlwZWQ7XG4gICAgfVxuXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGxldCBtYXhDaGFyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJtYXhcIik7XG5cbiAgICAgICAgLy9zZXQgYXR0cmlidXRlLXNwZWNpZmllZCBtYXggY2hhclxuICAgICAgICBpZiAobWF4Q2hhciAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLm1heCA9IE51bWJlcihtYXhDaGFyKTtcblxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICBpZiAodGhpcy5nZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiKSkge1xuICAgICAgICAgICAgdGhpcy5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIudGV4dENvbnRlbnQgKz0gXCIqXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCB0aGlzLm51bWVyaWNJbnB1dE9ubHksIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwicGFzdGVcIiwgdGhpcy5udW1lcmljSW5wdXRPbmx5LCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMubnVtZXJpY0lucHV0T25seSwgZmFsc2UpOyAvL3RoaXMgaXMgbWFpbmx5IGZvciBjaGFuZ2luZyB0aGUgYmFja3NwYWNlL2RlbCBrZXlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vbGlzdGVuIGZvciBtYXggY2hhcmFjdGVycyBvbiB0aGVzZSBldmVudHNcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgdGhpcy5saW1pdENoYXJDb3VudCwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJwYXN0ZVwiLCB0aGlzLmxpbWl0Q2hhckNvdW50LCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMubGltaXRDaGFyQ291bnQsIGZhbHNlKTsgLy90aGlzIGlzIG1haW5seSBmb3IgY2hhbmdpbmcgdGhlIGJhY2tzcGFjZS9kZWwga2V5XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIucGxhY2Vob2xkZXIgPSB0aGlzLmVsZW1lbnRzLndyYXBwZXIudGV4dENvbnRlbnQ7XG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJwb21vLWlucHV0XCIsIElucHV0RmllbGQpOyIsIi8qKlxuICogTW9kYWxJbnB1dCBjbGFzcyBsb2FkcyBmdW5jdGlvbmFsaXR5IGZvciB0aGUgY2xvc2UgYnV0dG9uIGFuZFxuICogc2F2ZSBidXR0b24gaW4gdGhlIGlucHV0IG1vZGFsIGluIHRpbWVyLmh0bWwuXG4gKiBAY2xhc3NcbiAqIEBhdXRob3IgRXRoYW4gSHV5bmhcbiAqL1xuY2xhc3MgTW9kYWxJbnB1dCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgbGV0IHRhc2tNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkVGFza01vZGFsXCIpO1xuICAgICAgICBsZXQgY2xvc2VCdG4gPSB0YXNrTW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNsb3NlXCIpO1xuICAgICAgICBcbiAgICAgICAgY2xvc2VCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGFza01vZGFsLmhpZGVNb2RhbCgpO1xuXG4gICAgICAgICAgICByZXNldElucHV0cygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRhc2tNb2RhbC5lbGVtZW50cy5zYXZlQnRuID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzYXZlLWJ0blwiKTtcbiAgICAgICAgdGFza01vZGFsLmVsZW1lbnRzLnNhdmVCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vaWYgdGhlcmUgYXJlIHZhbHVlcyBpbnB1dHRlZCBpbnRvIHRoZSBmaWVsZHNcbiAgICAgICAgICAgIGlmKGNoZWNrVmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICB0YXNrTW9kYWwuaGlkZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgdGFza01vZGFsLmVsZW1lbnRzLnZhbHVlcyA9IGdldFZhbHVlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGFza01vZGFsKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSB1c2VyIGhhcyBpbnB1dHRlZCBzb21ldGhpbmcgZm9yIHRhc2sgbmFtZSBhbmQgcG9tb3MgcmVxdWlyZWRcbiAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgcmVxdWlyZWQgaW5wdXQgZmllbGRzIGhhdmUgaW5wdXQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tWYWx1ZXMoKSB7XG4gICAgICAgICAgICBsZXQgZ29vZElucHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLW5hbWVcIikuZWxlbWVudHMud3JhcHBlcjtcbiAgICAgICAgICAgIGNvbnN0IHBvbW9zUmVxdWlyZWQgPSB0YXNrTW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInBvbW9zLXJlcXVpcmVkXCIpLmVsZW1lbnRzLndyYXBwZXI7XG5cbiAgICAgICAgICAgIGlmKHRhc2tOYW1lLnVzZXJUeXBlZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXNrTmFtZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgaW52YWxpZFwiKTtcbiAgICAgICAgICAgICAgICBnb29kSW5wdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYocG9tb3NSZXF1aXJlZC51c2VyVHlwZWQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcG9tb3NSZXF1aXJlZC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgaW52YWxpZFwiKTtcbiAgICAgICAgICAgICAgICBnb29kSW5wdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGdvb2RJbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGFsbCB1c2VyIGlucHV0IGFuZCByZXNldHMgdGhlIGlucHV0IGZpZWxkc1xuICAgICAgICAgKiBAcmV0dXJucyB7RGljdGlvbmFyeX0ge3Rhc2tOYW1lOiBpbnB1dCwgcG9tb3NSZXF1aXJlZDogaW5wdXQsIGRlc2NyaXB0aW9uOiBpbnB1dH1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFZhbHVlcygpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLW5hbWVcIikuZWxlbWVudHMud3JhcHBlcjtcbiAgICAgICAgICAgIGNvbnN0IHBvbW9zUmVxdWlyZWQgPSB0YXNrTW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInBvbW9zLXJlcXVpcmVkXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRhc2tNb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikuZWxlbWVudHMud3JhcHBlcjtcbiAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbCA9IHtcbiAgICAgICAgICAgICAgICB0YXNrTmFtZTogdGFza05hbWUudXNlclR5cGVkLFxuICAgICAgICAgICAgICAgIHBvbW9zUmVxdWlyZWQ6IHBvbW9zUmVxdWlyZWQudXNlclR5cGVkLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYoZGVzY3JpcHRpb24udXNlclR5cGVkICE9IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm5WYWxbXCJkZXNjcmlwdGlvblwiXSA9IGRlc2NyaXB0aW9uLnVzZXJUeXBlZDtcblxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGVhcnMgaW5wdXRzIGFuZCByZXNldHMgc3R5bGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0SW5wdXRzKCkge1xuICAgICAgICAgICAgY29uc3QgdGFza05hbWUgPSB0YXNrTW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInRhc2stbmFtZVwiKS5lbGVtZW50cy53cmFwcGVyO1xuICAgICAgICAgICAgY29uc3QgcG9tb3NSZXF1aXJlZCA9IHRhc2tNb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwicG9tb3MtcmVxdWlyZWRcIikuZWxlbWVudHMud3JhcHBlcjtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKS5lbGVtZW50cy53cmFwcGVyO1xuXG4gICAgICAgICAgICB0YXNrTmFtZS5pbm5lclRleHQgPSB0YXNrTmFtZS5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIHRhc2tOYW1lLnVzZXJUeXBlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRhc2tOYW1lLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBwbGFjZWhvbGRlclwiKTtcblxuICAgICAgICAgICAgcG9tb3NSZXF1aXJlZC5pbm5lclRleHQgPSBwb21vc1JlcXVpcmVkLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgcG9tb3NSZXF1aXJlZC51c2VyVHlwZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBwb21vc1JlcXVpcmVkLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBwbGFjZWhvbGRlclwiKTtcblxuICAgICAgICAgICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gZGVzY3JpcHRpb24ucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbi51c2VyVHlwZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgcGxhY2Vob2xkZXJcIik7XG5cbiAgICAgICAgICAgIHRhc2tNb2RhbC5lbGVtZW50cy52YWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm1vZGFsLWlucHV0XCIsIE1vZGFsSW5wdXQpOyIsIi8qKlxuICogQGNsYXNzIFByb2dyZXNzQ2lyY2xlQ29tcG9uZW50XG4gKi9cbmNsYXNzIFByb2dyZXNzQ2lyY2xlQ29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIC8vIHVzZSBhbiBvYmplY3QgdG8gc3RvcmUgYWxsIHJlbGV2YW50IGVsZW1lbnRzIHRvIHRoZSBjb21wb25lbnRzIGZvciBjb252ZW5pZW5jZVxuICAgICAgICB0aGlzLmVsZW1lbnRzID0ge307XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgc2hhZG93IHJvb3RcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTsgLy8gc2V0cyBhbmQgcmV0dXJucyAndGhpcy5zaGFkb3dSb290J1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBleGFtcGxlIGVsZW1lbnQgdGhhdCB3aWxsIHNlcnZlIGFzIG91ciBcInJvb3RcIiBlbGVtZW50IGhlcmVcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIC8vIHNldCBjbGFzcyBhcyBhbiBleGFtcGxlLCB0aGlzIGNhbiBiZSBsYXRlciB1c2VkIGZvciBjc3MhXG4gICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ3cmFwcGVyXCIpO1xuICAgICAgICAvLyBzdG9yZSBpdCBmb3IgZnV0dXJlIHJlZmVyZW5jZVxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIgPSB3cmFwcGVyO1xuXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSBcIjAlXCI7XG5cbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgaWQ9XCJwcm9ncmVzcy1jaXJjbGVcIiBjbGFzcz1cInByb2dyZXNzLWNpcmNsZVwiPlxuICAgICAgICAgICAgPHNwYW4gaWQ9XCJkaXNwbGF5VGV4dFwiPlxuICAgICAgICAgICAgICAgIDAlXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdC1oYWxmLWNsaXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlyc3Q1MC1iYXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidmFsdWUtYmFyXCIgaWQ9XCJwcm9ncmVzcy1iYXJcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxzcGFuIGlkPVwiZGlzcGxheVRleHRcIj4wJTwvc3Bhbj5cbiAgICAgICAgPHN2ZyBpZD1cImNpcmN1bGFyLWxvYWRlclwidmlld0JveD1cIjI1IDI1IDUwIDUwXCIgPlxuICAgICAgICAgICAgPGNpcmNsZSBpZD1cImxvYWRlci1wYXRoXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMjBcIiBmaWxsPVwibm9uZVwiIC8+XG4gICAgICAgICAgICA8Y2lyY2xlIGlkPVwibG9hZGVyLXBhdGgtYmdcIiBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCIyMFwiIGZpbGw9XCJub25lXCIgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gQWRkIFN0eWxlc1xuICAgICAgICBjb25zdCBsaW5rRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIpO1xuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gbGluayB0aGUgY29ycmVjdCBzdHlsZXNoZWV0IHdpdGggdGhlIGNvcnJlY3Qgc3R5bGluZ3NcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIi4vYXNzZXRzL3N0eWxlcy9wcm9ncmVzcy1jaXJjbGUuY3NzXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmxpbmtFbGVtID0gbGlua0VsZW07XG5cbiAgICAgICAgLy8gYXR0YWNoIHRoZSBjcmVhdGVkIGVsZW1lbnRzIHRvIHRoZSBzaGFkb3cgRE9NXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQobGlua0VsZW0sIHdyYXBwZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgc2l6ZSBvZiBwcm9ncmVzcyBjaXJjbGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9udFNpemUgLSBleGFtcGxlOiBgMXJlbWBcbiAgICAgKi9cbiAgICBzZXRTaXplKGZvbnRTaXplKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJ3cmFwcGVyXCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkaXNwbGF5IHRleHQgb2YgdGhlIHByb2dyZXNzIGNpcmNsZVxuICAgICAqIEBwYXJhbSB7Kn0gdGV4dCBcbiAgICAgKi9cbiAgICBzZXREaXNwbGF5VGV4dCh0ZXh0KSB7XG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0ZXh0O1xuICAgICAgICBsZXQgZWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXlUZXh0XCIpO1xuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwZXJjZW50YWdlIG9mIHRoZSBwcm9ncmVzcyBiYXIgXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBlcmNlbnQgLSBhIHBlcmNlbnQgdmFsdWUgcmFuZ2luZyBmcm9tIDAgdG8gMVxuICAgICAqL1xuICAgIHNldFBlcmNlbnRhZ2UocGVyY2VudCkge1xuICAgICAgICBsZXQgZWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImxvYWRlci1wYXRoXCIpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSAtICgxIC0gcGVyY2VudCkgKiAxMjcuNTtcbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInByb2dyZXNzLWNpcmNsZVwiLCBQcm9ncmVzc0NpcmNsZUNvbXBvbmVudCk7IiwiLyoqXG4gKiBAY2xhc3MgVGFza1xuICogXG4gKiBDb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCBhIGdpdmVuIFRhc2tcbiAqIFxuICovXG5cbmNsYXNzIFRhc2tDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICB0aGlzLmVsZW1lbnRzID0ge307XG4gICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuXG4gICAgICBjb25zdCBwb21vdGFzayA9IHRoaXM7XG4gICAgICBwb21vdGFzay5pc0N1cnJlbnRUYXNrID0gdHJ1ZTtcbiAgICAgIHBvbW90YXNrLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgLy8gaWYgd2UgcmVjZWl2ZWQgc3RvcCBzaWduYWwgZnJvbSBzdG9wIGJ1dHRvbiBvZiB0aGUgcG9tbyB0aW1lciwgaXQgd2lsbCB0cmlnZ2VyIGluY29tcGxldGVcbiAgICAgIGNvbnN0IHdyYXBwZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0YXNrXCIpO1xuICAgICAgd3JhcHBlckRpdi5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICAgIC8vIEEgZGl2IHdyYXBwZXIgZm9yIHRoZSB0aXRsZSBhbmQgZGVzY3JpcHRpb25cbiAgICAgIGNvbnN0IHdyYXBwZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHdyYXBwZXJUZXh0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGV4dHdyYXBwZXJcIik7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHdyYXBwZXJUZXh0KTtcblxuICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGl0bGVcIik7XG4gICAgICB0aXRsZS5pbm5lclRleHQgPSB0aGlzLnRleHRDb250ZW50IHx8IFwiXCI7XG4gICAgICB0aGlzLmVsZW1lbnRzLnRpdGxlID0gdGl0bGU7XG4gICAgICB3cmFwcGVyVGV4dC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkZXNjcmlwdGlvblwiKSB8fCBcIlwiO1xuICAgICAgdGhpcy5lbGVtZW50cy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgd3JhcHBlclRleHQuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG5cbiAgICAgIC8vIEEgZGl2IHdyYXBwZXIgZm9yIHRoZSBjb21wbGV0aW9uIGNpcmNsZVxuICAgICAgY29uc3Qgd3JhcHBlckNvbXBsZXRpb25DaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgd3JhcHBlckNvbXBsZXRpb25DaXJjbGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ3cmFwcGVyQ2lyY2xlXCIpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh3cmFwcGVyQ29tcGxldGlvbkNpcmNsZSk7XG4gICAgICAvLyBUaGUgR3JlZW4sIFJlZCBvciBZZWxsb3cgY2lyY2xlIHRoYXQgZGVzY3JpYmVzIHRoZSByYXRpbyBvZiBQb21vcyBleHBlY3RlZCB2cyBQb21vcyBVc2VkXG4gICAgICBjb25zdCBwb21vQ2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHBvbW9DaXJjbGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vQ2lyY2xlXCIpO1xuICAgICAgdGhpcy5wb21vc1VzZWQgPSBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInBvbW9zVXNlZFwiKSk7XG4gICAgICBwb21vQ2lyY2xlLnByZXEgPSB0aGlzLmdldEF0dHJpYnV0ZShcInBvbW9zUmVxdWlyZWRcIik7XG4gICAgICBwb21vQ2lyY2xlLmlubmVyVGV4dCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwicG9tb3NVc2VkXCIpICsgXCIvXCIgKyB0aGlzLmdldEF0dHJpYnV0ZShcInBvbW9zUmVxdWlyZWRcIik7XG4gICAgICB0aGlzLmVsZW1lbnRzLnBvbW9DaXJjbGUgPSBwb21vQ2lyY2xlO1xuXG4gICAgICB3cmFwcGVyQ29tcGxldGlvbkNpcmNsZS5hcHBlbmRDaGlsZChwb21vQ2lyY2xlKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQod3JhcHBlckNvbXBsZXRpb25DaXJjbGUpO1xuXG4gICAgICAvLyBBIGRpdiB3cmFwcGVyIGZvciB0aGUgY2hlY2sgbWFya1xuICAgICAgY29uc3Qgd3JhcHBlckNoZWNrTWFyayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB3cmFwcGVyQ2hlY2tNYXJrLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwid3JhcHBlckNoZWNrTWFya1wiKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQod3JhcHBlckNoZWNrTWFyayk7XG4gICAgICAvLyBUaGUgQ2hlY2sgbWFyayB0aGF0IGRlZmluZXMgaWYgYSB0YXNrIGlzIGNvbXBsZXRlIG9yIG5vdFxuICAgICAgY29uc3QgY2hlY2tNYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblxuICAgICAgaWYgKHRoaXMuY29tcGxldGVkID09IHRydWUpIHtcbiAgICAgICAgIGNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbXBsZXRlQ2hlY2tNYXJrXCIpO1xuICAgICAgICAgY2hlY2tNYXJrLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4vYXNzZXRzL3N2Z0ltYWdlcy9jaGVja19Db21wbGV0ZS5zdmdcIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgIGNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImluY29tcGxldGVDaGVja01hcmtcIik7XG4gICAgICAgICBjaGVja01hcmsuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvc3ZnSW1hZ2VzL2NoZWNrX0luY29tcGxldGUuc3ZnXCIpO1xuICAgICAgfVxuXG4gICAgICBjaGVja01hcmsub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIGNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbXBsZXRlQ2hlY2tNYXJrXCIpO1xuICAgICAgICAgY2hlY2tNYXJrLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4vYXNzZXRzL3N2Z0ltYWdlcy9jaGVja19Db21wbGV0ZS5zdmdcIik7XG4gICAgICAgICBwb21vdGFzay5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgcG9tb3Rhc2suaXNDdXJyZW50VGFzayA9IGZhbHNlO1xuXG4gICAgICAgICBjb2xvckRlY2lkZXIocG9tb0NpcmNsZSwgcG9tb3Rhc2spO1xuXG4gICAgICB9O1xuXG4gICAgICB3cmFwcGVyQ2hlY2tNYXJrLmFwcGVuZENoaWxkKGNoZWNrTWFyayk7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNoZWNrTWFyayA9IGNoZWNrTWFyaztcblxuICAgICAgLy8gQSBkaXYgd3JhcHBlciBmb3IgdGhlIGNoZWNrIG1hcmtcbiAgICAgIGNvbnN0IHdyYXBwZXJEcmFnQW5kRHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB3cmFwcGVyRHJhZ0FuZERyb3Auc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ3cmFwcGVyRHJhZ0FuZERyb3BcIik7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHdyYXBwZXJEcmFnQW5kRHJvcCk7XG4gICAgICAvLyBUaGUgRHJhZyBhbmQgRHJvcCBTVkdcbiAgICAgIGNvbnN0IGltZ0RyYWdBbmREcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgIGltZ0RyYWdBbmREcm9wLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZHJhZ0FuZERyb3BcIik7XG4gICAgICBpbWdEcmFnQW5kRHJvcC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9zdmdJbWFnZXMvZHJhZy1kb3RzLnN2Z1wiKTtcbiAgICAgIHdyYXBwZXJEcmFnQW5kRHJvcC5hcHBlbmRDaGlsZChpbWdEcmFnQW5kRHJvcCk7XG4gICAgICB0aGlzLmVsZW1lbnRzLmRyYWdBbmREcm9wID0gaW1nRHJhZ0FuZERyb3A7XG5cbiAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlciA9IHdyYXBwZXI7XG5cbiAgICAgIGNvbnN0IGxpbmtFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIpO1xuICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgdGhlIGNvcnJlY3Qgc3R5bGVzaGVldCB3aXRoIHRoZSBjb3JyZWN0IHN0eWxpbmdzXG4gICAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiLi9hc3NldHMvc3R5bGVzL3Rhc2suY3NzXCIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKHdyYXBwZXJEaXYsIGxpbmtFbGVtKTtcbiAgIH1cbiAgIHNldCBwb21vc3VzZWQodmFsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkhFTExPXCIpO1xuICAgfVxuICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgY29uc29sZS5sb2cobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgIGlmIChuYW1lID09PSBcInBvbW9zdXNlZFwiKSB7XG4gICAgICAgICBjb25zb2xlLmxvZyhuZXdWYWx1ZSk7XG4gICAgICAgICB0aGlzLmVsZW1lbnRzLnBvbW9DaXJjbGUuaW5uZXJUZXh0ID0gbmV3VmFsdWUgKyBcIi9cIiArIHRoaXMuZ2V0QXR0cmlidXRlKFwicG9tb3NSZXF1aXJlZFwiKTtcbiAgICAgIH1cbiAgIH1cblxuICAgc2V0RmluaXNoVGFza0NhbGxiYWNrKGNiKSB7XG4gICAgICBjb25zdCBjaGVja01hcmsgPSB0aGlzLmVsZW1lbnRzLmNoZWNrTWFyaztcbiAgICAgIGNvbnN0IHBvbW90YXNrID0gdGhpcztcbiAgICAgIGNoZWNrTWFyay5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgY2hlY2tNYXJrLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29tcGxldGVDaGVja01hcmtcIik7XG4gICAgICAgICBjaGVja01hcmsuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvc3ZnSW1hZ2VzL2NoZWNrX0NvbXBsZXRlLnN2Z1wiKTtcbiAgICAgICAgIHBvbW90YXNrLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICBwb21vdGFzay5pc0N1cnJlbnRUYXNrID0gZmFsc2U7XG5cbiAgICAgICAgIGNvbG9yRGVjaWRlcihwb21vdGFzay5lbGVtZW50cy5wb21vQ2lyY2xlLCBwb21vdGFzayk7XG4gICAgICAgICBjYigpO1xuICAgICAgfTtcbiAgIH1cblxuICAgaW5jcmVtZW50UG9tb3NVc2VkKCkge1xuICAgICAgdGhpcy5wb21vc1VzZWQgKz0gMTtcbiAgICAgIHRoaXMuZWxlbWVudHMucG9tb0NpcmNsZS5pbm5lclRleHQgPSB0aGlzLnBvbW9zVXNlZCArIFwiL1wiICsgdGhpcy5nZXRBdHRyaWJ1dGUoXCJwb21vc1JlcXVpcmVkXCIpO1xuICAgICAgXG4gICB9XG4gICBoaWRlKCkge1xuICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgfVxuXG59XG5cbmZ1bmN0aW9uIGNvbG9yRGVjaWRlcihwb21vQ2lyY2xlLCBwb21vdGFzaykge1xuICAgLy9jb25zb2xlLmxvZyhwb21vQ2lyY2xlLnByZXEpO1xuICAgaWYgKHBvbW90YXNrLmlzQ3VycmVudFRhc2sgPT09IHRydWUpIHtcbiAgICAgIHBvbW9DaXJjbGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjdXJyZW50VGFza1wiKTtcbiAgIH1cbiAgIGVsc2UgaWYgKHBvbW90YXNrLmNvbXBsZXRlZCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHBvbW90YXNrLnBvbW9zVXNlZCA8PSBwb21vQ2lyY2xlLnByZXEpIHtcbiAgICAgICAgIHBvbW9DaXJjbGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJnb29kVGltaW5nVGFza1wiKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAgcG9tb0NpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImJhZFRpbWluZ1Rhc2tcIik7XG4gICAgICB9XG4gICB9XG4gICBlbHNlIGlmICghcG9tb3Rhc2suY29tcGxldGVkKSB7XG4gICAgICBwb21vQ2lyY2xlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaW5jb21wbGV0ZVRhc2tcIik7XG4gICB9XG5cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwicG9tby10YXNrXCIsIFRhc2tDb21wb25lbnQpOyIsImltcG9ydCB7IFBPTU9fVEFTS19JTkRFWCwgUE9NT19UQVNLX01BUCB9IGZyb20gXCIuL3Rhc2tcIjtcbmltcG9ydCB7IFBPTU9fU0VTU0lPTl9JRCwgTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMsIFBPTU9fU0VTU0lPTl9NQVAgfSBmcm9tIFwiLi9zZXNzaW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRGF0YWJhc2UoKSB7XG4gICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBpbml0aWFsaXplXG4gICAgbGV0IG5lZWRUb0luaXRpYWxpemUgPSBmYWxzZTtcbiAgICBpZiAoZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZ2V0T2JqZWN0KFBPTU9fVEFTS19JTkRFWCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghbG9jYWxTdG9yYWdlLmdldEl0ZW0oUE9NT19TRVNTSU9OX0lEKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUykgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gdGhlbiBpbml0aWFsaXplXG4gICAgaWYgKG5lZWRUb0luaXRpYWxpemUpIHtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwge30pO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfSU5ERVgsIDApO1xuICAgICAgICBzdG9yZU9iamVjdChMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgXCJjb21wbGV0ZVwiKTtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19TRVNTSU9OX0lELCAwKTtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19TRVNTSU9OX01BUCwge30pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNldERhdGFiYXNlKCkge1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19UQVNLX01BUF07XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1RBU0tfSU5ERVhdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVNdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19TRVNTSU9OX0lEXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fU0VTU0lPTl9NQVBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVPYmplY3Qoa2V5LCBvYmplY3QpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE9iamVjdChrZXkpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbn0iLCIvKipcbiAqIFRoaXMgZmlsZSBpcyByZWxhdGVkIHRvIGZpbmRpbmcgcG9tbyBzZXNzaW9uc1xuICovXG5pbXBvcnQgeyBnZXRPYmplY3QsIHN0b3JlT2JqZWN0IH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IGRlbGV0ZVRhc2tCeVRhc2tJRCwgc3RvcmVUYXNrLCBUYXNrIH0gZnJvbSBcIi4vdGFza1wiO1xuXG5cbmV4cG9ydCBjb25zdCBQT01PX1NFU1NJT05fSUQgPSBcInBvbW9fc2Vzc2lvbl9pZFwiO1xuZXhwb3J0IGNvbnN0IExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTID0gXCJsYXRlc3RfcG9tb19zZXNzaW9uX3N0YXR1c1wiO1xuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9NQVAgPSBcInBvbW9fc2Vzc2lvbl9tYXBcIjtcblxuLyoqIHRoZSBkaWZmZXJlbnQgcG9tbyBzZXNzaW9uIG1vZGVzIGFzIGNvbnN0YW50cyAqL1xuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9NT0RFUyA9IHtcbiAgLyoqIHdoZW4gdGhlIHVzZXIgaXMgaW4gdGhlIGludGVyZmFjZSBvZiBjcmVhdGluZyBhIG5ldyB0aW1lciBhbmQgaGFzIG5vdCBzdGFydGVkIHRoZWlyIG5ldyBzZXNzaW9uIHlldCAqL1xuICBJTkFDVElWRTogXCJpbmFjdGl2ZVwiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBicmVhayB0aW1lciAqL1xuICBCUkVBSzogXCJicmVha1wiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBsb25nZXIgYnJlYWsgdGltZXIgKi9cbiAgTE9OR19CUkVBSzogXCJsb25nYnJlYWtcIixcbiAgLyoqIHdoZW4gcnVubmluZyB0aGUgYWN0aXZlIHBvbW8gd29yayB0aW1lICovXG4gIEFDVElWRTogXCJhY3RpdmVcIixcbiAgLyoqIHdoZW4gdGhlIHVzZXIgbWFya3MgdGhpcyBwb21vIHNlc3Npb24gYXMgY29tcGxldGUsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0YXNrcyBhcmUgY29tcGxldGVkIG9yIG5vdCAqL1xuICBDT01QTEVURTogXCJjb21wbGV0ZVwiLFxufTtcblxuZXhwb3J0IGNsYXNzIFBvbW9TZXNzaW9uIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBQb21vIFNlc3Npb24gb2JqZWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIGlkIG9mIHRoaXMgc2Vzc2lvblxuICAgKi9cbiAgY29uc3RydWN0b3IoaWQpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgLyoqIEB0eXBlIHtUYXNrW119IC0gYSBsaXN0IG9mIGFsbCB0YXNrcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBzZXNzaW9uICovXG4gICAgdGhpcy5hbGxUYXNrcyA9IFtdO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAtIHRoZSBjdXJyZW50IG1vZGUgb2YgdGhlIHBvbW8gc2Vzc2lvbiAqL1xuICAgIHRoaXMubW9kZSA9IFBPTU9fU0VTU0lPTl9NT0RFUy5JTkFDVElWRTtcbiAgICAvKiogQHR5cGUge051bWJlcn0gLSB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSBwb21vIHNlc3Npb24gKi9cbiAgICB0aGlzLnRpbWUgPSAwO1xuXG4gICAgLyoqIEB0eXBlIHtOdW1iZXJ9IC0gbnVtYmVyIG9mIHBvbW9zIGVsYXBzZWQgc3VjY2VzZnVsbHkgZm9yIHRoaXMgcG9tbyBzZXNzaW9uICovXG4gICAgdGhpcy5wb21vc0VsYXBzZWQgPSAwO1xuXG4gICAgdGhpcy5zdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBcbiAgICogQHJldHVybnMge1Rhc2sgfCBudWxsIH0gLSB0aGUgY3VycmVudCB0YXNrIGZvciB0aGlzIHBvbW8gc2Vzc2lvbiBvciBudWxsIGlmIHRoZXJlIGFyZSBubyB0YXNrcyBsZWZ0XG4gICAqL1xuICBjdXJyZW50VGFzaygpIHtcbiAgICBsZXQgYWxsSW5Qcm9ncmVzc1Rhc2tzID0gdGhpcy5hbGxUYXNrcy5maWx0ZXIoKHRhc2spID0+ICF0YXNrLmNvbXBsZXRlZCk7XG4gICAgaWYgKGFsbEluUHJvZ3Jlc3NUYXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhbGxJblByb2dyZXNzVGFza3NbMF07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgbmV3IHRhc2tcbiAgICogQHBhcmFtIHtUYXNrfSB0YXNrIFxuICAgKi9cbiAgYWRkVGFzayh0YXNrKSB7XG4gICAgc3RvcmVUYXNrKHRhc2spO1xuICAgIHRoaXMuYWxsVGFza3MucHVzaCh0YXNrKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgdGFza1xuICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAqL1xuICBkZWxldGVUYXNrKHRhc2spIHtcbiAgICBkZWxldGVUYXNrQnlUYXNrSUQodGFzay5pZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbFRhc2tzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGNvbnN0IHN0b3JlZFRhc2sgPSB0aGlzLmFsbFRhc2tzW2ldO1xuICAgICAgaWYgKHRhc2suaWQgPT09IHN0b3JlZFRhc2suaWQpIHtcbiAgICAgICAgdGhpcy5hbGxUYXNrcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGxldGVzIHRoZSBnaXZlbiB0YXNrIGFzc29jaWF0ZWQgdG8gdGhlIGlkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgY29tcGxldGVkLCBmYWxzZSBpZiBubyB0YXNrIGZvdW5kXG4gICAqL1xuICBjb21wbGV0ZVRhc2soaWQpIHtcbiAgICBmb3IgKGxldCB0YXNrIG9mIHRoaXMuYWxsVGFza3MpIHtcbiAgICAgIGlmICh0YXNrLmlkID09PSBpZCkge1xuICAgICAgICB0YXNrLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5leHQgaW5jb21wbGV0ZSB0YXNrIGluIHRoZSBvcmRlciBvciBudWxsIGlmIGFsbCBjb21wbGV0ZWRcbiAgICogQHJldHVybnMge1Rhc2sgfCBudWxsfVxuICAgKi9cbiAgZ2V0TmV4dFRhc2soKSB7XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRoaXMuYWxsVGFza3MpIHtcbiAgICAgIGlmICh0YXNrLmNvbXBsZXRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBJbmNyZW1lbnQgdGhlIHBvbW9zIHVzZWQgZm9yIGEgdGFzayBhbmQgaW5jcmVtZW50IHBvbW9zRWxhcHNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gICAqL1xuICBpbmNyZW1lbnRUYXNrUG9tb3NVc2VkKGlkKSB7XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRoaXMuYWxsVGFza3MpIHtcbiAgICAgIGlmICh0YXNrLmlkID09PSBpZCkge1xuICAgICAgICB0YXNrLnBvbW9zVXNlZCArPSAxO1xuICAgICAgICB0aGlzLnBvbW9zRWxhcHNlZCArPSAxO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHNlc3Npb24gaXMgaW4gYnJlYWsgbW9kZSByaWdodCBub3csIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaXNCcmVhaygpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuTE9OR19CUkVBSyB8fCB0aGlzLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5CUkVBSztcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPXG4gICAqL1xuICByZW9yZGVyVGFza3MoKSB7XG5cbiAgfVxuXG4gIGdldFBvbW9zTGVmdEluU2Vzc2lvbigpIHtcbiAgICBsZXQgbGVmdCA9IDA7XG4gICAgdGhpcy5hbGxUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBsZWZ0ICs9IE1hdGgubWF4KHRhc2sucG9tb3NSZXF1aXJlZCAtIHRhc2sucG9tb3NVc2VkLCAwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbGVmdDtcbiAgfVxuICBwYXJzZVNlc3Npb25Gcm9tT2JqKHNlc3Npb25fb2JqKSB7XG4gICAgdGhpcy5pZCA9IHNlc3Npb25fb2JqLmlkO1xuICAgIHRoaXMubW9kZSA9IHNlc3Npb25fb2JqLm1vZGU7XG4gICAgdGhpcy50aW1lID0gc2Vzc2lvbl9vYmoudGltZTtcbiAgICB0aGlzLnBvbW9zRWxhcHNlZCA9IHNlc3Npb25fb2JqLnBvbW9zRWxhcHNlZDtcbiAgICB0aGlzLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHNlc3Npb25fb2JqLnN0YXJ0RGF0ZSk7XG4gICAgdGhpcy5hbGxUYXNrcyA9IHNlc3Npb25fb2JqLmFsbFRhc2tzLm1hcCgodGFza09iaikgPT4ge1xuICAgICAgbGV0IHQgPSBuZXcgVGFzaygpO1xuICAgICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrT2JqKTtcbiAgICAgIHJldHVybiB0O1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNlcmlhbGl6ZUludG9PYmooKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLCBhbGxUYXNrczogdGhpcy5hbGxUYXNrcy5tYXAoKHRhc2spID0+IHRhc2suc2VyaWFsaXplSW50b09iaigpKSwgbW9kZTogdGhpcy5tb2RlLCB0aW1lOiB0aGlzLnRpbWUsIHBvbW9zRWxhcHNlZDogdGhpcy5wb21vc0VsYXBzZWQsIHN0YXJ0RGF0ZTogdGhpcy5zdGFydERhdGUuZ2V0VGltZSgpXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHBvbW8gc2Vzc2lvbiBvYmplY3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAqIEByZXR1cm5zIHtQb21vU2Vzc2lvbiB8IG51bGx9IHRoZSBzZXNzaW9uIGZvciB0aGlzIGlkIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gc2Vzc2lvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9tb1Nlc3Npb24oaWQpIHtcbiAgY29uc3QgYWxsU2Vzc2lvbnMgPSBnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCk7XG4gIGxldCBwID0gbmV3IFBvbW9TZXNzaW9uKCk7XG4gIGlmICghYWxsU2Vzc2lvbnNbaWRdKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHAucGFyc2VTZXNzaW9uRnJvbU9iaihhbGxTZXNzaW9uc1tpZF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVQb21vU2Vzc2lvbihzZXNzaW9uKSB7XG4gIGNvbnN0IGFsbFNlc3Npb25zID0gZ2V0T2JqZWN0KFBPTU9fU0VTU0lPTl9NQVApO1xuICBhbGxTZXNzaW9uc1tzZXNzaW9uLmlkXSA9IHNlc3Npb24uc2VyaWFsaXplSW50b09iaigpO1xuICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fTUFQLCBhbGxTZXNzaW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXdTZXNzaW9uSUQoKSB7XG4gIGxldCBwcmV2SUQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQT01PX1NFU1NJT05fSUQpKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oUE9NT19TRVNTSU9OX0lELCBwcmV2SUQgKyAxKTtcbiAgcmV0dXJuIHByZXZJRDtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIGN1cnJlbnQgc2Vzc2lvbidzIHN0YXR1c1xuICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyAtIGNhbiBiZSBcImNvbXBsZXRlXCIgb3IgXCJpbi1wcm9ncmVzc1wiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U2Vzc2lvblN0YXR1cyhzdGF0dXMpIHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMsIHN0YXR1cyk7XG59XG5cbi8qKlxuICogV2lsbCByZXR1cm4gdGhlIHNlc3Npb24gSUQgb2YgdGhlIGxhc3Qgc2Vzc2lvbiBpZiBpdCB3YXMgbm90IGVuZGVkLiBPdGhlcndpc2UgaWYgdGhlIGxhc3Qgc2Vzc2lvbiBkb2VzIG5vdCBleGlzdCBcbiAqIG9yIHdhcyBlbmRlZCBhbHJlYWR5LCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgbnVsbFxuICogXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgbnVsbH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhdGVzdFNlc3Npb25JRCgpIHtcbiAgbGV0IHN0YXR1cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTKTtcbiAgaWYgKHN0YXR1cyA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCkpIC0gMTtcbiAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHtib29sZWFufSAtIHRydWUgaWYgdGhlcmUgaXMgYSB1bmZpbmlzaGVkIHNlc3Npb24gdGhhdCB3YXMgbm90IGNvbXBsZXRlZCBvciBxdWl0dGVkLiBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRoZXJlSXNVbmZpbmlzaGVkU2Vzc2lvbigpIHtcbiAgbGV0IHNlc3Npb25JRCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICBpZiAoc2Vzc2lvbklEID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIGxldCBjdXJyZW50UG9tb1Nlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihzZXNzaW9uSUQpO1xuICBpZiAoY3VycmVudFBvbW9TZXNzaW9uICE9PSBudWxsICYmIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlICE9PSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEUgJiYgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgIT09IFBPTU9fU0VTU0lPTl9NT0RFUy5JTkFDVElWRSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRpbnVlQWN0aXZlU2Vzc2lvbigpIHtcbiAgaWYgKHRoZXJlSXNVbmZpbmlzaGVkU2Vzc2lvbigpKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gXCIvdGltZXIuaHRtbD9sb2FkU2F2ZWQ9dHJ1ZVwiO1xuICB9XG59IiwiaW1wb3J0IHsgZ2V0T2JqZWN0LCBzdG9yZU9iamVjdCB9IGZyb20gXCIuXCI7XG5pbXBvcnQgeyBnZXRMYXRlc3RTZXNzaW9uSUQsIGdldFBvbW9TZXNzaW9uIH0gZnJvbSBcIi4vc2Vzc2lvblwiO1xuXG5leHBvcnQgY2xhc3MgVGFzayB7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JRCBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGUgXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlc2NyaXB0aW9uIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb21vc1JlcXVpcmVkIFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb25JRCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwb21vc1JlcXVpcmVkKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklEID0gc2Vzc2lvbklEO1xuICAgICAgICB0aGlzLmlkID0gLTE7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnBvbW9zUmVxdWlyZWQgPSBwb21vc1JlcXVpcmVkO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBvbW9zVXNlZCA9IDA7XG4gICAgfVxuICAgIHBhcnNlVGFza0Zyb21PYmoodGFza19vYmopIHtcbiAgICAgICAgbGV0IHRhc2sgPSBuZXcgVGFzayh0YXNrX29iai5zZXNzaW9uSUQsIHRhc2tfb2JqLnRpdGxlLCB0YXNrX29iai5kZXNjcmlwdGlvbiwgdGFza19vYmoucG9tb3NSZXF1aXJlZCk7XG4gICAgICAgIHRhc2suY29tcGxldGVkID0gdGFza19vYmouY29tcGxldGVkO1xuICAgICAgICB0YXNrLmlkID0gdGFza19vYmouaWQ7XG4gICAgICAgIHRhc2sucG9tb3NVc2VkID0gdGFza19vYmoucG9tb3NVc2VkO1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICB9XG4gICAgc2VyaWFsaXplSW50b09iaigpIHtcbiAgICAgICAgcmV0dXJuIHsgdGl0bGU6IHRoaXMudGl0bGUsIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLCBwb21vc1JlcXVpcmVkOiB0aGlzLnBvbW9zUmVxdWlyZWQsIGNvbXBsZXRlZDogdGhpcy5jb21wbGV0ZWQsIHBvbW9zVXNlZDogdGhpcy5wb21vc1VzZWQsIGlkOiB0aGlzLmlkLCBzZXNzaW9uSUQ6IHRoaXMuc2Vzc2lvbklEIH07XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgUE9NT19UQVNLX01BUCA9IFwicG9tb190YXNrX21hcFwiO1xuZXhwb3J0IGNvbnN0IFBPTU9fVEFTS19JTkRFWCA9IFwicG9tb190YXNrX2luZGV4XCI7XG5cbi8qKlxuICogV2lsbCBzdG9yZSBhIG5ldyBvciB1cGRhdGVkIHRhc2sgaW50byBsb2NhbCBzdG9yYWdlXG4gKiBcbiAqIEhhcyBhIHNpZGUgZWZmZWN0IG9mIGFkZGluZyB0aGUgaWQgb2YgdGhlIG5ldyB0YXNrIGlmIGl0IHdhc250IHN0b3JlZCBpbiBzdG9yYWdlIGJlZm9yZVxuICogXG4gKiBAcGFyYW0ge1Rhc2t9IHRhc2tcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gdGhlIGlkIG9mIHRoZSB0YXNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVRhc2sodGFzaykge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBpZiAoIXRhc2tfbWFwW3Rhc2suaWRdKSB7XG4gICAgICAgIC8vIGlmIHRhc2sgbWFwIGRvZXMgbm90IGhhdmUgdGhpcyB0YXNrLCBjcmVhdGUgYSBuZXcgaW5kZXhcbiAgICAgICAgbGV0IGlkID0gcGFyc2VJbnQoZ2V0T2JqZWN0KFBPTU9fVEFTS19JTkRFWCkpO1xuICAgICAgICB0YXNrLmlkID0gaWQ7XG4gICAgICAgIC8vIGluY3JlbWVudCBnbG9iYWwgaWRcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX0lOREVYLCBpZCArIDEpO1xuICAgIH1cbiAgICBsZXQgb2JqID0gdGFzay5zZXJpYWxpemVJbnRvT2JqKCk7XG4gICAgdGFza19tYXBbdGFzay5pZF0gPSBvYmo7XG4gICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwgdGFza19tYXApO1xuICAgIHJldHVybiB0YXNrLmlkO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdGFzayBhc3NvY2lhdGVkIHdpdGggdGhpcyBpZFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICogQHJldHVybnMge1Rhc2t9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXNrKGlkKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGxldCB0YXNrX29iaiA9IHRhc2tfbWFwW2lkXTtcbiAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaik7XG4gICAgcmV0dXJuIHQ7XG5cbn1cbi8qKlxuICogR2V0IGFsbCB0YXNrc1xuICogXG4gKiBAcmV0dXJucyB7TWFwPG51bWJlciwgVGFzaz59IC0gYSBtYXAgZnJvbSB0YXNrIGlkIHRvIHRhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFRhc2tzKCkge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBsZXQgcGFyc2VkX3Rhc2tfbWFwID0ge307XG4gICAgZm9yIChsZXQgaWQgaW4gdGFza19tYXApIHtcbiAgICAgICAgbGV0IHRhc2tfb2JqID0gdGFza19tYXBbaWRdO1xuICAgICAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgICAgIHQgPSB0LnBhcnNlVGFza0Zyb21PYmoodGFza19vYmopO1xuICAgICAgICBwYXJzZWRfdGFza19tYXBbaWRdID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZF90YXNrX21hcDtcbn1cblxuLyoqXG4gKiBEZWxldGUgYSBzcGVjaWZpYyB0YXNrIGZyb20gZGF0YWJhc2UgYnkgdGhlIHVuaXF1ZSB0YXNrIElEXG4gKiBcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRhc2tCeVRhc2tJRChpZCkge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBkZWxldGUgdGFza19tYXBbaWRdO1xuICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19NQVAsIHRhc2tfbWFwKTtcbn1cblxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGVyZSBhcmUgYW55IHVuZmluaXNoZWQgdGFza3MgZnJvbSB0aGUgcHJldmlvdXMgc2Vzc2lvblxuICogQHJldHVybnMge2Jvb2xlYW59IC0gdHJ1ZSBpZiB1bmlmaW5pc2hlZCB0YXNrcyBleGlzdCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVUaGVyZVVuZmluaXNoZWRUYXNrc0Zyb21MYXN0U2Vzc2lvbigpIHtcbiAgICBsZXQgb2xkU2Vzc2lvbklEID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gICAgaWYgKG9sZFNlc3Npb25JRCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24ob2xkU2Vzc2lvbklEKTtcbiAgICBpZiAoc2Vzc2lvbiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChzZXNzaW9uLmN1cnJlbnRUYXNrKCkgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8qKlxuICogV2lsbCByYW5kb21seSBwaWNrIGEgdGhlbWUgYW5kIHVuaXF1ZSBiYWNrZ3JvdW5kIGRlcGVuZGluZyBvbiB3aGF0IGRheSBpdCBpcyBhbmQgd2hhdCB0aW1lIGl0IGlzIGFuZCBzZXQgaXQgb24gdGhlIHBhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFuZFNldFRoZW1lKHRvZGF5ID0gbmV3IERhdGUoKSkge1xuICBsZXQgaWQgPSAwO1xuICBsZXQgbnVtQkdzID0gNjtcblxuICBsZXQgZCA9IHRvZGF5LmdldERheSgpO1xuXG4gIGxldCBzZWVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJiZy1zZWVkXCIpO1xuXG4gIGlmIChzZWVkID09PSBudWxsIHx8IHNlZWRbMF0gIT0gZCkge1xuICAgIHNlZWQgPSBkICsgXCItXCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW1CR3MpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYmctc2VlZFwiLCBzZWVkKTtcbiAgfVxuICBsZXQgdGltZVBlcmlvZCA9IGdldFRoZW1lTW9kZSh0b2RheSk7XG4gIGlkID0gcGFyc2VJbnQoc2VlZFsyXSk7XG5cbiAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tkcm9wXCIpO1xuICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIuLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmRzLyR7dGltZVBlcmlvZH0vYmcke2lkfS5qcGdcIilgO1xufTtcblxuZXhwb3J0IGNvbnN0IFRIRU1FX01PREVTID0ge1xuICBEQVk6IFwiZGF5XCIsXG4gIE5JR0hUOiBcIm5pZ2h0XCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhlbWVNb2RlKHRvZGF5ID0gbmV3IERhdGUoKSkge1xuICBsZXQgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLkRBWTtcbiAgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCA0KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLk5JR0hUO1xuICB9XG4gIGVsc2UgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCAxOCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5EQVk7XG4gIH0gZWxzZSBpZiAodG9kYXkuZ2V0SG91cnMoKSA8IDI0KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLk5JR0hUO1xuICB9XG4gIHJldHVybiB0aW1lUGVyaW9kO1xufSIsIi8vIHByb2R1Y3QtaXRlbS5qc1xuXG5pbXBvcnQgeyBnZXRUaGVtZU1vZGUsIFRIRU1FX01PREVTIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3RoZW1lXCI7XG5cbi8qKlxuICogQGNsYXNzIEJ1dHRvblxuICogXG4gKiBBIGJ1dHRvbiBjb21wb25lbnQgd2l0aCAzIHR5cGVzLCBub3JtYWwsIG91dGxpbmUsIGFuZCBuYXYgc3BlY2lmaWVkIHdpdGggdGhlIHR5cGUgYXR0cmlidXRlXG4gKiBcbiAqIEl0IGFsc28gaGFzIHR3byBzaXplcywgXCJzbWFsbFwiIGFuZCBcIm5vcm1hbFwiIHNwZWNpZmllZCBieSB0aGUgc2l6ZSBhdHRyaWJ1dGVcbiAqL1xuY2xhc3MgQnV0dG9uIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyB1c2UgYW4gb2JqZWN0IHRvIHN0b3JlIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGUgY29tcG9uZW50cyBmb3IgY29udmVuaWVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IHt9O1xuXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgc2hhZG93IHJvb3RcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTsgLy8gc2V0cyBhbmQgcmV0dXJucyAndGhpcy5zaGFkb3dSb290J1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBleGFtcGxlIGVsZW1lbnQgdGhhdCB3aWxsIHNlcnZlIGFzIG91ciBcInJvb3RcIiBlbGVtZW50IGhlcmVcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgLy8gc2V0IGNsYXNzIGFzIGFuIGV4YW1wbGUsIHRoaXMgY2FuIGJlIGxhdGVyIHVzZWQgZm9yIGNzcyFcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1idXR0b25cIik7XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSB0aGlzLnRleHRDb250ZW50IHx8IFwiXCI7XG5cbiAgICAgICAgLy8gc3RvcmUgaXQgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b24gPSBidXR0b247XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJwYXJ0XCIsIFwiYnV0dG9uXCIpO1xuICAgICAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIC8vIEFkZCBTdHlsZXNcbiAgICAgICAgY29uc3QgbGlua0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgdGhlIGNvcnJlY3Qgc3R5bGVzaGVldCB3aXRoIHRoZSBjb3JyZWN0IHN0eWxpbmdzXG4gICAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIuL2Fzc2V0cy9zdHlsZXMvYnV0dG9uLmNzc1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgY3JlYXRlZCBlbGVtZW50cyB0byB0aGUgc2hhZG93IERPTVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKGxpbmtFbGVtLCBidXR0b24pO1xuXG4gICAgICAgIHRoaXMudHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcIm91dGxpbmVcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5lbGVtZW50cy5idXR0b24uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgKyBcIiBvdXRsaW5lXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSBcIm5hdlwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSArIFwiIG5hdlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwic2l6ZVwiKTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gXCJzbWFsbFwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSArIFwiIHNtYWxsXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2l6ZSA9PT0gXCJ0aW55XCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuZWxlbWVudHMuYnV0dG9uLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpICsgXCIgdGlueVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0aGVtZU1vZGUgPSBnZXRUaGVtZU1vZGUoKTtcbiAgICAgICAgaWYgKHRoZW1lTW9kZSA9PT0gVEhFTUVfTU9ERVMuTklHSFQgJiYgdGhpcy5nZXRBdHRyaWJ1dGUoXCJub2RhcmtcIikgIT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSArIFwiIGRhcmtcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInBvbW8tYnV0dG9uXCIsIEJ1dHRvbik7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyB1c2UgYW4gb2JqZWN0IHRvIHN0b3JlIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGUgY29tcG9uZW50cyBmb3IgY29udmVuaWVuY2VcbiAgICB0aGlzLmVsZW1lbnRzID0ge307XG4gICAgLy8gQ3JlYXRlIGEgc2hhZG93IHJvb3RcbiAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pOyAvLyBzZXRzIGFuZCByZXR1cm5zICd0aGlzLnNoYWRvd1Jvb3QnXG5cbiAgICAvLyBDcmVhdGUgYW4gZXhhbXBsZSBlbGVtZW50IHRoYXQgd2lsbCBzZXJ2ZSBhcyBvdXIgXCJyb290XCIgZWxlbWVudCBoZXJlXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5lbGVtZW50cy53cmFwcGVyID0gd3JhcHBlcjtcbiAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtb2RhbC13cmFwcGVyXCIpO1xuICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5pbm5lckhUTUwgPSBcIjxkaXYgY2xhc3M9XFxcInNoYWRvd1xcXCI+PC9kaXY+PGRpdiBjbGFzcz1cXFwibW9kYWxcXFwiPjwvZGl2PlwiO1xuXG4gICAgLy8gQWRkIFN0eWxlc1xuICAgIGNvbnN0IGxpbmtFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAvLyBtYWtlIHN1cmUgdG8gbGluayB0aGUgY29ycmVjdCBzdHlsZXNoZWV0IHdpdGggdGhlIGNvcnJlY3Qgc3R5bGluZ3NcbiAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiLi9hc3NldHMvc3R5bGVzL21vZGFsLmNzc1wiKTtcbiAgICB0aGlzLmVsZW1lbnRzLmxpbmtFbGVtID0gbGlua0VsZW07XG4gICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChsaW5rRWxlbSk7XG4gIH1cblxuICBkaXNwbGF5TW9kYWwoKSB7XG4gICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgfSwgMjApO1xuICB9XG4gIGhpZGVNb2RhbCgpIHtcbiAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH0sIDQwMCk7XG4gICAgXG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIik7XG5cbiAgICBsZXQgY2hpbGQxID0gdGhpcy5jaGlsZE5vZGVzO1xuICAgIGxldCBodG1sU3RyaW5nID0gXCJcIjtcbiAgICBjaGlsZDEuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmKGVsZW1lbnQubm9kZVR5cGUgIT0gTm9kZS5URVhUX05PREUpXG4gICAgICAgIGh0bWxTdHJpbmcgKz0gZWxlbWVudC5vdXRlckhUTUw7XG4gICAgfSk7XG4gICAgXG4gICAgLy9jb3B5IGh0bWwgZWxlbWVudHMgdG8gc2hhZG93IGRvbVxuICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInNoYWRvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbFwiPiR7aHRtbFN0cmluZ308L2Rpdj5gO1xuICAgIFxuICAgIC8vcmVtb3ZlIGV4dHJhIGh0bWwgZWxlbWVudHMgbGVmdFxuICAgIGxldCBuID0gY2hpbGQxLmxlbmd0aDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKVxuICAgICAgdGhpcy5yZW1vdmVDaGlsZChjaGlsZDFbMF0pO1xuICAgIFxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLndyYXBwZXIpO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInBvbW8tbW9kYWxcIiwgTW9kYWxDb21wb25lbnQpOyIsImltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24sIFBPTU9fU0VTU0lPTl9NT0RFUywgc3RvcmVQb21vU2Vzc2lvbiB9IGZyb20gXCIuLi8uLi9kYXRhYmFzZS9zZXNzaW9uXCI7XG5cbi8qKlxuICogSGVhZGVyIGNsYXNzIHRvIGNyZWF0ZSBhIHdlYiBjb21wb25lbnQgaW1wbGVtZW50aW5nIHRoZSBmdW5jdGlvbmFsaXR5IG9mIG91ciBoZWFkZXIgYmFyLlxuICogXG4gKiBAYXV0aG9ycyBFdGhhbiBIdXluaCwgS2V2aW4gS2xpbWVrXG4gKiBAdG9kbyBSZWZhY3RvciBidXR0b25zIHRvIG9uQ2xpY2sgZXZlbnRzIGluc3RlYWQgb2Ygc2ltcGx5IGFwcGVuZGluZyB0byBhIGxpbmsgZWxlbWVudCxcbiAqICAgICAgIEltcGxlbWVudCBoZWxwIGJ1dHRvbiB3aGVuIE1vZGFsIGNvbXBvbmVudCBpcyBtZXJnZWRcbiAqL1xuY29uc3QgSEVMUF9URVhUID0gXCJUaGUgUG9tb2Rvcm8gVGVjaG5pcXVlIGlzIGEgdGltZSBtYW5hZ2VtZW50IG1ldGhvZCBkZXZlbG9wZWQgYnkgRnJhbmNlc2NvIENpcmlsbG8gaW4gdGhlIGxhdGUgMTk4MHMuIFRoZSB0ZWNobmlxdWUgdXNlcyBhIHRpbWVyIHRvIGJyZWFrIGRvd24gd29yayBpbnRvIGludGVydmFscywgdHJhZGl0aW9uYWxseSAyNSBtaW51dGVzIGluIGxlbmd0aCwgc2VwYXJhdGVkIGJ5IHNob3J0IGJyZWFrcy4gRWFjaCBpbnRlcnZhbCBpcyBrbm93biBhcyBhIHBvbW9kb3JvLCBmcm9tIHRoZSBJdGFsaWFuIHdvcmQgZm9yICd0b21hdG8nLCBhZnRlciB0aGUgdG9tYXRvLXNoYXBlZCBraXRjaGVuIHRpbWVyIHRoYXQgQ2lyaWxsbyB1c2VkIGFzIGEgdW5pdmVyc2l0eSBzdHVkZW50LlwiOyBcbmNsYXNzIEhlYWRlciBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gdXNlIGFuIG9iamVjdCB0byBzdG9yZSBhbGwgcmVsZXZhbnQgZWxlbWVudHMgdG8gdGhlIGNvbXBvbmVudHMgZm9yIGNvbnZlbmllbmNlXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB7fTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzaGFkb3cgcm9vdFxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pOyAvLyBzZXRzIGFuZCByZXR1cm5zICd0aGlzLnNoYWRvd1Jvb3QnXG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGV4YW1wbGUgZWxlbWVudCB0aGF0IHdpbGwgc2VydmUgYXMgb3VyIFwicm9vdFwiIGVsZW1lbnQgaGVyZVxuICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm5hdlwiKTtcbiAgICAgICAgLy8gc2V0IGNsYXNzIGFzIGFuIGV4YW1wbGUsIHRoaXMgY2FuIGJlIGxhdGVyIHVzZWQgZm9yIGNzcyFcbiAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taGVhZGVyXCIpO1xuXG4gICAgICAgIGxldCBsb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgbG9nby5zcmMgPSBcIi4vYXNzZXRzL3N2Z0ltYWdlcy9sb2dvLnN2Z1wiO1xuICAgICAgICBsb2dvLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1oZWFkZXIgbG9nb1wiKTtcblxuICAgICAgICBsZXQgaG9tZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgaG9tZUxpbmsuaHJlZj1cImluZGV4Lmh0bWxcIjtcbiAgICAgICAgaG9tZUxpbmsuaWQgPSBcImhvbWUtYnRuXCI7XG5cbiAgICAgICAgaG9tZUxpbmsuYXBwZW5kQ2hpbGQobG9nbyk7XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaG9tZUxpbmspO1xuXG4gICAgICAgIC8qKiBGb3IgZm9sbG93aW5nIGxpbmtzIGluIGFuIGV2ZW50bGlzdGVuZXJcbiAgICAgICAgICogIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vd3d3Lnczc2Nob29scy5jb21cIjtcbiAgICAgICAgICogIG9yIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgICAgICogIG9yIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlIGlmIHdlIGRvbid0IHdhbnQgdG8gYWRkIHRvIGhpc3RvcnlcbiAgICAgICAgICovXG5cbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgKz0gXCI8YSBpZD1cXFwiaGlzdC1idG5cXFwiIGhyZWY9XFxcImhpc3RvcnkuaHRtbFxcXCI+PHBvbW8tYnV0dG9uIHR5cGU9XFxcIm5hdlxcXCIgaWQ9XFxcImhpc3RcXFwiPkhpc3Rvcnk8L3BvbW8tYnV0dG9uPjwvYT5cIjtcblxuICAgICAgICB3cmFwcGVyLmlubmVySFRNTCArPSBcIjxwb21vLWJ1dHRvbiB0eXBlPVxcXCJuYXZcXFwiIGlkPVxcXCJoZWxwXFxcIj5IZWxwPC9wb21vLWJ1dHRvbj5cIjtcbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgKz0gYDxwb21vLW1vZGFsIGlkPVwibW9kYWwtaGVscFwiPiAgXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibW9kYWwtY2xvc2VcIiBjbGFzcz1cImNsb3NlLWJ0blwiPng8L2J1dHRvbj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGl0bGVcIj5XaGF0J3MgYSBQb21vIFRpbWVyPzwvcD5cbiAgICAgICAgICAgIDxwPiR7SEVMUF9URVhUfTwvcD5cbiAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qb21vZG9yb19UZWNobmlxdWVcIj5XaWtpcGVkaWE8L2E+XG4gICAgICAgIDwvcG9tby1tb2RhbD5gO1xuXG4gICAgICAgIC8vIHN0b3JlIGl0IGZvciBlYXN5IGFjY2Vzc1xuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIgPSB3cmFwcGVyO1xuXG4gICAgICAgIC8vIEFkZCBTdHlsZXNcbiAgICAgICAgY29uc3QgbGlua0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgdGhlIGNvcnJlY3Qgc3R5bGVzaGVldCB3aXRoIHRoZSBjb3JyZWN0IHN0eWxpbmdzXG4gICAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIuL2Fzc2V0cy9zdHlsZXMvaGVhZGVyLmNzc1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgY3JlYXRlZCBlbGVtZW50cyB0byB0aGUgc2hhZG93IERPTVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKGxpbmtFbGVtLCB3cmFwcGVyKTtcblxuICAgICAgICBsZXQgbW9kYWwgPSB3cmFwcGVyLmNoaWxkTm9kZXNbM107XG4gICAgICAgIG1vZGFsLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBsZXQgaGVscEJ0biA9IHdyYXBwZXIuY2hpbGROb2Rlc1syXTtcbiAgICAgICAgbGV0IGNsb3NlQnRuID0gbW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNsb3NlXCIpO1xuICAgICAgICBoZWxwQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZGFsLmRpc3BsYXlNb2RhbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNsb3NlQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZGFsLmhpZGVNb2RhbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNoZWNrUG9tb1Nlc3Npb25Nb2RlQmVmb3JlTGVhdmluZyA9IChlKSA9PiB7XG4gICAgICAgICAgICAvLyBwcmV2ZW50IG1vdmluZyB0byBuZXcgcGFnZSBpZiBjdXJyZW50IHBvbW8gc2Vzc2lvbiBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgICAgIGxldCBpZCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgICAgICAgICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvbW9TZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24oaWQpO1xuICAgICAgICAgICAgICAgIGlmIChwb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuQUNUSVZFIHx8IHBvbW9TZXNzaW9uLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLIHx8IHBvbW9TZXNzaW9uLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5CUkVBSykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oXCJBcmUgeW91IHN1cmUgd2FudCB0byBsZWF2ZT8gVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgY29tcGxldGUgeW91ciBzZXNzaW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGV5IGRvIGxlYXZlLCBtYWtlIHN1cmUgdG8gdXBkYXRlIHRoZSBzZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNIQU5HRVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbW9TZXNzaW9uLm1vZGUgPSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKHBvbW9TZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdldFBvbW9TZXNzaW9uKHBvbW9TZXNzaW9uLmlkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJoaXN0LWJ0blwiKS5vbmNsaWNrID0gY2hlY2tQb21vU2Vzc2lvbk1vZGVCZWZvcmVMZWF2aW5nO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJob21lLWJ0blwiKS5vbmNsaWNrID0gY2hlY2tQb21vU2Vzc2lvbk1vZGVCZWZvcmVMZWF2aW5nO1xuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwicG9tby1oZWFkZXJcIiwgSGVhZGVyKTsiXSwic291cmNlUm9vdCI6IiJ9