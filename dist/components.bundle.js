(()=>{var t={614:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n}function r(t){var e="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)})(t)}function o(t,e,n){return(o=i()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var r,o,u,c,l=(r=p,o=i(),function(){var t,e=a(r);if(o){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return n(this,t)});function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this)).userTyped="",t.elements={},t.attachShadow({mode:"open"});var e=document.createElement("div");e.setAttribute("class","pomo-input"),e.placeholder="Default Text",e.contentEditable=!0,e.max=50,t.elements.wrapper=e;var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","./assets/styles/input-field.css"),t.elements.linkElem=n,t.shadowRoot.append(n,e),t.elements.wrapper.setAttribute("class",t.elements.wrapper.getAttribute("class")+" placeholder"),e.addEventListener("focus",(function(){this.userTyped||(e.setAttribute("class","pomo-input"),e.textContent="")})),e.addEventListener("blur",(function(){this.userTyped||(e.setAttribute("class","pomo-input placeholder"),e.textContent=e.placeholder)})),t}return u=p,(c=[{key:"limitCharCount",value:function(t){return this.userTyped=this.textContent,0==window.getSelection().toString().length&&this.textContent.length>=this.max?(this.setAttribute("class","pomo-input max"),t.preventDefault(),!1):(this.setAttribute("class","pomo-input"),!0)}},{key:"numericInputOnly",value:function(t){if(this.userTyped=this.textContent,0==window.getSelection().toString().length&&this.textContent.length>=this.max)return this.setAttribute("class","pomo-input max"),t.preventDefault(),!1;this.setAttribute("class","pomo-input"),"keypress"==t.type&&isNaN(t.key)?(this.classList.add("invalid"),t.preventDefault()):("input"==t.type&&isNaN(t.data)||"paste"==t.type&&isNaN(t.clipboardData.getData("Text")))&&(this.setAttribute("class","pomo-input invalid"),t.preventDefault())}},{key:"value",get:function(){return this.userTyped}},{key:"connectedCallback",value:function(){var t=this.getAttribute("max");null!=t&&(this.elements.wrapper.max=Number(t)),this.elements.wrapper.textContent=this.textContent,this.getAttribute("required")&&(this.required=!0,this.elements.wrapper.textContent+="*"),"number"==this.getAttribute("type")?(this.elements.wrapper.addEventListener("keypress",this.numericInputOnly,!1),this.elements.wrapper.addEventListener("paste",this.numericInputOnly,!1),this.elements.wrapper.addEventListener("input",this.numericInputOnly,!1)):(this.elements.wrapper.addEventListener("keypress",this.limitCharCount,!1),this.elements.wrapper.addEventListener("paste",this.limitCharCount,!1),this.elements.wrapper.addEventListener("input",this.limitCharCount,!1)),this.elements.wrapper.placeholder=this.elements.wrapper.textContent}}])&&e(u.prototype,c),p}(r(HTMLElement));customElements.define("pomo-input",u)},223:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n}function n(t){var e="function"==typeof Map?new Map:void 0;return(n=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return r(t,arguments,s(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i(o,t)})(t)}function r(t,e,n){return(r=o()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(u,t);var n,r,a=(n=u,r=o(),function(){var t,o=s(n);if(r){var i=s(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return e(this,t)});function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=a.call(this);var e=document.getElementById("addTaskModal");return e.shadowRoot.getElementById("modal-close").onclick=function(){var t,n,r;e.hideModal(),t=e.shadowRoot.getElementById("task-name").elements.wrapper,n=e.shadowRoot.getElementById("pomos-required").elements.wrapper,r=e.shadowRoot.getElementById("description").elements.wrapper,t.innerText=t.placeholder,t.userTyped=void 0,t.setAttribute("class","pomo-input placeholder"),n.innerText=n.placeholder,n.userTyped=void 0,n.setAttribute("class","pomo-input placeholder"),r.innerText=r.placeholder,r.userTyped=void 0,r.setAttribute("class","pomo-input placeholder"),e.elements.values=void 0},e.elements.saveBtn=e.shadowRoot.getElementById("save-btn"),e.elements.saveBtn.onclick=function(){var t,n,r;t=!0,n=e.shadowRoot.getElementById("task-name").elements.wrapper,r=e.shadowRoot.getElementById("pomos-required").elements.wrapper,null==n.userTyped&&(n.setAttribute("class","pomo-input invalid"),t=!1),null==r.userTyped&&(r.setAttribute("class","pomo-input invalid"),t=!1),t&&(e.hideModal(),e.elements.values=function(){var t=e.shadowRoot.getElementById("task-name").elements.wrapper,n=e.shadowRoot.getElementById("pomos-required").elements.wrapper,r=e.shadowRoot.getElementById("description").elements.wrapper,o={taskName:t.userTyped,pomosRequired:n.userTyped,description:""};return null!=r.userTyped&&(o.description=r.userTyped),o}())}.bind(e),t}return u}(n(HTMLElement));customElements.define("modal-input",a)},870:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n}function r(t){var e="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)})(t)}function o(t,e,n){return(o=i()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var r,o,u,c,l=(r=p,o=i(),function(){var t,e=a(r);if(o){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return n(this,t)});function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this)).elements={},t.attachShadow({mode:"open"});var e=document.createElement("div");e.setAttribute("id","wrapper"),t.elements.wrapper=e,t.displayText="0%",e.innerHTML='\n        <div id="progress-circle" class="progress-circle">\n            <span id="displayText">\n                0%\n            </span>\n            <div class="left-half-clipper">\n                <div class="first50-bar"></div>\n                <div class="value-bar" id="progress-bar"></div>\n            </div>\n        </div>\n        ',e.innerHTML='\n        <span id="displayText">0%</span>\n        <svg id="circular-loader"viewBox="25 25 50 50" >\n            <circle id="loader-path" cx="50" cy="50" r="20" fill="none" />\n            <circle id="loader-path-bg" cx="50" cy="50" r="20" fill="none" />\n        </svg>\n        ';var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","./assets/styles/progress-circle.css"),t.elements.linkElem=n,t.shadowRoot.append(n,e),t}return u=p,(c=[{key:"setSize",value:function(t){this.shadowRoot.getElementById("wrapper").style.fontSize=t}},{key:"setDisplayText",value:function(t){this.displayText=t,this.shadowRoot.getElementById("displayText").textContent=t}},{key:"setPercentage",value:function(t){this.shadowRoot.getElementById("loader-path").style.strokeDashoffset=127.5*-(1-t)}}])&&e(u.prototype,c),p}(r(HTMLElement));customElements.define("progress-circle",u)},907:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return i(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,t)})(t)}function i(t,e,n){return(i=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(d,t);var o,i,c,p,f=(o=d,i=s(),function(){var t,e=u(o);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return n(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(t=f.call(this)).elements={},t.attachShadow({mode:"open"});var e=r(t);e.isCurrentTask=!0,e.completed=!1;var n=document.createElement("div"),o=document.createElement("li");o.setAttribute("class","task"),n.appendChild(o);var i=document.createElement("div");i.setAttribute("class","textwrapper"),o.appendChild(i);var s=document.createElement("p");s.setAttribute("class","title"),s.innerText=t.textContent||"",t.elements.title=s,i.appendChild(s);var a=document.createElement("p");a.setAttribute("class","description"),a.innerText=t.getAttribute("description")||"",t.elements.description=a,i.appendChild(a);var u=document.createElement("div");u.setAttribute("class","wrapperCircle"),o.appendChild(u);var c=document.createElement("div");c.setAttribute("class","pomoCircle"),t.pomosUsed=parseInt(t.getAttribute("pomosUsed")),c.preq=t.getAttribute("pomosRequired"),c.innerText=t.getAttribute("pomosUsed")+"/"+t.getAttribute("pomosRequired"),t.elements.pomoCircle=c,u.appendChild(c),o.appendChild(u);var p=document.createElement("div");p.setAttribute("class","wrapperCheckMark"),o.appendChild(p);var m=document.createElement("img");1==t.completed?(m.setAttribute("class","completeCheckMark"),m.setAttribute("src","./assets/svgImages/check_Complete.svg")):(m.setAttribute("class","incompleteCheckMark"),m.setAttribute("src","./assets/svgImages/check_Incomplete.svg")),m.onclick=function(){m.setAttribute("class","completeCheckMark"),m.setAttribute("src","./assets/svgImages/check_Complete.svg"),e.completed=!0,e.isCurrentTask=!1,l(c,e)},p.appendChild(m),t.elements.checkMark=m;var y=document.createElement("div");y.setAttribute("class","wrapperDelete"),o.appendChild(y);var h=document.createElement("img");h.setAttribute("class","delete-task-btn"),h.setAttribute("src","./assets/svgImages/delete.svg"),y.appendChild(h),t.elements.deleteTaskBtn=h,t.elements.wrapper=o;var b=document.createElement("link");return b.setAttribute("rel","stylesheet"),b.setAttribute("href","./assets/styles/task.css"),t.elements.linkElem=b,t.shadowRoot.append(n,b),t}return c=d,(p=[{key:"pomosused",set:function(t){console.log("HELLO")}},{key:"attributeChangedCallback",value:function(t,e,n){console.log(t,e,n),"pomosused"===t&&(console.log(n),this.elements.pomoCircle.innerText=n+"/"+this.getAttribute("pomosRequired"))}},{key:"setFinishTaskCallback",value:function(t){var e=this.elements.checkMark,n=this;e.onclick=function(){e.setAttribute("class","completeCheckMark"),e.setAttribute("src","./assets/svgImages/check_Complete.svg"),n.completed=!0,n.isCurrentTask=!1,l(n.elements.pomoCircle,n),t()}}},{key:"setDeleteTaskCallback",value:function(t){this.elements.deleteTaskBtn.onclick=t}},{key:"incrementPomosUsed",value:function(){this.pomosUsed+=1,this.elements.pomoCircle.innerText=this.pomosUsed+"/"+this.getAttribute("pomosRequired")}},{key:"hide",value:function(){this.elements.wrapper.style.opacity=0}}])&&e(c.prototype,p),d}(o(HTMLElement));function l(t,e){!0===e.isCurrentTask?t.setAttribute("class","currentTask"):!0===e.completed?e.pomosUsed<=t.preq?t.setAttribute("class","goodTimingTask"):t.setAttribute("class","badTimingTask"):e.completed||t.setAttribute("class","incompleteTask")}customElements.define("pomo-task",c)},409:(t,e,n)=>{"use strict";function r(t,e){localStorage.setItem(t,JSON.stringify(e))}function o(t){return JSON.parse(localStorage.getItem(t))}n.d(e,{RL:()=>r,RK:()=>o}),n(594),n(771)},771:(t,e,n)=>{"use strict";n.d(e,{rA:()=>c,_c:()=>p,E3:()=>f,RU:()=>d});var r=n(409),o=n(594);function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u="pomo_session_map",c={INACTIVE:"inactive",BREAK:"break",LONG_BREAK:"longbreak",ACTIVE:"active",COMPLETE:"complete"},l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.allTasks=[],this.mode=c.INACTIVE,this.time=0,this.pomosElapsed=0,this.startDate=new Date}var e,n;return e=t,(n=[{key:"currentTask",value:function(){var t=this.allTasks.filter((function(t){return!t.completed}));return t.length>0?t[0]:null}},{key:"addTask",value:function(t){(0,o.rs)(t),this.allTasks.push(t)}},{key:"deleteTask",value:function(t){(0,o.c_)(t.id);for(var e=0;e<this.allTasks.length;e++){var n=this.allTasks[e];if(t.id===n.id)return void this.allTasks.splice(e,1)}}},{key:"completeTask",value:function(t){var e,n=i(this.allTasks);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.id===t)return r.completed=!0,!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"getNextTask",value:function(){var t,e=i(this.allTasks);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!1===n.completed)return n}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"incrementTaskPomosUsed",value:function(t){var e,n=i(this.allTasks);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.id===t)return r.pomosUsed+=1,void(this.pomosElapsed+=1)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isBreak",value:function(){return this.mode===c.LONG_BREAK||this.mode===c.BREAK}},{key:"reorderTasks",value:function(){}},{key:"getPomosLeftInSession",value:function(){var t=0;return this.allTasks.forEach((function(e){t+=Math.max(e.pomosRequired-e.pomosUsed,0)})),t}},{key:"parseSessionFromObj",value:function(t){return this.id=t.id,this.mode=t.mode,this.time=t.time,this.pomosElapsed=t.pomosElapsed,this.startDate=new Date(t.startDate),this.allTasks=t.allTasks.map((function(t){var e=new o.iQ;return e.parseTaskFromObj(t)})),this}},{key:"serializeIntoObj",value:function(){return{id:this.id,allTasks:this.allTasks.map((function(t){return t.serializeIntoObj()})),mode:this.mode,time:this.time,pomosElapsed:this.pomosElapsed,startDate:this.startDate.getTime()}}}])&&a(e.prototype,n),t}();function p(t){var e=(0,r.RK)(u),n=new l;return e[t]?n.parseSessionFromObj(e[t]):null}function f(t){var e=(0,r.RK)(u);e[t.id]=t.serializeIntoObj(),(0,r.RL)(u,e)}function d(){return"complete"===localStorage.getItem("latest_pomo_session_status")?null:parseInt(localStorage.getItem("pomo_session_id"))-1}},594:(t,e,n)=>{"use strict";n.d(e,{iQ:()=>i,rs:()=>u,c_:()=>c});var r=n(409);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(771);var i=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sessionID=e,this.id=-1,this.title=n,this.description=r,this.pomosRequired=o,this.completed=!1,this.pomosUsed=0}var e,n;return e=t,(n=[{key:"parseTaskFromObj",value:function(e){var n=new t(e.sessionID,e.title,e.description,e.pomosRequired);return n.completed=e.completed,n.id=e.id,n.pomosUsed=e.pomosUsed,n}},{key:"serializeIntoObj",value:function(){return{title:this.title,description:this.description,pomosRequired:this.pomosRequired,completed:this.completed,pomosUsed:this.pomosUsed,id:this.id,sessionID:this.sessionID}}}])&&o(e.prototype,n),t}(),s="pomo_task_map",a="pomo_task_index";function u(t){var e=(0,r.RK)(s);if(!e[t.id]){var n=parseInt((0,r.RK)(a));t.id=n,(0,r.RL)(a,n+1)}var o=t.serializeIntoObj();return e[t.id]=o,(0,r.RL)(s,e),t.id}function c(t){var e=(0,r.RK)(s);delete e[t],(0,r.RL)(s,e)}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t="day",e="night";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function s(t,e,n){return(s=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(l,n);var r,i,s=(r=l,i=a(),function(){var t,e=c(r);if(i){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return o(this,t)});function l(){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this)).elements={},n.attachShadow({mode:"open"});var r=document.createElement("button");r.setAttribute("class","pomo-button"),r.innerText=n.textContent||"",n.elements.button=r,r.setAttribute("part","button"),r.style.display="none";var o=document.createElement("link");return o.setAttribute("rel","stylesheet"),o.setAttribute("href","./assets/styles/button.css"),n.elements.linkElem=o,n.shadowRoot.append(o,r),n.type=n.getAttribute("type"),"outline"==n.type?n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" outline"):"nav"==n.type&&n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" nav"),n.size=n.getAttribute("size"),"small"===n.size?n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" small"):"tiny"===n.size&&n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" tiny"),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=t;return n.getHours()<4?r=e:n.getHours()<18?r=t:n.getHours()<24&&(r=e),r}()===e&&"true"!==n.getAttribute("nodark")&&n.elements.button.setAttribute("class",n.elements.button.getAttribute("class")+" dark"),n}return l}(i(HTMLElement));function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){var e="function"==typeof Map?new Map:void 0;return(m=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function y(t,e,n){return(y=h()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&b(o,n.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}customElements.define("pomo-button",l);var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(s,t);var e,n,r,o,i=(e=s,n=h(),function(){var t,r=v(e);if(n){var o=v(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return d(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this)).elements={},t.attachShadow({mode:"open"});var e=document.createElement("div");t.elements.wrapper=e,t.elements.wrapper.setAttribute("class","modal-wrapper"),t.elements.wrapper.innerHTML='<div class="shadow"></div><div class="modal"></div>';var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","./assets/styles/modal.css"),t.elements.linkElem=n,t.elements.wrapper.style.display="none",t.shadowRoot.appendChild(n),t}return r=s,(o=[{key:"displayModal",value:function(){var t=this;this.elements.wrapper.style.display="block",setTimeout((function(){t.elements.wrapper.style.opacity=1}),20)}},{key:"hideModal",value:function(){var t=this;this.elements.wrapper.style.opacity=0,setTimeout((function(){t.elements.wrapper.style.display="none"}),400)}},{key:"connectedCallback",value:function(){this.type=this.getAttribute("type");var t=this.childNodes,e="";t.forEach((function(t){t.nodeType!=Node.TEXT_NODE&&(e+=t.outerHTML)})),this.elements.wrapper.innerHTML='<div class="shadow"></div><div class="modal">'.concat(e,"</div>");for(var n=t.length,r=0;r<n;r++)this.removeChild(t[0]);this.shadowRoot.appendChild(this.elements.wrapper)}}])&&f(r.prototype,o),s}(m(HTMLElement));customElements.define("pomo-modal",w),n(223);var g=n(771);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(t){var e="function"==typeof Map?new Map:void 0;return(T=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return O(t,arguments,S(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),R(r,t)})(t)}function O(t,e,n){return(O=A()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&R(o,n.prototype),o}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(o,t);var e,n,r=(e=o,n=A(),function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return E(this,t)});function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).elements={},t.attachShadow({mode:"open"});var e=document.createElement("nav");e.setAttribute("class","pomo-header");var n=document.createElement("img");n.src="./assets/svgImages/logo.svg",n.setAttribute("class","pomo-header logo");var i=document.createElement("a");i.href="index.html",i.id="home-btn",i.appendChild(n),e.appendChild(i),e.innerHTML+='<a id="hist-btn" href="history.html"><pomo-button type="nav" id="hist">History</pomo-button></a>',e.innerHTML+='<pomo-button type="nav" id="help">Help</pomo-button>',e.innerHTML+='<pomo-modal id="modal-help">  \n            <button id="modal-close" class="close-btn">x</button>\n            <p class="title">What\'s a Pomo Timer?</p>\n            <p>'.concat("The Pomodoro Technique is a time management method developed by Francesco Cirillo in the late 1980s. The technique uses a timer to break down work into intervals, traditionally 25 minutes in length, separated by short breaks. Each interval is known as a pomodoro, from the Italian word for 'tomato', after the tomato-shaped kitchen timer that Cirillo used as a university student.",'</p>\n            <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique">Wikipedia</a>\n        </pomo-modal>'),t.elements.wrapper=e;var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","./assets/styles/header.css"),t.elements.linkElem=s,t.shadowRoot.append(s,e);var a=e.childNodes[3];a.elements.wrapper.style.display="none";var u=e.childNodes[2],c=a.shadowRoot.getElementById("modal-close");u.onclick=function(){a.displayModal()},c.onclick=function(){a.hideModal()};var l=function(t){var e=(0,g.RU)();if(null!==e){var n=(0,g._c)(e);n.mode!==g.rA.ACTIVE&&n.mode!==g.rA.LONG_BREAK&&n.mode!==g.rA.BREAK||(confirm("Are you sure want to leave? This will automatically complete your session")?(console.log("CHANGE"),n.mode=g.rA.COMPLETE,(0,g.E3)(n),console.log((0,g._c)(n.id))):t.preventDefault())}};return t.shadowRoot.getElementById("hist-btn").onclick=l,t.shadowRoot.getElementById("home-btn").onclick=l,t}return o}(T(HTMLElement));customElements.define("pomo-header",_),n(614),n(870),n(907)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvY29tcG9uZW50cy9pbnB1dC9pbnB1dC5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvY29tcG9uZW50cy9tb2RhbC1pbnB1dC9tb2RhbC1pbnB1dC5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvY29tcG9uZW50cy9wcm9ncmVzcy1jaXJjbGUvcHJvZ3Jlc3MtY2lyY2xlLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy9jb21wb25lbnRzL3Rhc2svdGFzay5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvZGF0YWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Nlc3Npb24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Rhc2suanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL3V0aWxzL3RoZW1lLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy9jb21wb25lbnRzL2J1dHRvbi9idXR0b24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2NvbXBvbmVudHMvbW9kYWwvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2NvbXBvbmVudHMvaGVhZGVyL2hlYWRlci5qcyJdLCJuYW1lcyI6WyJJbnB1dEZpZWxkIiwidXNlclR5cGVkIiwiZWxlbWVudHMiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwid3JhcHBlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInBsYWNlaG9sZGVyIiwiY29udGVudEVkaXRhYmxlIiwibWF4IiwibGlua0VsZW0iLCJzaGFkb3dSb290IiwiYXBwZW5kIiwiZ2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJ0ZXh0Q29udGVudCIsImUiLCJ3aW5kb3ciLCJnZXRTZWxlY3Rpb24iLCJ0b1N0cmluZyIsImxlbmd0aCIsInByZXZlbnREZWZhdWx0IiwiZXZlbnQiLCJ0eXBlIiwiaXNOYU4iLCJrZXkiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhIiwiY2xpcGJvYXJkRGF0YSIsImdldERhdGEiLCJtYXhDaGFyIiwiTnVtYmVyIiwicmVxdWlyZWQiLCJudW1lcmljSW5wdXRPbmx5IiwibGltaXRDaGFyQ291bnQiLCJIVE1MRWxlbWVudCIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiTW9kYWxJbnB1dCIsInRhc2tNb2RhbCIsImdldEVsZW1lbnRCeUlkIiwib25jbGljayIsInRhc2tOYW1lIiwicG9tb3NSZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwiaGlkZU1vZGFsIiwiaW5uZXJUZXh0IiwidW5kZWZpbmVkIiwidmFsdWVzIiwic2F2ZUJ0biIsImdvb2RJbnB1dCIsInJldHVyblZhbCIsImdldFZhbHVlcyIsImJpbmQiLCJQcm9ncmVzc0NpcmNsZUNvbXBvbmVudCIsImRpc3BsYXlUZXh0IiwiaW5uZXJIVE1MIiwiZm9udFNpemUiLCJzdHlsZSIsInRleHQiLCJwZXJjZW50Iiwic3Ryb2tlRGFzaG9mZnNldCIsIlRhc2tDb21wb25lbnQiLCJwb21vdGFzayIsImlzQ3VycmVudFRhc2siLCJjb21wbGV0ZWQiLCJ3cmFwcGVyRGl2IiwiYXBwZW5kQ2hpbGQiLCJ3cmFwcGVyVGV4dCIsInRpdGxlIiwid3JhcHBlckNvbXBsZXRpb25DaXJjbGUiLCJwb21vQ2lyY2xlIiwicG9tb3NVc2VkIiwicGFyc2VJbnQiLCJwcmVxIiwid3JhcHBlckNoZWNrTWFyayIsImNoZWNrTWFyayIsImNvbG9yRGVjaWRlciIsIndyYXBwZXJEZWxldGUiLCJkZWxldGVUYXNrQnRuIiwidmFsIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiY2IiLCJvcGFjaXR5Iiwic3RvcmVPYmplY3QiLCJvYmplY3QiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldE9iamVjdCIsInBhcnNlIiwiZ2V0SXRlbSIsIlBPTU9fU0VTU0lPTl9NQVAiLCJQT01PX1NFU1NJT05fTU9ERVMiLCJJTkFDVElWRSIsIkJSRUFLIiwiTE9OR19CUkVBSyIsIkFDVElWRSIsIkNPTVBMRVRFIiwiUG9tb1Nlc3Npb24iLCJpZCIsImFsbFRhc2tzIiwidGltZSIsInBvbW9zRWxhcHNlZCIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJhbGxJblByb2dyZXNzVGFza3MiLCJmaWx0ZXIiLCJ0YXNrIiwic3RvcmVUYXNrIiwicHVzaCIsImRlbGV0ZVRhc2tCeVRhc2tJRCIsImkiLCJzdG9yZWRUYXNrIiwic3BsaWNlIiwibGVmdCIsImZvckVhY2giLCJNYXRoIiwic2Vzc2lvbl9vYmoiLCJtYXAiLCJ0YXNrT2JqIiwidCIsIlRhc2siLCJwYXJzZVRhc2tGcm9tT2JqIiwic2VyaWFsaXplSW50b09iaiIsImdldFRpbWUiLCJnZXRQb21vU2Vzc2lvbiIsImFsbFNlc3Npb25zIiwicCIsInBhcnNlU2Vzc2lvbkZyb21PYmoiLCJzdG9yZVBvbW9TZXNzaW9uIiwic2Vzc2lvbiIsImdldExhdGVzdFNlc3Npb25JRCIsInNlc3Npb25JRCIsInRhc2tfb2JqIiwiUE9NT19UQVNLX01BUCIsIlBPTU9fVEFTS19JTkRFWCIsInRhc2tfbWFwIiwib2JqIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiVEhFTUVfTU9ERVMiLCJCdXR0b24iLCJidXR0b24iLCJkaXNwbGF5Iiwic2l6ZSIsInRvZGF5IiwidGltZVBlcmlvZCIsImdldEhvdXJzIiwiZ2V0VGhlbWVNb2RlIiwiTW9kYWxDb21wb25lbnQiLCJzZXRUaW1lb3V0IiwiY2hpbGQxIiwiY2hpbGROb2RlcyIsImh0bWxTdHJpbmciLCJlbGVtZW50Iiwibm9kZVR5cGUiLCJOb2RlIiwiVEVYVF9OT0RFIiwib3V0ZXJIVE1MIiwibiIsInJlbW92ZUNoaWxkIiwiSGVhZGVyIiwibG9nbyIsInNyYyIsImhvbWVMaW5rIiwiaHJlZiIsIm1vZGFsIiwiaGVscEJ0biIsImNsb3NlQnRuIiwiZGlzcGxheU1vZGFsIiwiY2hlY2tQb21vU2Vzc2lvbk1vZGVCZWZvcmVMZWF2aW5nIiwicG9tb1Nlc3Npb24iLCJjb25maXJtIl0sIm1hcHBpbmdzIjoid3VEQVVNQSxFLDJaQUtGLGFBQWMsTyw0RkFBQSxVQUNWLGdCQUNLQyxVQUFZLEdBRWpCLEVBQUtDLFNBQVcsR0FHaEIsRUFBS0MsYUFBYSxDQUFFQyxLQUFNLFNBRzFCLElBQU1DLEVBQVVDLFNBQVNDLGNBQWMsT0FFdkNG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QyxRQUFpQnlELEdBQ2pCL0csUUFBUUMsS0FBSWlELFFBQWU2RCxFQUFZdkYsTUFOdkMxRixFQUFFSyxvQkF4RVIsT0FxRlYsRUFBS1gsV0FBVytCLGVBQWUsWUFBWUMsUUFBVXNKLEVBQ3JELEVBQUt0TCxXQUFXK0IsZUFBZSxZQUFZQyxRQUFVc0osRUF0RjNDLEUsWUFERzVKLGNBMkZyQkMsZUFBZUMsT0FBTyxjQUFlaUosRyIsImZpbGUiOiJjb21wb25lbnRzLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW5wdXRGaWVsZCBjbGFzcyB0byBtYWtlIGEgd2ViIGNvbXBvbmVudCB0aGF0IGNhbiBoYW5kbGUgdXNlciBpbnB1dC5cbiAqIEJ5IGRlZmF1bHQgdGhlIG1heCBjaGFyYWN0ZXIgY291bnQgaXMgNTAuXG4gKiBcbiAqIEV4YW1wbGU6IDxwb21vLWlucHV0IHJlcXVpcmVkPVwidHJ1ZVwiIG1heD1cIjEwXCI+VGVzdGluZzwvcG9tby1pbnB1dD5cbiAqIFdpbGwgbWFrZSBhbiBpbnB1dCBmaWVsZCBvZiBtYXggMTAgY2hhcmFjdGVycyBhbmQgdGhlIHBsYWNlaG9sZGVyIFxuICogdGV4dCB3aWxsIGJlIFwiVGVzdGluZypcIi4gVGhlIFwiKlwiIGlzIGJlY2F1c2UgdGhpcyBpbnB1dCBpcyBzZXQgYXMgcmVxdWlyZWQuXG4gKiBAY2xhc3NcbiAqIEBhdXRob3IgRXRoYW4gSHV5bmhcbiAqL1xuY2xhc3MgSW5wdXRGaWVsZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAvKiogQ29uc3RydWN0b3IgZm9yIHBvbW8taW5wdXQgY29tcG9uZW50IGNyZWF0ZXMgYSBjb250ZW50RWRpdGFibGUgZGl2IHdpdGhcbiAgICAgKiBhIGRlZmF1bHQgbWF4IGNoYXJhY3RlciBsaW1pdCBvZiA1MFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnVzZXJUeXBlZCA9IFwiXCI7XG4gICAgICAgIC8vIHVzZSBhbiBvYmplY3QgdG8gc3RvcmUgYWxsIHJlbGV2YW50IGVsZW1lbnRzIHRvIHRoZSBjb21wb25lbnRzIGZvciBjb252ZW5pZW5jZVxuICAgICAgICB0aGlzLmVsZW1lbnRzID0ge307XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgc2hhZG93IHJvb3RcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTsgLy8gc2V0cyBhbmQgcmV0dXJucyAndGhpcy5zaGFkb3dSb290J1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBleGFtcGxlIGVsZW1lbnQgdGhhdCB3aWxsIHNlcnZlIGFzIG91ciBcInJvb3RcIiBlbGVtZW50IGhlcmVcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIC8vIHNldCBjbGFzcyBhcyBhbiBleGFtcGxlLCB0aGlzIGNhbiBiZSBsYXRlciB1c2VkIGZvciBjc3MhXG4gICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0XCIpO1xuXG4gICAgICAgIHdyYXBwZXIucGxhY2Vob2xkZXIgPSBcIkRlZmF1bHQgVGV4dFwiO1xuICAgICAgICB3cmFwcGVyLmNvbnRlbnRFZGl0YWJsZSA9IHRydWU7XG4gICAgICAgIHdyYXBwZXIubWF4ID0gNTA7IC8vYnkgZGVmYXVsdCB0aGUgbWF4IGNoYXJhY3RlciBjb3VudCBpcyA1MFxuXG4gICAgICAgIC8vIHN0b3JlIGl0IGZvciBmdXR1cmUgcmVmZXJlbmNlXG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlciA9IHdyYXBwZXI7XG5cbiAgICAgICAgLy8gQWRkIFN0eWxlc1xuICAgICAgICBjb25zdCBsaW5rRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIpO1xuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gbGluayB0aGUgY29ycmVjdCBzdHlsZXNoZWV0IHdpdGggdGhlIGNvcnJlY3Qgc3R5bGluZ3NcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIi4vYXNzZXRzL3N0eWxlcy9pbnB1dC1maWVsZC5jc3NcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudHMubGlua0VsZW0gPSBsaW5rRWxlbTtcblxuICAgICAgICAvLyBhdHRhY2ggdGhlIGNyZWF0ZWQgZWxlbWVudHMgdG8gdGhlIHNoYWRvdyBET01cbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZChsaW5rRWxlbSwgd3JhcHBlcik7XG5cbiAgICAgICAgLy9hZGQgZGVmYXVsdCBzdHlsZVxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5lbGVtZW50cy53cmFwcGVyLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpICsgXCIgcGxhY2Vob2xkZXJcIik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFub255bW91cyBmdW5jdGlvbiB0byByZXBsYWNlIHBsYWNlaG9sZGVyIHRleHQgd2l0aCBlbXB0eSBzdHJpbmcgd2hlbiB1c2VyIGNsaWNrcyBvbiBjb21wb25lbnRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL2lmIGZvY3VzZWQgYW5kIGN1cnJlbnQgdGV4dCBpcyB0aGUgcGxhY2Vob2xkZXIgdGV4dCByZXBsYWNlIGl0IHdpdGggZW1wdHkgc3RyaW5nXG4gICAgICAgICAgICBpZighdGhpcy51c2VyVHlwZWQpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dFwiKTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFub255bW91cyBmdW5jdGlvbiB0byByZXBsYWNlIGVtcHR5IHN0cmluZyB3aXRoIHBsYWNlaG9sZGVyIHRleHQgd2hlbiB1c2VyIGNsaWNrcyBhd2F5XG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL2lmIG5vdCBmb2N1c2VkIGFuZCB0aGVyZSBpcyBubyBpbnB1dCwgcmV0dXJuIGJhY2sgdG8gcGxhY2Vob2xkZXIgc3RyaW5nXG4gICAgICAgICAgICBpZighdGhpcy51c2VyVHlwZWQpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBwbGFjZWhvbGRlclwiKTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnRleHRDb250ZW50ID0gd3JhcHBlci5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKiBcbiAgICAgKiBDaGVja3MgaW5wdXQgZmllbGQgaWYgaXQncyBleGNlZWRlZCB0aGUgbWF4aW11bSBjaGFyYWN0ZXIgbGltaXQgb24gYW4gZXZlbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlIENoZWNrcyBvbiBrZXlkb3duLHBhc3RlLCBhbmQgaW5wdXQgZXZlbnRzXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IGZhbHNlIElmIHRoZSBtYXggY2hhcmFjdGVyIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWRcbiAgICAqL1xuICAgIGxpbWl0Q2hhckNvdW50KGUpIHtcbiAgICAgICAgdGhpcy51c2VyVHlwZWQgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICAvL2lmIHRoZSB1c2VyIGhhc24ndCBoaWdobGlnaHRlZCBhbnkgdGV4dCBhbmQgd2UgYXJlIGF0IG1heCBsZW5ndGhcbiAgICAgICAgaWYod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkubGVuZ3RoID09IDAgJiYgdGhpcy50ZXh0Q29udGVudC5sZW5ndGggPj0gdGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IG1heFwiKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogU3RvcCB0aGUgdXNlciBmcm9tIGlucHV0dGluZyBhbnl0aGluZyBidXQgbnVtYmVyc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IENoZWNrcyBvbiBrZXlkb3duLHBhc3RlLCBhbmQgaW5wdXQgZXZlbnRzXG4gICAgKi9cbiAgICBudW1lcmljSW5wdXRPbmx5KGV2ZW50KSB7XG4gICAgICAgIHRoaXMudXNlclR5cGVkID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgLy9pZiB0aGUgdXNlciBoYXNuJ3QgaGlnaGxpZ2h0ZWQgYW55IHRleHQgYW5kIHdlIGFyZSBhdCBtYXggbGVuZ3RoXG4gICAgICAgIGlmKHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpLmxlbmd0aCA9PSAwICYmIHRoaXMudGV4dENvbnRlbnQubGVuZ3RoID49IHRoaXMubWF4KSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBtYXhcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vZGlmZmVyZW50IGV2ZW50cyBzdG9yZSB0aGUgdGV4dCBpbiBkaWZmZXJlbnQgd2F5cyBzbyB3ZSBuZWVkIHRoZXNlIGlmc1xuICAgICAgICBpZihldmVudC50eXBlID09IFwia2V5cHJlc3NcIiAmJiBpc05hTihldmVudC5rZXkpKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJpbnZhbGlkXCIpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGV2ZW50LnR5cGUgPT0gXCJpbnB1dFwiICYmIGlzTmFOKGV2ZW50LmRhdGEpKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBpbnZhbGlkXCIpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGV2ZW50LnR5cGUgPT0gXCJwYXN0ZVwiICYmIGlzTmFOKGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIikpKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1pbnB1dCBpbnZhbGlkXCIpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlclR5cGVkO1xuICAgIH1cblxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBsZXQgbWF4Q2hhciA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibWF4XCIpO1xuXG4gICAgICAgIC8vc2V0IGF0dHJpYnV0ZS1zcGVjaWZpZWQgbWF4IGNoYXJcbiAgICAgICAgaWYgKG1heENoYXIgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5tYXggPSBOdW1iZXIobWF4Q2hhcik7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIikpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnRleHRDb250ZW50ICs9IFwiKlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgdGhpcy5udW1lcmljSW5wdXRPbmx5LCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcInBhc3RlXCIsIHRoaXMubnVtZXJpY0lucHV0T25seSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLm51bWVyaWNJbnB1dE9ubHksIGZhbHNlKTsgLy90aGlzIGlzIG1haW5seSBmb3IgY2hhbmdpbmcgdGhlIGJhY2tzcGFjZS9kZWwga2V5XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvL2xpc3RlbiBmb3IgbWF4IGNoYXJhY3RlcnMgb24gdGhlc2UgZXZlbnRzXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIHRoaXMubGltaXRDaGFyQ291bnQsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwicGFzdGVcIiwgdGhpcy5saW1pdENoYXJDb3VudCwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmxpbWl0Q2hhckNvdW50LCBmYWxzZSk7IC8vdGhpcyBpcyBtYWlubHkgZm9yIGNoYW5naW5nIHRoZSBiYWNrc3BhY2UvZGVsIGtleVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnBsYWNlaG9sZGVyID0gdGhpcy5lbGVtZW50cy53cmFwcGVyLnRleHRDb250ZW50O1xuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwicG9tby1pbnB1dFwiLCBJbnB1dEZpZWxkKTsiLCIvKipcbiAqIE1vZGFsSW5wdXQgY2xhc3MgbG9hZHMgZnVuY3Rpb25hbGl0eSBmb3IgdGhlIGNsb3NlIGJ1dHRvbiBhbmRcbiAqIHNhdmUgYnV0dG9uIGluIHRoZSBpbnB1dCBtb2RhbCBpbiB0aW1lci5odG1sLlxuICogQGNsYXNzXG4gKiBAYXV0aG9yIEV0aGFuIEh1eW5oXG4gKi9cbmNsYXNzIE1vZGFsSW5wdXQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGxldCB0YXNrTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFRhc2tNb2RhbFwiKTtcbiAgICAgICAgbGV0IGNsb3NlQnRuID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC1jbG9zZVwiKTtcbiAgICAgICAgXG4gICAgICAgIGNsb3NlQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRhc2tNb2RhbC5oaWRlTW9kYWwoKTtcblxuICAgICAgICAgICAgcmVzZXRJbnB1dHMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0YXNrTW9kYWwuZWxlbWVudHMuc2F2ZUJ0biA9IHRhc2tNb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2F2ZS1idG5cIik7XG4gICAgICAgIHRhc2tNb2RhbC5lbGVtZW50cy5zYXZlQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL2lmIHRoZXJlIGFyZSB2YWx1ZXMgaW5wdXR0ZWQgaW50byB0aGUgZmllbGRzXG4gICAgICAgICAgICBpZihjaGVja1ZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgdGFza01vZGFsLmhpZGVNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHRhc2tNb2RhbC5lbGVtZW50cy52YWx1ZXMgPSBnZXRWYWx1ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRhc2tNb2RhbCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgdXNlciBoYXMgaW5wdXR0ZWQgc29tZXRoaW5nIGZvciB0YXNrIG5hbWUgYW5kIHBvbW9zIHJlcXVpcmVkXG4gICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHJlcXVpcmVkIGlucHV0IGZpZWxkcyBoYXZlIGlucHV0LCBmYWxzZSBvdGhlcndpc2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrVmFsdWVzKCkge1xuICAgICAgICAgICAgbGV0IGdvb2RJbnB1dCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB0YXNrTmFtZSA9IHRhc2tNb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwidGFzay1uYW1lXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgICAgICBjb25zdCBwb21vc1JlcXVpcmVkID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJwb21vcy1yZXF1aXJlZFwiKS5lbGVtZW50cy53cmFwcGVyO1xuXG4gICAgICAgICAgICBpZih0YXNrTmFtZS51c2VyVHlwZWQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFza05hbWUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IGludmFsaWRcIik7XG4gICAgICAgICAgICAgICAgZ29vZElucHV0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHBvbW9zUmVxdWlyZWQudXNlclR5cGVkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBvbW9zUmVxdWlyZWQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IGludmFsaWRcIik7XG4gICAgICAgICAgICAgICAgZ29vZElucHV0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBnb29kSW5wdXQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBhbGwgdXNlciBpbnB1dCBhbmQgcmVzZXRzIHRoZSBpbnB1dCBmaWVsZHNcbiAgICAgICAgICogQHJldHVybnMge0RpY3Rpb25hcnl9IHt0YXNrTmFtZTogaW5wdXQsIHBvbW9zUmVxdWlyZWQ6IGlucHV0LCBkZXNjcmlwdGlvbjogaW5wdXR9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRWYWx1ZXMoKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrTmFtZSA9IHRhc2tNb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwidGFzay1uYW1lXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgICAgICBjb25zdCBwb21vc1JlcXVpcmVkID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJwb21vcy1yZXF1aXJlZFwiKS5lbGVtZW50cy53cmFwcGVyO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSB0YXNrTW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgICAgICBjb25zdCByZXR1cm5WYWwgPSB7XG4gICAgICAgICAgICAgICAgdGFza05hbWU6IHRhc2tOYW1lLnVzZXJUeXBlZCxcbiAgICAgICAgICAgICAgICBwb21vc1JlcXVpcmVkOiBwb21vc1JlcXVpcmVkLnVzZXJUeXBlZCxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmKGRlc2NyaXB0aW9uLnVzZXJUeXBlZCAhPSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsW1wiZGVzY3JpcHRpb25cIl0gPSBkZXNjcmlwdGlvbi51c2VyVHlwZWQ7XG5cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWw7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYXJzIGlucHV0cyBhbmQgcmVzZXRzIHN0eWxlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByZXNldElucHV0cygpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza01vZGFsLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLW5hbWVcIikuZWxlbWVudHMud3JhcHBlcjtcbiAgICAgICAgICAgIGNvbnN0IHBvbW9zUmVxdWlyZWQgPSB0YXNrTW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInBvbW9zLXJlcXVpcmVkXCIpLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRhc2tNb2RhbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikuZWxlbWVudHMud3JhcHBlcjtcblxuICAgICAgICAgICAgdGFza05hbWUuaW5uZXJUZXh0ID0gdGFza05hbWUucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICB0YXNrTmFtZS51c2VyVHlwZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0YXNrTmFtZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgcGxhY2Vob2xkZXJcIik7XG5cbiAgICAgICAgICAgIHBvbW9zUmVxdWlyZWQuaW5uZXJUZXh0ID0gcG9tb3NSZXF1aXJlZC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIHBvbW9zUmVxdWlyZWQudXNlclR5cGVkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcG9tb3NSZXF1aXJlZC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taW5wdXQgcGxhY2Vob2xkZXJcIik7XG5cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGRlc2NyaXB0aW9uLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24udXNlclR5cGVkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwb21vLWlucHV0IHBsYWNlaG9sZGVyXCIpO1xuXG4gICAgICAgICAgICB0YXNrTW9kYWwuZWxlbWVudHMudmFsdWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJtb2RhbC1pbnB1dFwiLCBNb2RhbElucHV0KTsiLCIvKipcbiAqIEBjbGFzcyBQcm9ncmVzc0NpcmNsZUNvbXBvbmVudFxuICovXG5jbGFzcyBQcm9ncmVzc0NpcmNsZUNvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAvLyB1c2UgYW4gb2JqZWN0IHRvIHN0b3JlIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGUgY29tcG9uZW50cyBmb3IgY29udmVuaWVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IHt9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIHNoYWRvdyByb290XG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7IC8vIHNldHMgYW5kIHJldHVybnMgJ3RoaXMuc2hhZG93Um9vdCdcblxuICAgICAgICAvLyBDcmVhdGUgYW4gZXhhbXBsZSBlbGVtZW50IHRoYXQgd2lsbCBzZXJ2ZSBhcyBvdXIgXCJyb290XCIgZWxlbWVudCBoZXJlXG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAvLyBzZXQgY2xhc3MgYXMgYW4gZXhhbXBsZSwgdGhpcyBjYW4gYmUgbGF0ZXIgdXNlZCBmb3IgY3NzIVxuICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwid3JhcHBlclwiKTtcbiAgICAgICAgLy8gc3RvcmUgaXQgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyID0gd3JhcHBlcjtcblxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gXCIwJVwiO1xuXG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGlkPVwicHJvZ3Jlc3MtY2lyY2xlXCIgY2xhc3M9XCJwcm9ncmVzcy1jaXJjbGVcIj5cbiAgICAgICAgICAgIDxzcGFuIGlkPVwiZGlzcGxheVRleHRcIj5cbiAgICAgICAgICAgICAgICAwJVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnQtaGFsZi1jbGlwcGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpcnN0NTAtYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZhbHVlLWJhclwiIGlkPVwicHJvZ3Jlc3MtYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8c3BhbiBpZD1cImRpc3BsYXlUZXh0XCI+MCU8L3NwYW4+XG4gICAgICAgIDxzdmcgaWQ9XCJjaXJjdWxhci1sb2FkZXJcInZpZXdCb3g9XCIyNSAyNSA1MCA1MFwiID5cbiAgICAgICAgICAgIDxjaXJjbGUgaWQ9XCJsb2FkZXItcGF0aFwiIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIjIwXCIgZmlsbD1cIm5vbmVcIiAvPlxuICAgICAgICAgICAgPGNpcmNsZSBpZD1cImxvYWRlci1wYXRoLWJnXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMjBcIiBmaWxsPVwibm9uZVwiIC8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEFkZCBTdHlsZXNcbiAgICAgICAgY29uc3QgbGlua0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgdGhlIGNvcnJlY3Qgc3R5bGVzaGVldCB3aXRoIHRoZSBjb3JyZWN0IHN0eWxpbmdzXG4gICAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIuL2Fzc2V0cy9zdHlsZXMvcHJvZ3Jlc3MtY2lyY2xlLmNzc1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgY3JlYXRlZCBlbGVtZW50cyB0byB0aGUgc2hhZG93IERPTVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKGxpbmtFbGVtLCB3cmFwcGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHNpemUgb2YgcHJvZ3Jlc3MgY2lyY2xlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTaXplIC0gZXhhbXBsZTogYDFyZW1gXG4gICAgICovXG4gICAgc2V0U2l6ZShmb250U2l6ZSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwid3JhcHBlclwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGlzcGxheSB0ZXh0IG9mIHRoZSBwcm9ncmVzcyBjaXJjbGVcbiAgICAgKiBAcGFyYW0geyp9IHRleHQgXG4gICAgICovXG4gICAgc2V0RGlzcGxheVRleHQodGV4dCkge1xuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGV4dDtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJkaXNwbGF5VGV4dFwiKTtcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcGVyY2VudGFnZSBvZiB0aGUgcHJvZ3Jlc3MgYmFyIFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwZXJjZW50IC0gYSBwZXJjZW50IHZhbHVlIHJhbmdpbmcgZnJvbSAwIHRvIDFcbiAgICAgKi9cbiAgICBzZXRQZXJjZW50YWdlKHBlcmNlbnQpIHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkZXItcGF0aFwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gLSAoMSAtIHBlcmNlbnQpICogMTI3LjU7XG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJwcm9ncmVzcy1jaXJjbGVcIiwgUHJvZ3Jlc3NDaXJjbGVDb21wb25lbnQpOyIsIi8qKlxuICogQGNsYXNzIFRhc2tcbiAqIFxuICogQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgYSBnaXZlbiBUYXNrXG4gKiBcbiAqL1xuXG5jbGFzcyBUYXNrQ29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5lbGVtZW50cyA9IHt9O1xuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcblxuICAgICAgY29uc3QgcG9tb3Rhc2sgPSB0aGlzO1xuICAgICAgcG9tb3Rhc2suaXNDdXJyZW50VGFzayA9IHRydWU7XG4gICAgICBwb21vdGFzay5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIC8vIGlmIHdlIHJlY2VpdmVkIHN0b3Agc2lnbmFsIGZyb20gc3RvcCBidXR0b24gb2YgdGhlIHBvbW8gdGltZXIsIGl0IHdpbGwgdHJpZ2dlciBpbmNvbXBsZXRlXG4gICAgICBjb25zdCB3cmFwcGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGFza1wiKTtcbiAgICAgIHdyYXBwZXJEaXYuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gICAgICAvLyBBIGRpdiB3cmFwcGVyIGZvciB0aGUgdGl0bGUgYW5kIGRlc2NyaXB0aW9uXG4gICAgICBjb25zdCB3cmFwcGVyVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB3cmFwcGVyVGV4dC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRleHR3cmFwcGVyXCIpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh3cmFwcGVyVGV4dCk7XG5cbiAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRpdGxlXCIpO1xuICAgICAgdGl0bGUuaW5uZXJUZXh0ID0gdGhpcy50ZXh0Q29udGVudCB8fCBcIlwiO1xuICAgICAgdGhpcy5lbGVtZW50cy50aXRsZSA9IHRpdGxlO1xuICAgICAgd3JhcHBlclRleHQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGVzY3JpcHRpb25cIikgfHwgXCJcIjtcbiAgICAgIHRoaXMuZWxlbWVudHMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgIHdyYXBwZXJUZXh0LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuXG4gICAgICAvLyBBIGRpdiB3cmFwcGVyIGZvciB0aGUgY29tcGxldGlvbiBjaXJjbGVcbiAgICAgIGNvbnN0IHdyYXBwZXJDb21wbGV0aW9uQ2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHdyYXBwZXJDb21wbGV0aW9uQ2lyY2xlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwid3JhcHBlckNpcmNsZVwiKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQod3JhcHBlckNvbXBsZXRpb25DaXJjbGUpO1xuICAgICAgLy8gVGhlIEdyZWVuLCBSZWQgb3IgWWVsbG93IGNpcmNsZSB0aGF0IGRlc2NyaWJlcyB0aGUgcmF0aW8gb2YgUG9tb3MgZXhwZWN0ZWQgdnMgUG9tb3MgVXNlZFxuICAgICAgY29uc3QgcG9tb0NpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwb21vQ2lyY2xlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tb0NpcmNsZVwiKTtcbiAgICAgIHRoaXMucG9tb3NVc2VkID0gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJwb21vc1VzZWRcIikpO1xuICAgICAgcG9tb0NpcmNsZS5wcmVxID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJwb21vc1JlcXVpcmVkXCIpO1xuICAgICAgcG9tb0NpcmNsZS5pbm5lclRleHQgPSB0aGlzLmdldEF0dHJpYnV0ZShcInBvbW9zVXNlZFwiKSArIFwiL1wiICsgdGhpcy5nZXRBdHRyaWJ1dGUoXCJwb21vc1JlcXVpcmVkXCIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5wb21vQ2lyY2xlID0gcG9tb0NpcmNsZTtcblxuICAgICAgd3JhcHBlckNvbXBsZXRpb25DaXJjbGUuYXBwZW5kQ2hpbGQocG9tb0NpcmNsZSk7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHdyYXBwZXJDb21wbGV0aW9uQ2lyY2xlKTtcblxuICAgICAgLy8gQSBkaXYgd3JhcHBlciBmb3IgdGhlIGNoZWNrIG1hcmtcbiAgICAgIGNvbnN0IHdyYXBwZXJDaGVja01hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgd3JhcHBlckNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIndyYXBwZXJDaGVja01hcmtcIik7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHdyYXBwZXJDaGVja01hcmspO1xuICAgICAgLy8gVGhlIENoZWNrIG1hcmsgdGhhdCBkZWZpbmVzIGlmIGEgdGFzayBpcyBjb21wbGV0ZSBvciBub3RcbiAgICAgIGNvbnN0IGNoZWNrTWFyayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cbiAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCA9PSB0cnVlKSB7XG4gICAgICAgICBjaGVja01hcmsuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb21wbGV0ZUNoZWNrTWFya1wiKTtcbiAgICAgICAgIGNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9zdmdJbWFnZXMvY2hlY2tfQ29tcGxldGUuc3ZnXCIpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICBjaGVja01hcmsuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJpbmNvbXBsZXRlQ2hlY2tNYXJrXCIpO1xuICAgICAgICAgY2hlY2tNYXJrLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4vYXNzZXRzL3N2Z0ltYWdlcy9jaGVja19JbmNvbXBsZXRlLnN2Z1wiKTtcbiAgICAgIH1cblxuICAgICAgY2hlY2tNYXJrLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICBjaGVja01hcmsuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb21wbGV0ZUNoZWNrTWFya1wiKTtcbiAgICAgICAgIGNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9zdmdJbWFnZXMvY2hlY2tfQ29tcGxldGUuc3ZnXCIpO1xuICAgICAgICAgcG9tb3Rhc2suY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgIHBvbW90YXNrLmlzQ3VycmVudFRhc2sgPSBmYWxzZTtcblxuICAgICAgICAgY29sb3JEZWNpZGVyKHBvbW9DaXJjbGUsIHBvbW90YXNrKTtcblxuICAgICAgfTtcblxuICAgICAgd3JhcHBlckNoZWNrTWFyay5hcHBlbmRDaGlsZChjaGVja01hcmspO1xuICAgICAgdGhpcy5lbGVtZW50cy5jaGVja01hcmsgPSBjaGVja01hcms7XG5cbiAgICAgIC8vIEEgZGl2IHdyYXBwZXIgZm9yIHRoZSBjaGVjayBtYXJrXG4gICAgICAvLyBjb25zdCB3cmFwcGVyRHJhZ0FuZERyb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgLy8gd3JhcHBlckRyYWdBbmREcm9wLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwid3JhcHBlckRyYWdBbmREcm9wXCIpO1xuICAgICAgLy8gd3JhcHBlci5hcHBlbmRDaGlsZCh3cmFwcGVyRHJhZ0FuZERyb3ApO1xuICAgICAgLy8gVGhlIERyYWcgYW5kIERyb3AgU1ZHXG4gICAgICAvLyBjb25zdCBpbWdEcmFnQW5kRHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAvLyBpbWdEcmFnQW5kRHJvcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImRyYWdBbmREcm9wXCIpO1xuICAgICAgLy8gaW1nRHJhZ0FuZERyb3Auc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvc3ZnSW1hZ2VzL2RyYWctZG90cy5zdmdcIik7XG4gICAgICAvLyB3cmFwcGVyRHJhZ0FuZERyb3AuYXBwZW5kQ2hpbGQoaW1nRHJhZ0FuZERyb3ApO1xuICAgICAgLy8gdGhpcy5lbGVtZW50cy5kcmFnQW5kRHJvcCA9IGltZ0RyYWdBbmREcm9wO1xuXG4gICAgICBjb25zdCB3cmFwcGVyRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHdyYXBwZXJEZWxldGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ3cmFwcGVyRGVsZXRlXCIpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh3cmFwcGVyRGVsZXRlKTtcbiAgICAgIGNvbnN0IGRlbGV0ZVRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgZGVsZXRlVGFza0J0bi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImRlbGV0ZS10YXNrLWJ0blwiKTtcbiAgICAgIGRlbGV0ZVRhc2tCdG4uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvc3ZnSW1hZ2VzL2RlbGV0ZS5zdmdcIik7XG4gICAgICB3cmFwcGVyRGVsZXRlLmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdG4pO1xuICAgICAgdGhpcy5lbGVtZW50cy5kZWxldGVUYXNrQnRuID0gZGVsZXRlVGFza0J0bjtcblxuICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyID0gd3JhcHBlcjtcblxuICAgICAgY29uc3QgbGlua0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XG4gICAgICAvLyBtYWtlIHN1cmUgdG8gbGluayB0aGUgY29ycmVjdCBzdHlsZXNoZWV0IHdpdGggdGhlIGNvcnJlY3Qgc3R5bGluZ3NcbiAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIuL2Fzc2V0cy9zdHlsZXMvdGFzay5jc3NcIik7XG4gICAgICB0aGlzLmVsZW1lbnRzLmxpbmtFbGVtID0gbGlua0VsZW07XG5cbiAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQod3JhcHBlckRpdiwgbGlua0VsZW0pO1xuICAgfVxuICAgc2V0IHBvbW9zdXNlZCh2YWwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiSEVMTE9cIik7XG4gICB9XG4gICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICBjb25zb2xlLmxvZyhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgaWYgKG5hbWUgPT09IFwicG9tb3N1c2VkXCIpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKG5ld1ZhbHVlKTtcbiAgICAgICAgIHRoaXMuZWxlbWVudHMucG9tb0NpcmNsZS5pbm5lclRleHQgPSBuZXdWYWx1ZSArIFwiL1wiICsgdGhpcy5nZXRBdHRyaWJ1dGUoXCJwb21vc1JlcXVpcmVkXCIpO1xuICAgICAgfVxuICAgfVxuXG4gICBzZXRGaW5pc2hUYXNrQ2FsbGJhY2soY2IpIHtcbiAgICAgIGNvbnN0IGNoZWNrTWFyayA9IHRoaXMuZWxlbWVudHMuY2hlY2tNYXJrO1xuICAgICAgY29uc3QgcG9tb3Rhc2sgPSB0aGlzO1xuICAgICAgY2hlY2tNYXJrLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICBjaGVja01hcmsuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb21wbGV0ZUNoZWNrTWFya1wiKTtcbiAgICAgICAgIGNoZWNrTWFyay5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9zdmdJbWFnZXMvY2hlY2tfQ29tcGxldGUuc3ZnXCIpO1xuICAgICAgICAgcG9tb3Rhc2suY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgIHBvbW90YXNrLmlzQ3VycmVudFRhc2sgPSBmYWxzZTtcblxuICAgICAgICAgY29sb3JEZWNpZGVyKHBvbW90YXNrLmVsZW1lbnRzLnBvbW9DaXJjbGUsIHBvbW90YXNrKTtcbiAgICAgICAgIGNiKCk7XG4gICAgICB9O1xuICAgfVxuXG4gICBzZXREZWxldGVUYXNrQ2FsbGJhY2soY2IpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMuZGVsZXRlVGFza0J0bi5vbmNsaWNrID0gY2I7XG4gICB9XG5cbiAgIGluY3JlbWVudFBvbW9zVXNlZCgpIHtcbiAgICAgIHRoaXMucG9tb3NVc2VkICs9IDE7XG4gICAgICB0aGlzLmVsZW1lbnRzLnBvbW9DaXJjbGUuaW5uZXJUZXh0ID0gdGhpcy5wb21vc1VzZWQgKyBcIi9cIiArIHRoaXMuZ2V0QXR0cmlidXRlKFwicG9tb3NSZXF1aXJlZFwiKTtcbiAgICAgIFxuICAgfVxuICAgaGlkZSgpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgIH1cblxufVxuXG5mdW5jdGlvbiBjb2xvckRlY2lkZXIocG9tb0NpcmNsZSwgcG9tb3Rhc2spIHtcbiAgIC8vY29uc29sZS5sb2cocG9tb0NpcmNsZS5wcmVxKTtcbiAgIGlmIChwb21vdGFzay5pc0N1cnJlbnRUYXNrID09PSB0cnVlKSB7XG4gICAgICBwb21vQ2lyY2xlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY3VycmVudFRhc2tcIik7XG4gICB9XG4gICBlbHNlIGlmIChwb21vdGFzay5jb21wbGV0ZWQgPT09IHRydWUpIHtcbiAgICAgIGlmIChwb21vdGFzay5wb21vc1VzZWQgPD0gcG9tb0NpcmNsZS5wcmVxKSB7XG4gICAgICAgICBwb21vQ2lyY2xlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZ29vZFRpbWluZ1Rhc2tcIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgIHBvbW9DaXJjbGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJiYWRUaW1pbmdUYXNrXCIpO1xuICAgICAgfVxuICAgfVxuICAgZWxzZSBpZiAoIXBvbW90YXNrLmNvbXBsZXRlZCkge1xuICAgICAgcG9tb0NpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImluY29tcGxldGVUYXNrXCIpO1xuICAgfVxuXG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInBvbW8tdGFza1wiLCBUYXNrQ29tcG9uZW50KTsiLCJpbXBvcnQgeyBQT01PX1RBU0tfSU5ERVgsIFBPTU9fVEFTS19NQVAgfSBmcm9tIFwiLi90YXNrXCI7XG5pbXBvcnQgeyBQT01PX1NFU1NJT05fSUQsIExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTLCBQT01PX1NFU1NJT05fTUFQIH0gZnJvbSBcIi4vc2Vzc2lvblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICAgIC8vIGNoZWNrIGlmIHdlIG5lZWQgdG8gaW5pdGlhbGl6ZVxuICAgIGxldCBuZWVkVG9Jbml0aWFsaXplID0gZmFsc2U7XG4gICAgaWYgKGdldE9iamVjdChQT01PX1RBU0tfTUFQKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdldE9iamVjdChQT01PX1RBU0tfSU5ERVgpID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghbG9jYWxTdG9yYWdlLmdldEl0ZW0oTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMpID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZ2V0T2JqZWN0KFBPTU9fU0VTU0lPTl9NQVApID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIHRoZW4gaW5pdGlhbGl6ZVxuICAgIGlmIChuZWVkVG9Jbml0aWFsaXplKSB7XG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19NQVAsIHt9KTtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX0lOREVYLCAwKTtcbiAgICAgICAgc3RvcmVPYmplY3QoTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMsIFwiY29tcGxldGVcIik7XG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fU0VTU0lPTl9JRCwgMCk7XG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fU0VTU0lPTl9NQVAsIHt9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXREYXRhYmFzZSgpIHtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fVEFTS19NQVBdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19UQVNLX0lOREVYXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW0xBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fU0VTU0lPTl9JRF07XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1NFU1NJT05fTUFQXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlT2JqZWN0KGtleSwgb2JqZWN0KSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShvYmplY3QpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRPYmplY3Qoa2V5KSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG59IiwiLyoqXG4gKiBUaGlzIGZpbGUgaXMgcmVsYXRlZCB0byBmaW5kaW5nIHBvbW8gc2Vzc2lvbnNcbiAqL1xuaW1wb3J0IHsgZ2V0T2JqZWN0LCBzdG9yZU9iamVjdCB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBkZWxldGVUYXNrQnlUYXNrSUQsIHN0b3JlVGFzaywgVGFzayB9IGZyb20gXCIuL3Rhc2tcIjtcblxuXG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX0lEID0gXCJwb21vX3Nlc3Npb25faWRcIjtcbmV4cG9ydCBjb25zdCBMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUyA9IFwibGF0ZXN0X3BvbW9fc2Vzc2lvbl9zdGF0dXNcIjtcbmV4cG9ydCBjb25zdCBQT01PX1NFU1NJT05fTUFQID0gXCJwb21vX3Nlc3Npb25fbWFwXCI7XG5cbi8qKiB0aGUgZGlmZmVyZW50IHBvbW8gc2Vzc2lvbiBtb2RlcyBhcyBjb25zdGFudHMgKi9cbmV4cG9ydCBjb25zdCBQT01PX1NFU1NJT05fTU9ERVMgPSB7XG4gIC8qKiB3aGVuIHRoZSB1c2VyIGlzIGluIHRoZSBpbnRlcmZhY2Ugb2YgY3JlYXRpbmcgYSBuZXcgdGltZXIgYW5kIGhhcyBub3Qgc3RhcnRlZCB0aGVpciBuZXcgc2Vzc2lvbiB5ZXQgKi9cbiAgSU5BQ1RJVkU6IFwiaW5hY3RpdmVcIixcbiAgLyoqIHdoZW4gcnVubmluZyB0aGUgYnJlYWsgdGltZXIgKi9cbiAgQlJFQUs6IFwiYnJlYWtcIixcbiAgLyoqIHdoZW4gcnVubmluZyB0aGUgbG9uZ2VyIGJyZWFrIHRpbWVyICovXG4gIExPTkdfQlJFQUs6IFwibG9uZ2JyZWFrXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGFjdGl2ZSBwb21vIHdvcmsgdGltZSAqL1xuICBBQ1RJVkU6IFwiYWN0aXZlXCIsXG4gIC8qKiB3aGVuIHRoZSB1c2VyIG1hcmtzIHRoaXMgcG9tbyBzZXNzaW9uIGFzIGNvbXBsZXRlLCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGFza3MgYXJlIGNvbXBsZXRlZCBvciBub3QgKi9cbiAgQ09NUExFVEU6IFwiY29tcGxldGVcIixcbn07XG5cbmV4cG9ydCBjbGFzcyBQb21vU2Vzc2lvbiB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgUG9tbyBTZXNzaW9uIG9iamVjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgLSBpZCBvZiB0aGlzIHNlc3Npb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKGlkKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIC8qKiBAdHlwZSB7VGFza1tdfSAtIGEgbGlzdCBvZiBhbGwgdGFza3MgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc2Vzc2lvbiAqL1xuICAgIHRoaXMuYWxsVGFza3MgPSBbXTtcbiAgICAvKiogQHR5cGUge3N0cmluZ30gLSB0aGUgY3VycmVudCBtb2RlIG9mIHRoZSBwb21vIHNlc3Npb24gKi9cbiAgICB0aGlzLm1vZGUgPSBQT01PX1NFU1NJT05fTU9ERVMuSU5BQ1RJVkU7XG4gICAgLyoqIEB0eXBlIHtOdW1iZXJ9IC0gdGhlIGN1cnJlbnQgdGltZSBvZiB0aGUgcG9tbyBzZXNzaW9uICovXG4gICAgdGhpcy50aW1lID0gMDtcblxuICAgIC8qKiBAdHlwZSB7TnVtYmVyfSAtIG51bWJlciBvZiBwb21vcyBlbGFwc2VkIHN1Y2Nlc2Z1bGx5IGZvciB0aGlzIHBvbW8gc2Vzc2lvbiAqL1xuICAgIHRoaXMucG9tb3NFbGFwc2VkID0gMDtcblxuICAgIHRoaXMuc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgfVxuICAvKipcbiAgICogXG4gICAqIEByZXR1cm5zIHtUYXNrIHwgbnVsbCB9IC0gdGhlIGN1cnJlbnQgdGFzayBmb3IgdGhpcyBwb21vIHNlc3Npb24gb3IgbnVsbCBpZiB0aGVyZSBhcmUgbm8gdGFza3MgbGVmdFxuICAgKi9cbiAgY3VycmVudFRhc2soKSB7XG4gICAgbGV0IGFsbEluUHJvZ3Jlc3NUYXNrcyA9IHRoaXMuYWxsVGFza3MuZmlsdGVyKCh0YXNrKSA9PiAhdGFzay5jb21wbGV0ZWQpO1xuICAgIGlmIChhbGxJblByb2dyZXNzVGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gYWxsSW5Qcm9ncmVzc1Rhc2tzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIG5ldyB0YXNrXG4gICAqIEBwYXJhbSB7VGFza30gdGFzayBcbiAgICovXG4gIGFkZFRhc2sodGFzaykge1xuICAgIHN0b3JlVGFzayh0YXNrKTtcbiAgICB0aGlzLmFsbFRhc2tzLnB1c2godGFzayk7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHRhc2tcbiAgICogQHBhcmFtIHtUYXNrfSB0YXNrIFxuICAgKi9cbiAgZGVsZXRlVGFzayh0YXNrKSB7XG4gICAgZGVsZXRlVGFza0J5VGFza0lEKHRhc2suaWQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hbGxUYXNrcy5sZW5ndGg7IGkrKyl7XG4gICAgICBjb25zdCBzdG9yZWRUYXNrID0gdGhpcy5hbGxUYXNrc1tpXTtcbiAgICAgIGlmICh0YXNrLmlkID09PSBzdG9yZWRUYXNrLmlkKSB7XG4gICAgICAgIHRoaXMuYWxsVGFza3Muc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlcyB0aGUgZ2l2ZW4gdGFzayBhc3NvY2lhdGVkIHRvIHRoZSBpZFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGNvbXBsZXRlZCwgZmFsc2UgaWYgbm8gdGFzayBmb3VuZFxuICAgKi9cbiAgY29tcGxldGVUYXNrKGlkKSB7XG4gICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLmFsbFRhc2tzKSB7XG4gICAgICBpZiAodGFzay5pZCA9PT0gaWQpIHtcbiAgICAgICAgdGFzay5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBuZXh0IGluY29tcGxldGUgdGFzayBpbiB0aGUgb3JkZXIgb3IgbnVsbCBpZiBhbGwgY29tcGxldGVkXG4gICAqIEByZXR1cm5zIHtUYXNrIHwgbnVsbH1cbiAgICovXG4gIGdldE5leHRUYXNrKCkge1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0aGlzLmFsbFRhc2tzKSB7XG4gICAgICBpZiAodGFzay5jb21wbGV0ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKipcbiAgICogSW5jcmVtZW50IHRoZSBwb21vcyB1c2VkIGZvciBhIHRhc2sgYW5kIGluY3JlbWVudCBwb21vc0VsYXBzZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICAgKi9cbiAgaW5jcmVtZW50VGFza1BvbW9zVXNlZChpZCkge1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0aGlzLmFsbFRhc2tzKSB7XG4gICAgICBpZiAodGFzay5pZCA9PT0gaWQpIHtcbiAgICAgICAgdGFzay5wb21vc1VzZWQgKz0gMTtcbiAgICAgICAgdGhpcy5wb21vc0VsYXBzZWQgKz0gMTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcbiAgICogQHJldHVybnMgdHJ1ZSBpZiBzZXNzaW9uIGlzIGluIGJyZWFrIG1vZGUgcmlnaHQgbm93LCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGlzQnJlYWsoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkxPTkdfQlJFQUsgfHwgdGhpcy5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuQlJFQUs7XG4gIH1cblxuICAvKipcbiAgICogVE9ET1xuICAgKi9cbiAgcmVvcmRlclRhc2tzKCkge1xuXG4gIH1cblxuICBnZXRQb21vc0xlZnRJblNlc3Npb24oKSB7XG4gICAgbGV0IGxlZnQgPSAwO1xuICAgIHRoaXMuYWxsVGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgbGVmdCArPSBNYXRoLm1heCh0YXNrLnBvbW9zUmVxdWlyZWQgLSB0YXNrLnBvbW9zVXNlZCwgMCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH1cbiAgcGFyc2VTZXNzaW9uRnJvbU9iaihzZXNzaW9uX29iaikge1xuICAgIHRoaXMuaWQgPSBzZXNzaW9uX29iai5pZDtcbiAgICB0aGlzLm1vZGUgPSBzZXNzaW9uX29iai5tb2RlO1xuICAgIHRoaXMudGltZSA9IHNlc3Npb25fb2JqLnRpbWU7XG4gICAgdGhpcy5wb21vc0VsYXBzZWQgPSBzZXNzaW9uX29iai5wb21vc0VsYXBzZWQ7XG4gICAgdGhpcy5zdGFydERhdGUgPSBuZXcgRGF0ZShzZXNzaW9uX29iai5zdGFydERhdGUpO1xuICAgIHRoaXMuYWxsVGFza3MgPSBzZXNzaW9uX29iai5hbGxUYXNrcy5tYXAoKHRhc2tPYmopID0+IHtcbiAgICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICAgIHQgPSB0LnBhcnNlVGFza0Zyb21PYmoodGFza09iaik7XG4gICAgICByZXR1cm4gdDtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXJpYWxpemVJbnRvT2JqKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCwgYWxsVGFza3M6IHRoaXMuYWxsVGFza3MubWFwKCh0YXNrKSA9PiB0YXNrLnNlcmlhbGl6ZUludG9PYmooKSksIG1vZGU6IHRoaXMubW9kZSwgdGltZTogdGhpcy50aW1lLCBwb21vc0VsYXBzZWQ6IHRoaXMucG9tb3NFbGFwc2VkLCBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlLmdldFRpbWUoKVxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYSBwb21vIHNlc3Npb24gb2JqZWN0XG4gKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gKiBAcmV0dXJucyB7UG9tb1Nlc3Npb24gfCBudWxsfSB0aGUgc2Vzc2lvbiBmb3IgdGhpcyBpZCBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHNlc3Npb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBvbW9TZXNzaW9uKGlkKSB7XG4gIGNvbnN0IGFsbFNlc3Npb25zID0gZ2V0T2JqZWN0KFBPTU9fU0VTU0lPTl9NQVApO1xuICBsZXQgcCA9IG5ldyBQb21vU2Vzc2lvbigpO1xuICBpZiAoIWFsbFNlc3Npb25zW2lkXSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBwLnBhcnNlU2Vzc2lvbkZyb21PYmooYWxsU2Vzc2lvbnNbaWRdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlUG9tb1Nlc3Npb24oc2Vzc2lvbikge1xuICBjb25zdCBhbGxTZXNzaW9ucyA9IGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKTtcbiAgYWxsU2Vzc2lvbnNbc2Vzc2lvbi5pZF0gPSBzZXNzaW9uLnNlcmlhbGl6ZUludG9PYmooKTtcbiAgc3RvcmVPYmplY3QoUE9NT19TRVNTSU9OX01BUCwgYWxsU2Vzc2lvbnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV3U2Vzc2lvbklEKCkge1xuICBsZXQgcHJldklEID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oUE9NT19TRVNTSU9OX0lEKSk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCwgcHJldklEICsgMSk7XG4gIHJldHVybiBwcmV2SUQ7XG59XG5cbi8qKlxuICogU2V0IHRoZSBjdXJyZW50IHNlc3Npb24ncyBzdGF0dXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgLSBjYW4gYmUgXCJjb21wbGV0ZVwiIG9yIFwiaW4tcHJvZ3Jlc3NcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNlc3Npb25TdGF0dXMoc3RhdHVzKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTLCBzdGF0dXMpO1xufVxuXG4vKipcbiAqIFdpbGwgcmV0dXJuIHRoZSBzZXNzaW9uIElEIG9mIHRoZSBsYXN0IHNlc3Npb24gaWYgaXQgd2FzIG5vdCBlbmRlZC4gT3RoZXJ3aXNlIGlmIHRoZSBsYXN0IHNlc3Npb24gZG9lcyBub3QgZXhpc3QgXG4gKiBvciB3YXMgZW5kZWQgYWxyZWFkeSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIG51bGxcbiAqIFxuICogQHJldHVybnMge251bWJlciB8IG51bGx9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXRlc3RTZXNzaW9uSUQoKSB7XG4gIGxldCBzdGF0dXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUyk7XG4gIGlmIChzdGF0dXMgPT09IFwiY29tcGxldGVcIikge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQT01PX1NFU1NJT05fSUQpKSAtIDE7XG4gIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSB0cnVlIGlmIHRoZXJlIGlzIGEgdW5maW5pc2hlZCBzZXNzaW9uIHRoYXQgd2FzIG5vdCBjb21wbGV0ZWQgb3IgcXVpdHRlZC4gZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aGVyZUlzVW5maW5pc2hlZFNlc3Npb24oKSB7XG4gIGxldCBzZXNzaW9uSUQgPSBnZXRMYXRlc3RTZXNzaW9uSUQoKTtcbiAgaWYgKHNlc3Npb25JRCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICBsZXQgY3VycmVudFBvbW9TZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24oc2Vzc2lvbklEKTtcbiAgaWYgKGN1cnJlbnRQb21vU2Vzc2lvbiAhPT0gbnVsbCAmJiBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSAhPT0gUE9NT19TRVNTSU9OX01PREVTLkNPTVBMRVRFICYmIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlICE9PSBQT01PX1NFU1NJT05fTU9ERVMuSU5BQ1RJVkUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250aW51ZUFjdGl2ZVNlc3Npb24oKSB7XG4gIGlmICh0aGVyZUlzVW5maW5pc2hlZFNlc3Npb24oKSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3RpbWVyLmh0bWw/bG9hZFNhdmVkPXRydWVcIjtcbiAgfVxufSIsImltcG9ydCB7IGdldE9iamVjdCwgc3RvcmVPYmplY3QgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHsgZ2V0TGF0ZXN0U2Vzc2lvbklELCBnZXRQb21vU2Vzc2lvbiB9IGZyb20gXCIuL3Nlc3Npb25cIjtcblxuZXhwb3J0IGNsYXNzIFRhc2sge1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzZXNzaW9uSUQgXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjcmlwdGlvbiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9tb3NSZXF1aXJlZCBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uSUQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcG9tb3NSZXF1aXJlZCkge1xuICAgICAgICB0aGlzLnNlc3Npb25JRCA9IHNlc3Npb25JRDtcbiAgICAgICAgdGhpcy5pZCA9IC0xO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5wb21vc1JlcXVpcmVkID0gcG9tb3NSZXF1aXJlZDtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wb21vc1VzZWQgPSAwO1xuICAgIH1cbiAgICBwYXJzZVRhc2tGcm9tT2JqKHRhc2tfb2JqKSB7XG4gICAgICAgIGxldCB0YXNrID0gbmV3IFRhc2sodGFza19vYmouc2Vzc2lvbklELCB0YXNrX29iai50aXRsZSwgdGFza19vYmouZGVzY3JpcHRpb24sIHRhc2tfb2JqLnBvbW9zUmVxdWlyZWQpO1xuICAgICAgICB0YXNrLmNvbXBsZXRlZCA9IHRhc2tfb2JqLmNvbXBsZXRlZDtcbiAgICAgICAgdGFzay5pZCA9IHRhc2tfb2JqLmlkO1xuICAgICAgICB0YXNrLnBvbW9zVXNlZCA9IHRhc2tfb2JqLnBvbW9zVXNlZDtcbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIHNlcmlhbGl6ZUludG9PYmooKSB7XG4gICAgICAgIHJldHVybiB7IHRpdGxlOiB0aGlzLnRpdGxlLCBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwgcG9tb3NSZXF1aXJlZDogdGhpcy5wb21vc1JlcXVpcmVkLCBjb21wbGV0ZWQ6IHRoaXMuY29tcGxldGVkLCBwb21vc1VzZWQ6IHRoaXMucG9tb3NVc2VkLCBpZDogdGhpcy5pZCwgc2Vzc2lvbklEOiB0aGlzLnNlc3Npb25JRCB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IFBPTU9fVEFTS19NQVAgPSBcInBvbW9fdGFza19tYXBcIjtcbmV4cG9ydCBjb25zdCBQT01PX1RBU0tfSU5ERVggPSBcInBvbW9fdGFza19pbmRleFwiO1xuXG4vKipcbiAqIFdpbGwgc3RvcmUgYSBuZXcgb3IgdXBkYXRlZCB0YXNrIGludG8gbG9jYWwgc3RvcmFnZVxuICogXG4gKiBIYXMgYSBzaWRlIGVmZmVjdCBvZiBhZGRpbmcgdGhlIGlkIG9mIHRoZSBuZXcgdGFzayBpZiBpdCB3YXNudCBzdG9yZWQgaW4gc3RvcmFnZSBiZWZvcmVcbiAqIFxuICogQHBhcmFtIHtUYXNrfSB0YXNrXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHRoZSBpZCBvZiB0aGUgdGFza1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVUYXNrKHRhc2spIHtcbiAgICBsZXQgdGFza19tYXAgPSBnZXRPYmplY3QoUE9NT19UQVNLX01BUCk7XG4gICAgaWYgKCF0YXNrX21hcFt0YXNrLmlkXSkge1xuICAgICAgICAvLyBpZiB0YXNrIG1hcCBkb2VzIG5vdCBoYXZlIHRoaXMgdGFzaywgY3JlYXRlIGEgbmV3IGluZGV4XG4gICAgICAgIGxldCBpZCA9IHBhcnNlSW50KGdldE9iamVjdChQT01PX1RBU0tfSU5ERVgpKTtcbiAgICAgICAgdGFzay5pZCA9IGlkO1xuICAgICAgICAvLyBpbmNyZW1lbnQgZ2xvYmFsIGlkXG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19JTkRFWCwgaWQgKyAxKTtcbiAgICB9XG4gICAgbGV0IG9iaiA9IHRhc2suc2VyaWFsaXplSW50b09iaigpO1xuICAgIHRhc2tfbWFwW3Rhc2suaWRdID0gb2JqO1xuICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19NQVAsIHRhc2tfbWFwKTtcbiAgICByZXR1cm4gdGFzay5pZDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAqIEByZXR1cm5zIHtUYXNrfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFzayhpZCkge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBsZXQgdGFza19vYmogPSB0YXNrX21hcFtpZF07XG4gICAgbGV0IHQgPSBuZXcgVGFzaygpO1xuICAgIHQgPSB0LnBhcnNlVGFza0Zyb21PYmoodGFza19vYmopO1xuICAgIHJldHVybiB0O1xuXG59XG4vKipcbiAqIEdldCBhbGwgdGFza3NcbiAqIFxuICogQHJldHVybnMge01hcDxudW1iZXIsIFRhc2s+fSAtIGEgbWFwIGZyb20gdGFzayBpZCB0byB0YXNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxUYXNrcygpIHtcbiAgICBsZXQgdGFza19tYXAgPSBnZXRPYmplY3QoUE9NT19UQVNLX01BUCk7XG4gICAgbGV0IHBhcnNlZF90YXNrX21hcCA9IHt9O1xuICAgIGZvciAobGV0IGlkIGluIHRhc2tfbWFwKSB7XG4gICAgICAgIGxldCB0YXNrX29iaiA9IHRhc2tfbWFwW2lkXTtcbiAgICAgICAgbGV0IHQgPSBuZXcgVGFzaygpO1xuICAgICAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tfb2JqKTtcbiAgICAgICAgcGFyc2VkX3Rhc2tfbWFwW2lkXSA9IHQ7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRfdGFza19tYXA7XG59XG5cbi8qKlxuICogRGVsZXRlIGEgc3BlY2lmaWMgdGFzayBmcm9tIGRhdGFiYXNlIGJ5IHRoZSB1bmlxdWUgdGFzayBJRFxuICogXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVUYXNrQnlUYXNrSUQoaWQpIHtcbiAgICBsZXQgdGFza19tYXAgPSBnZXRPYmplY3QoUE9NT19UQVNLX01BUCk7XG4gICAgZGVsZXRlIHRhc2tfbWFwW2lkXTtcbiAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB0YXNrX21hcCk7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlcmUgYXJlIGFueSB1bmZpbmlzaGVkIHRhc2tzIGZyb20gdGhlIHByZXZpb3VzIHNlc3Npb25cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIHRydWUgaWYgdW5pZmluaXNoZWQgdGFza3MgZXhpc3QsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJlVGhlcmVVbmZpbmlzaGVkVGFza3NGcm9tTGFzdFNlc3Npb24oKSB7XG4gICAgbGV0IG9sZFNlc3Npb25JRCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgIGlmIChvbGRTZXNzaW9uSUQgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2Vzc2lvbiA9IGdldFBvbW9TZXNzaW9uKG9sZFNlc3Npb25JRCk7XG4gICAgaWYgKHNlc3Npb24gPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoc2Vzc2lvbi5jdXJyZW50VGFzaygpID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvKipcbiAqIFdpbGwgcmFuZG9tbHkgcGljayBhIHRoZW1lIGFuZCB1bmlxdWUgYmFja2dyb3VuZCBkZXBlbmRpbmcgb24gd2hhdCBkYXkgaXQgaXMgYW5kIHdoYXQgdGltZSBpdCBpcyBhbmQgc2V0IGl0IG9uIHRoZSBwYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RBbmRTZXRUaGVtZSh0b2RheSA9IG5ldyBEYXRlKCkpIHtcbiAgbGV0IGlkID0gMDtcbiAgbGV0IG51bUJHcyA9IDY7XG5cbiAgbGV0IGQgPSB0b2RheS5nZXREYXkoKTtcblxuICBsZXQgc2VlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYmctc2VlZFwiKTtcblxuICBpZiAoc2VlZCA9PT0gbnVsbCB8fCBzZWVkWzBdICE9IGQpIHtcbiAgICBzZWVkID0gZCArIFwiLVwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtQkdzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImJnLXNlZWRcIiwgc2VlZCk7XG4gIH1cbiAgbGV0IHRpbWVQZXJpb2QgPSBnZXRUaGVtZU1vZGUodG9kYXkpO1xuICBpZCA9IHBhcnNlSW50KHNlZWRbMl0pO1xuXG4gIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZHJvcFwiKTtcbiAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmRzLyR7dGltZVBlcmlvZH0vYmcke2lkfS5qcGdcIilgO1xufTtcblxuZXhwb3J0IGNvbnN0IFRIRU1FX01PREVTID0ge1xuICBEQVk6IFwiZGF5XCIsXG4gIE5JR0hUOiBcIm5pZ2h0XCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhlbWVNb2RlKHRvZGF5ID0gbmV3IERhdGUoKSkge1xuICBsZXQgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLkRBWTtcbiAgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCA0KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLk5JR0hUO1xuICB9XG4gIGVsc2UgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCAxOCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5EQVk7XG4gIH0gZWxzZSBpZiAodG9kYXkuZ2V0SG91cnMoKSA8IDI0KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLk5JR0hUO1xuICB9XG4gIHJldHVybiB0aW1lUGVyaW9kO1xufSIsIi8vIHByb2R1Y3QtaXRlbS5qc1xuXG5pbXBvcnQgeyBnZXRUaGVtZU1vZGUsIFRIRU1FX01PREVTIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3RoZW1lXCI7XG5cbi8qKlxuICogQGNsYXNzIEJ1dHRvblxuICogXG4gKiBBIGJ1dHRvbiBjb21wb25lbnQgd2l0aCAzIHR5cGVzLCBub3JtYWwsIG91dGxpbmUsIGFuZCBuYXYgc3BlY2lmaWVkIHdpdGggdGhlIHR5cGUgYXR0cmlidXRlXG4gKiBcbiAqIEl0IGFsc28gaGFzIHR3byBzaXplcywgXCJzbWFsbFwiIGFuZCBcIm5vcm1hbFwiIHNwZWNpZmllZCBieSB0aGUgc2l6ZSBhdHRyaWJ1dGVcbiAqL1xuY2xhc3MgQnV0dG9uIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyB1c2UgYW4gb2JqZWN0IHRvIHN0b3JlIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGUgY29tcG9uZW50cyBmb3IgY29udmVuaWVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IHt9O1xuXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgc2hhZG93IHJvb3RcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTsgLy8gc2V0cyBhbmQgcmV0dXJucyAndGhpcy5zaGFkb3dSb290J1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBleGFtcGxlIGVsZW1lbnQgdGhhdCB3aWxsIHNlcnZlIGFzIG91ciBcInJvb3RcIiBlbGVtZW50IGhlcmVcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgLy8gc2V0IGNsYXNzIGFzIGFuIGV4YW1wbGUsIHRoaXMgY2FuIGJlIGxhdGVyIHVzZWQgZm9yIGNzcyFcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1idXR0b25cIik7XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSB0aGlzLnRleHRDb250ZW50IHx8IFwiXCI7XG5cbiAgICAgICAgLy8gc3RvcmUgaXQgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b24gPSBidXR0b247XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJwYXJ0XCIsIFwiYnV0dG9uXCIpO1xuICAgICAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIC8vIEFkZCBTdHlsZXNcbiAgICAgICAgY29uc3QgbGlua0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgdGhlIGNvcnJlY3Qgc3R5bGVzaGVldCB3aXRoIHRoZSBjb3JyZWN0IHN0eWxpbmdzXG4gICAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIuL2Fzc2V0cy9zdHlsZXMvYnV0dG9uLmNzc1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgY3JlYXRlZCBlbGVtZW50cyB0byB0aGUgc2hhZG93IERPTVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKGxpbmtFbGVtLCBidXR0b24pO1xuXG4gICAgICAgIHRoaXMudHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcIm91dGxpbmVcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5lbGVtZW50cy5idXR0b24uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgKyBcIiBvdXRsaW5lXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSBcIm5hdlwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSArIFwiIG5hdlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwic2l6ZVwiKTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gXCJzbWFsbFwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSArIFwiIHNtYWxsXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2l6ZSA9PT0gXCJ0aW55XCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuZWxlbWVudHMuYnV0dG9uLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpICsgXCIgdGlueVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0aGVtZU1vZGUgPSBnZXRUaGVtZU1vZGUoKTtcbiAgICAgICAgaWYgKHRoZW1lTW9kZSA9PT0gVEhFTUVfTU9ERVMuTklHSFQgJiYgdGhpcy5nZXRBdHRyaWJ1dGUoXCJub2RhcmtcIikgIT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmVsZW1lbnRzLmJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSArIFwiIGRhcmtcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInBvbW8tYnV0dG9uXCIsIEJ1dHRvbik7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyB1c2UgYW4gb2JqZWN0IHRvIHN0b3JlIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGUgY29tcG9uZW50cyBmb3IgY29udmVuaWVuY2VcbiAgICB0aGlzLmVsZW1lbnRzID0ge307XG4gICAgLy8gQ3JlYXRlIGEgc2hhZG93IHJvb3RcbiAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pOyAvLyBzZXRzIGFuZCByZXR1cm5zICd0aGlzLnNoYWRvd1Jvb3QnXG5cbiAgICAvLyBDcmVhdGUgYW4gZXhhbXBsZSBlbGVtZW50IHRoYXQgd2lsbCBzZXJ2ZSBhcyBvdXIgXCJyb290XCIgZWxlbWVudCBoZXJlXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5lbGVtZW50cy53cmFwcGVyID0gd3JhcHBlcjtcbiAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtb2RhbC13cmFwcGVyXCIpO1xuICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5pbm5lckhUTUwgPSBcIjxkaXYgY2xhc3M9XFxcInNoYWRvd1xcXCI+PC9kaXY+PGRpdiBjbGFzcz1cXFwibW9kYWxcXFwiPjwvZGl2PlwiO1xuXG4gICAgLy8gQWRkIFN0eWxlc1xuICAgIGNvbnN0IGxpbmtFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAvLyBtYWtlIHN1cmUgdG8gbGluayB0aGUgY29ycmVjdCBzdHlsZXNoZWV0IHdpdGggdGhlIGNvcnJlY3Qgc3R5bGluZ3NcbiAgICBsaW5rRWxlbS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiLi9hc3NldHMvc3R5bGVzL21vZGFsLmNzc1wiKTtcbiAgICB0aGlzLmVsZW1lbnRzLmxpbmtFbGVtID0gbGlua0VsZW07XG4gICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChsaW5rRWxlbSk7XG4gIH1cblxuICBkaXNwbGF5TW9kYWwoKSB7XG4gICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgfSwgMjApO1xuICB9XG4gIGhpZGVNb2RhbCgpIHtcbiAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH0sIDQwMCk7XG4gICAgXG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIik7XG5cbiAgICBsZXQgY2hpbGQxID0gdGhpcy5jaGlsZE5vZGVzO1xuICAgIGxldCBodG1sU3RyaW5nID0gXCJcIjtcbiAgICBjaGlsZDEuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmKGVsZW1lbnQubm9kZVR5cGUgIT0gTm9kZS5URVhUX05PREUpXG4gICAgICAgIGh0bWxTdHJpbmcgKz0gZWxlbWVudC5vdXRlckhUTUw7XG4gICAgfSk7XG4gICAgXG4gICAgLy9jb3B5IGh0bWwgZWxlbWVudHMgdG8gc2hhZG93IGRvbVxuICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInNoYWRvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbFwiPiR7aHRtbFN0cmluZ308L2Rpdj5gO1xuICAgIFxuICAgIC8vcmVtb3ZlIGV4dHJhIGh0bWwgZWxlbWVudHMgbGVmdFxuICAgIGxldCBuID0gY2hpbGQxLmxlbmd0aDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKVxuICAgICAgdGhpcy5yZW1vdmVDaGlsZChjaGlsZDFbMF0pO1xuICAgIFxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLndyYXBwZXIpO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInBvbW8tbW9kYWxcIiwgTW9kYWxDb21wb25lbnQpOyIsImltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24sIFBPTU9fU0VTU0lPTl9NT0RFUywgc3RvcmVQb21vU2Vzc2lvbiB9IGZyb20gXCIuLi8uLi9kYXRhYmFzZS9zZXNzaW9uXCI7XG5cbi8qKlxuICogSGVhZGVyIGNsYXNzIHRvIGNyZWF0ZSBhIHdlYiBjb21wb25lbnQgaW1wbGVtZW50aW5nIHRoZSBmdW5jdGlvbmFsaXR5IG9mIG91ciBoZWFkZXIgYmFyLlxuICogXG4gKiBAYXV0aG9ycyBFdGhhbiBIdXluaCwgS2V2aW4gS2xpbWVrXG4gKiBAdG9kbyBSZWZhY3RvciBidXR0b25zIHRvIG9uQ2xpY2sgZXZlbnRzIGluc3RlYWQgb2Ygc2ltcGx5IGFwcGVuZGluZyB0byBhIGxpbmsgZWxlbWVudCxcbiAqICAgICAgIEltcGxlbWVudCBoZWxwIGJ1dHRvbiB3aGVuIE1vZGFsIGNvbXBvbmVudCBpcyBtZXJnZWRcbiAqL1xuY29uc3QgSEVMUF9URVhUID0gXCJUaGUgUG9tb2Rvcm8gVGVjaG5pcXVlIGlzIGEgdGltZSBtYW5hZ2VtZW50IG1ldGhvZCBkZXZlbG9wZWQgYnkgRnJhbmNlc2NvIENpcmlsbG8gaW4gdGhlIGxhdGUgMTk4MHMuIFRoZSB0ZWNobmlxdWUgdXNlcyBhIHRpbWVyIHRvIGJyZWFrIGRvd24gd29yayBpbnRvIGludGVydmFscywgdHJhZGl0aW9uYWxseSAyNSBtaW51dGVzIGluIGxlbmd0aCwgc2VwYXJhdGVkIGJ5IHNob3J0IGJyZWFrcy4gRWFjaCBpbnRlcnZhbCBpcyBrbm93biBhcyBhIHBvbW9kb3JvLCBmcm9tIHRoZSBJdGFsaWFuIHdvcmQgZm9yICd0b21hdG8nLCBhZnRlciB0aGUgdG9tYXRvLXNoYXBlZCBraXRjaGVuIHRpbWVyIHRoYXQgQ2lyaWxsbyB1c2VkIGFzIGEgdW5pdmVyc2l0eSBzdHVkZW50LlwiOyBcbmNsYXNzIEhlYWRlciBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gdXNlIGFuIG9iamVjdCB0byBzdG9yZSBhbGwgcmVsZXZhbnQgZWxlbWVudHMgdG8gdGhlIGNvbXBvbmVudHMgZm9yIGNvbnZlbmllbmNlXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB7fTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzaGFkb3cgcm9vdFxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pOyAvLyBzZXRzIGFuZCByZXR1cm5zICd0aGlzLnNoYWRvd1Jvb3QnXG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGV4YW1wbGUgZWxlbWVudCB0aGF0IHdpbGwgc2VydmUgYXMgb3VyIFwicm9vdFwiIGVsZW1lbnQgaGVyZVxuICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm5hdlwiKTtcbiAgICAgICAgLy8gc2V0IGNsYXNzIGFzIGFuIGV4YW1wbGUsIHRoaXMgY2FuIGJlIGxhdGVyIHVzZWQgZm9yIGNzcyFcbiAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBvbW8taGVhZGVyXCIpO1xuXG4gICAgICAgIGxldCBsb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgbG9nby5zcmMgPSBcIi4vYXNzZXRzL3N2Z0ltYWdlcy9sb2dvLnN2Z1wiO1xuICAgICAgICBsb2dvLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicG9tby1oZWFkZXIgbG9nb1wiKTtcblxuICAgICAgICBsZXQgaG9tZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgaG9tZUxpbmsuaHJlZj1cImluZGV4Lmh0bWxcIjtcbiAgICAgICAgaG9tZUxpbmsuaWQgPSBcImhvbWUtYnRuXCI7XG5cbiAgICAgICAgaG9tZUxpbmsuYXBwZW5kQ2hpbGQobG9nbyk7XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaG9tZUxpbmspO1xuXG4gICAgICAgIC8qKiBGb3IgZm9sbG93aW5nIGxpbmtzIGluIGFuIGV2ZW50bGlzdGVuZXJcbiAgICAgICAgICogIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vd3d3Lnczc2Nob29scy5jb21cIjtcbiAgICAgICAgICogIG9yIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgICAgICogIG9yIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlIGlmIHdlIGRvbid0IHdhbnQgdG8gYWRkIHRvIGhpc3RvcnlcbiAgICAgICAgICovXG5cbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgKz0gXCI8YSBpZD1cXFwiaGlzdC1idG5cXFwiIGhyZWY9XFxcImhpc3RvcnkuaHRtbFxcXCI+PHBvbW8tYnV0dG9uIHR5cGU9XFxcIm5hdlxcXCIgaWQ9XFxcImhpc3RcXFwiPkhpc3Rvcnk8L3BvbW8tYnV0dG9uPjwvYT5cIjtcblxuICAgICAgICB3cmFwcGVyLmlubmVySFRNTCArPSBcIjxwb21vLWJ1dHRvbiB0eXBlPVxcXCJuYXZcXFwiIGlkPVxcXCJoZWxwXFxcIj5IZWxwPC9wb21vLWJ1dHRvbj5cIjtcbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgKz0gYDxwb21vLW1vZGFsIGlkPVwibW9kYWwtaGVscFwiPiAgXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibW9kYWwtY2xvc2VcIiBjbGFzcz1cImNsb3NlLWJ0blwiPng8L2J1dHRvbj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGl0bGVcIj5XaGF0J3MgYSBQb21vIFRpbWVyPzwvcD5cbiAgICAgICAgICAgIDxwPiR7SEVMUF9URVhUfTwvcD5cbiAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qb21vZG9yb19UZWNobmlxdWVcIj5XaWtpcGVkaWE8L2E+XG4gICAgICAgIDwvcG9tby1tb2RhbD5gO1xuXG4gICAgICAgIC8vIHN0b3JlIGl0IGZvciBlYXN5IGFjY2Vzc1xuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIgPSB3cmFwcGVyO1xuXG4gICAgICAgIC8vIEFkZCBTdHlsZXNcbiAgICAgICAgY29uc3QgbGlua0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgbGlua0VsZW0uc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgdGhlIGNvcnJlY3Qgc3R5bGVzaGVldCB3aXRoIHRoZSBjb3JyZWN0IHN0eWxpbmdzXG4gICAgICAgIGxpbmtFbGVtLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIuL2Fzc2V0cy9zdHlsZXMvaGVhZGVyLmNzc1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5saW5rRWxlbSA9IGxpbmtFbGVtO1xuXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgY3JlYXRlZCBlbGVtZW50cyB0byB0aGUgc2hhZG93IERPTVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKGxpbmtFbGVtLCB3cmFwcGVyKTtcblxuICAgICAgICBsZXQgbW9kYWwgPSB3cmFwcGVyLmNoaWxkTm9kZXNbM107XG4gICAgICAgIG1vZGFsLmVsZW1lbnRzLndyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBsZXQgaGVscEJ0biA9IHdyYXBwZXIuY2hpbGROb2Rlc1syXTtcbiAgICAgICAgbGV0IGNsb3NlQnRuID0gbW9kYWwuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNsb3NlXCIpO1xuICAgICAgICBoZWxwQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZGFsLmRpc3BsYXlNb2RhbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNsb3NlQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZGFsLmhpZGVNb2RhbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNoZWNrUG9tb1Nlc3Npb25Nb2RlQmVmb3JlTGVhdmluZyA9IChlKSA9PiB7XG4gICAgICAgICAgICAvLyBwcmV2ZW50IG1vdmluZyB0byBuZXcgcGFnZSBpZiBjdXJyZW50IHBvbW8gc2Vzc2lvbiBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgICAgIGxldCBpZCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgICAgICAgICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvbW9TZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24oaWQpO1xuICAgICAgICAgICAgICAgIGlmIChwb21vU2Vzc2lvbi5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuQUNUSVZFIHx8IHBvbW9TZXNzaW9uLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLIHx8IHBvbW9TZXNzaW9uLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5CUkVBSykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oXCJBcmUgeW91IHN1cmUgd2FudCB0byBsZWF2ZT8gVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgY29tcGxldGUgeW91ciBzZXNzaW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGV5IGRvIGxlYXZlLCBtYWtlIHN1cmUgdG8gdXBkYXRlIHRoZSBzZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNIQU5HRVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbW9TZXNzaW9uLm1vZGUgPSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVBvbW9TZXNzaW9uKHBvbW9TZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdldFBvbW9TZXNzaW9uKHBvbW9TZXNzaW9uLmlkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJoaXN0LWJ0blwiKS5vbmNsaWNrID0gY2hlY2tQb21vU2Vzc2lvbk1vZGVCZWZvcmVMZWF2aW5nO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJob21lLWJ0blwiKS5vbmNsaWNrID0gY2hlY2tQb21vU2Vzc2lvbk1vZGVCZWZvcmVMZWF2aW5nO1xuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwicG9tby1oZWFkZXJcIiwgSGVhZGVyKTsiXSwic291cmNlUm9vdCI6IiJ9