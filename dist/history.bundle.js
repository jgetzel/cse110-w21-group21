(()=>{"use strict";var e={409:(e,t,o)=>{o.d(t,{xN:()=>r,RL:()=>n,RK:()=>i});var s=o(594),a=o(771);function r(){var e=!1;null===i(s.Rd)&&(e=!0),null===i(s.oi)&&(e=!0),null===!localStorage.getItem(a.Do)&&(e=!0),null===!localStorage.getItem(a.mn)&&(e=!0),null===i(a.XB)&&(e=!0),e&&(n(s.Rd,{}),n(s.oi,0),n(a.mn,"complete"),n(a.Do,0),n(a.XB,{}))}function n(e,t){localStorage.setItem(e,JSON.stringify(t))}function i(e){return JSON.parse(localStorage.getItem(e))}},771:(e,t,o)=>{o.d(t,{Do:()=>l,mn:()=>d,XB:()=>c,rA:()=>u,_c:()=>h,RU:()=>p});var s=o(409),a=o(594);function r(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var s=0,a=function(){};return{s:a,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,r=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw r}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,s=new Array(t);o<t;o++)s[o]=e[o];return s}function i(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var l="pomo_session_id",d="latest_pomo_session_status",c="pomo_session_map",u={INACTIVE:"inactive",BREAK:"break",LONG_BREAK:"longbreak",ACTIVE:"active",COMPLETE:"complete"},m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.allTasks=[],this.mode=u.INACTIVE,this.time=0,this.pomosElapsed=0,this.startDate=new Date}var t,o;return t=e,(o=[{key:"currentTask",value:function(){var e=this.allTasks.filter((function(e){return!e.completed}));return e.length>0?e[0]:null}},{key:"addTask",value:function(e){(0,a.rs)(e),this.allTasks.push(e)}},{key:"deleteTask",value:function(e){(0,a.c_)(e.id);for(var t=0;t<this.allTasks.length;t++){var o=this.allTasks[t];if(e.id===o.id)return void this.allTasks.splice(t,1)}}},{key:"completeTask",value:function(e){var t,o=r(this.allTasks);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.id===e)return s.completed=!0,!0}}catch(e){o.e(e)}finally{o.f()}return!1}},{key:"getNextTask",value:function(){var e,t=r(this.allTasks);try{for(t.s();!(e=t.n()).done;){var o=e.value;if(!1===o.completed)return o}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"incrementTaskPomosUsed",value:function(e){var t,o=r(this.allTasks);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.id===e)return s.pomosUsed+=1,void(this.pomosElapsed+=1)}}catch(e){o.e(e)}finally{o.f()}}},{key:"isBreak",value:function(){return this.mode===u.LONG_BREAK||this.mode===u.BREAK}},{key:"reorderTasks",value:function(){}},{key:"getPomosLeftInSession",value:function(){var e=0;return this.allTasks.forEach((function(t){e+=Math.max(t.pomosRequired-t.pomosUsed,0)})),e}},{key:"parseSessionFromObj",value:function(e){return this.id=e.id,this.mode=e.mode,this.time=e.time,this.pomosElapsed=e.pomosElapsed,this.startDate=new Date(e.startDate),this.allTasks=e.allTasks.map((function(e){var t=new a.iQ;return t.parseTaskFromObj(e)})),this}},{key:"serializeIntoObj",value:function(){return{id:this.id,allTasks:this.allTasks.map((function(e){return e.serializeIntoObj()})),mode:this.mode,time:this.time,pomosElapsed:this.pomosElapsed,startDate:this.startDate.getTime()}}}])&&i(t.prototype,o),e}();function h(e){var t=(0,s.RK)(c),o=new m;return t[e]?o.parseSessionFromObj(t[e]):null}function p(){return"complete"===localStorage.getItem(d)?null:parseInt(localStorage.getItem(l))-1}},594:(e,t,o)=>{o.d(t,{iQ:()=>r,Rd:()=>n,oi:()=>i,rs:()=>l,c_:()=>d});var s=o(409);function a(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}o(771);var r=function(){function e(t,o,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionID=t,this.id=-1,this.title=o,this.description=s,this.pomosRequired=a,this.completed=!1,this.pomosUsed=0}var t,o;return t=e,(o=[{key:"parseTaskFromObj",value:function(t){var o=new e(t.sessionID,t.title,t.description,t.pomosRequired);return o.completed=t.completed,o.id=t.id,o.pomosUsed=t.pomosUsed,o}},{key:"serializeIntoObj",value:function(){return{title:this.title,description:this.description,pomosRequired:this.pomosRequired,completed:this.completed,pomosUsed:this.pomosUsed,id:this.id,sessionID:this.sessionID}}}])&&a(t.prototype,o),e}(),n="pomo_task_map",i="pomo_task_index";function l(e){var t=(0,s.RK)(n);if(!t[e.id]){var o=parseInt((0,s.RK)(i));e.id=o,(0,s.RL)(i,o+1)}var a=e.serializeIntoObj();return t[e.id]=a,(0,s.RL)(n,t),e.id}function d(e){var t=(0,s.RK)(n);delete t[e],(0,s.RL)(n,t)}}},t={};function o(s){if(t[s])return t[s].exports;var a=t[s]={exports:{}};return e[s](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(409),t=o(771),s=function e(o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.date=o,this.tasks={},this.greenTasks=0,this.yellowTasks=0,this.redTasks=0;for(var a=(0,t.RU)(),r=0,n=function(){var e=(0,t._c)(a);if(e.mode!==t.rA.COMPLETE)return a-=1,"continue";var o=e.startDate;if(s.date.getMonth()===o.getMonth()&&s.date.getDate()===o.getDate()&&s.date.getYear()===o.getYear())Object.keys(e.allTasks).forEach((function(t){return s.tasks[r++]=e.allTasks[t]}));else if(s.date.getMonth()>o.getMonth()||s.date.getDate()>o.getDate()||s.date.getYear()>o.getYear())return"break";a-=1};0!=a;){var i=n();if("continue"!==i&&"break"===i)break}for(var l in this.tasks)this.tasks[l].completed?this.tasks[l].pomosUsed<=this.tasks[l].pomosRequired?this.greenTasks+=1:this.yellowTasks+=1:this.redTasks+=1},a="day",r="night";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=a;return e.getHours()<4?t=r:e.getHours()<18?t=a:e.getHours()<24&&(t=r),t}window.addEventListener("DOMContentLoaded",(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=0,o=6,s=e.getDay(),a=localStorage.getItem("bg-seed");null!==a&&a[0]==s||(a=s+"-"+Math.floor(Math.random()*o),localStorage.setItem("bg-seed",a));var r=n(e);t=parseInt(a[2]),document.getElementById("backdrop").style.backgroundImage='url("../assets/images/backgrounds/'.concat(r,"/bg").concat(t,'.jpg")')}(),(0,e.xN)();var t=new s(new Date),o=document.getElementById("taskList");for(var a in t.tasks){var r=t.tasks[a],i='<pomo-task description ="'.concat(r.description,'" pomosUsed="').concat(r.pomosUsed,'", pomosRequired ="').concat(r.pomosRequired,'">').concat(r.title,"</pomo-task>");o.insertAdjacentHTML("beforeend",i);var l=o.childNodes[o.childNodes.length-1];l.task=r,l.shadowRoot.childNodes[0].childNodes[0].childNodes[3].style.display="none",l.shadowRoot.childNodes[0].childNodes[0].childNodes[2].style.display="none",r.completed?r.pomosUsed<=r.pomosRequired?l.shadowRoot.childNodes[0].childNodes[0].childNodes[1].childNodes[0].setAttribute("class","goodTimingTask"):l.shadowRoot.childNodes[0].childNodes[0].childNodes[1].childNodes[0].setAttribute("class","badTimingTask"):l.shadowRoot.childNodes[0].childNodes[0].childNodes[1].childNodes[0].setAttribute("class","incompleteTask")}var d={complete:t.greenTasks,overtime:t.yellowTasks,incomplete:t.redTasks};!function(e,t){var o=e.getContext("2d"),s=["#22DD9A","#F9C644","#FA7F7F"];new Chart(o,{type:"bar",data:{labels:["Tasks Completed on Time","Tasks Completed over Time","Tasks Incomplete"],datasets:[{label:"# of Tasks",data:[t.complete,t.overtime,t.incomplete],backgroundColor:s,borderColor:s,borderWidth:1}]},options:{legend:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}(document.getElementById("efficiency-chart"),d);var c=document.getElementById("efficiency-weekly-chart"),u=function(){for(var e=[],t=0;t<7;t++){var o=new Date;o.setDate(o.getDate()-t),e.push(o)}return e}();u.reverse();var m=[],h=[];for(var p in u)m.push(u[p].getMonth()+1+"/"+new Date(u[p]).getDate()),h.push(new s(new Date(u[p])));var f,v,k,g,y=[],b=[],T=[];for(var w in h)y.push(h[w].greenTasks),b.push(h[w].yellowTasks),T.push(h[w].redTasks);f={complete:y,overtime:b,incomplete:T},v=m,k=c.getContext("2d"),g=["Tasks Completed on Time","Tasks Completed over Time","Tasks Incomplete"],new Chart(k,{type:"line",data:{labels:v,datasets:[{label:g[0],borderColor:"#22DD9A",backgroundColor:"transparent",data:f.complete},{label:g[1],borderColor:"#F9C644",backgroundColor:"transparent",data:f.overtime},{label:g[2],borderColor:"#FA7F7F",backgroundColor:"transparent",data:f.incomplete}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvZGF0YWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Nlc3Npb24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Rhc2suanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3N0YXRzLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy91dGlscy90aGVtZS5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvaGlzdG9yeS5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvaGlzdG9yeS1ncmFwaC5qcyJdLCJuYW1lcyI6WyJpbml0aWFsaXplRGF0YWJhc2UiLCJuZWVkVG9Jbml0aWFsaXplIiwiZ2V0T2JqZWN0IiwiUE9NT19UQVNLX01BUCIsIlBPTU9fVEFTS19JTkRFWCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQT01PX1NFU1NJT05fSUQiLCJMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUyIsIlBPTU9fU0VTU0lPTl9NQVAiLCJzdG9yZU9iamVjdCIsImtleSIsIm9iamVjdCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJQT01PX1NFU1NJT05fTU9ERVMiLCJJTkFDVElWRSIsIkJSRUFLIiwiTE9OR19CUkVBSyIsIkFDVElWRSIsIkNPTVBMRVRFIiwiUG9tb1Nlc3Npb24iLCJpZCIsInRoaXMiLCJhbGxUYXNrcyIsIm1vZGUiLCJ0aW1lIiwicG9tb3NFbGFwc2VkIiwic3RhcnREYXRlIiwiRGF0ZSIsImFsbEluUHJvZ3Jlc3NUYXNrcyIsImZpbHRlciIsInRhc2siLCJjb21wbGV0ZWQiLCJsZW5ndGgiLCJzdG9yZVRhc2siLCJwdXNoIiwiZGVsZXRlVGFza0J5VGFza0lEIiwiaSIsInN0b3JlZFRhc2siLCJzcGxpY2UiLCJwb21vc1VzZWQiLCJsZWZ0IiwiZm9yRWFjaCIsIk1hdGgiLCJtYXgiLCJwb21vc1JlcXVpcmVkIiwic2Vzc2lvbl9vYmoiLCJtYXAiLCJ0YXNrT2JqIiwidCIsIlRhc2siLCJwYXJzZVRhc2tGcm9tT2JqIiwic2VyaWFsaXplSW50b09iaiIsImdldFRpbWUiLCJnZXRQb21vU2Vzc2lvbiIsImFsbFNlc3Npb25zIiwicCIsInBhcnNlU2Vzc2lvbkZyb21PYmoiLCJnZXRMYXRlc3RTZXNzaW9uSUQiLCJwYXJzZUludCIsInNlc3Npb25JRCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0YXNrX29iaiIsInRhc2tfbWFwIiwib2JqIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiUG9tb1N0YXRzIiwiZGF0ZSIsInRhc2tzIiwiZ3JlZW5UYXNrcyIsInllbGxvd1Rhc2tzIiwicmVkVGFza3MiLCJjb3VudGVyIiwic2Vzc2lvbiIsInNlc3Npb25fb2JqZWN0X2RhdGUiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRZZWFyIiwia2V5cyIsInRhc2tJRCIsIlRIRU1FX01PREVTIiwiZ2V0VGhlbWVNb2RlIiwidG9kYXkiLCJ0aW1lUGVyaW9kIiwiZ2V0SG91cnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwibnVtQkdzIiwiZ2V0RGF5Iiwic2VlZCIsImZsb29yIiwicmFuZG9tIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwic2VsZWN0QW5kU2V0VGhlbWUiLCJzdGF0cyIsInRhc2tMaXN0IiwiY3VycmVudFRhc2tFbGVtZW50IiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZWxlbWVudCIsImNoaWxkTm9kZXMiLCJzaGFkb3dSb290IiwiZGlzcGxheSIsInNldEF0dHJpYnV0ZSIsImRhdGEiLCJjb21wbGV0ZSIsIm92ZXJ0aW1lIiwiaW5jb21wbGV0ZSIsImNoYXJ0ZWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJjb2xvcnMiLCJDaGFydCIsInR5cGUiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImxhYmVsIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsIm9wdGlvbnMiLCJsZWdlbmQiLCJzY2FsZXMiLCJ5QXhlcyIsInRpY2tzIiwiYmVnaW5BdFplcm8iLCJyZW5kZXJFZmZpY2llbmN5RGF0YSIsImNhbnZhczIiLCJzZXZlbkRhdGVzIiwiZGF0ZXMiLCJzZXREYXRlIiwiZGF0ZXNGb3JTZXZlbkRheXMiLCJyZXZlcnNlIiwiZGF0ZXNGb3JHcmFwaCIsIndlZWtTdGF0cyIsImRhdGVJRCIsIndlZWtseURhdGEiLCJjb21wbGV0ZVdlZWsiLCJvdmVyVGltZVdlZWsiLCJpbmNvbXBsZXRlV2VlayIsInN0YXRJRCJdLCJtYXBwaW5ncyI6ImtHQUdPLFNBQVNBLElB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aXN0b3J5LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBPTU9fVEFTS19JTkRFWCwgUE9NT19UQVNLX01BUCB9IGZyb20gXCIuL3Rhc2tcIjtcbmltcG9ydCB7IFBPTU9fU0VTU0lPTl9JRCwgTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMsIFBPTU9fU0VTU0lPTl9NQVAgfSBmcm9tIFwiLi9zZXNzaW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRGF0YWJhc2UoKSB7XG4gICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBpbml0aWFsaXplXG4gICAgbGV0IG5lZWRUb0luaXRpYWxpemUgPSBmYWxzZTtcbiAgICBpZiAoZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZ2V0T2JqZWN0KFBPTU9fVEFTS19JTkRFWCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghbG9jYWxTdG9yYWdlLmdldEl0ZW0oUE9NT19TRVNTSU9OX0lEKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUykgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gdGhlbiBpbml0aWFsaXplXG4gICAgaWYgKG5lZWRUb0luaXRpYWxpemUpIHtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwge30pO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfSU5ERVgsIDApO1xuICAgICAgICBzdG9yZU9iamVjdChMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgXCJjb21wbGV0ZVwiKTtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19TRVNTSU9OX0lELCAwKTtcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19TRVNTSU9OX01BUCwge30pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNldERhdGFiYXNlKCkge1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19UQVNLX01BUF07XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1RBU0tfSU5ERVhdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVNdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19TRVNTSU9OX0lEXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fU0VTU0lPTl9NQVBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVPYmplY3Qoa2V5LCBvYmplY3QpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE9iamVjdChrZXkpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbn0iLCIvKipcbiAqIFRoaXMgZmlsZSBpcyByZWxhdGVkIHRvIGZpbmRpbmcgcG9tbyBzZXNzaW9uc1xuICovXG5pbXBvcnQgeyBnZXRPYmplY3QsIHN0b3JlT2JqZWN0IH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IGRlbGV0ZVRhc2tCeVRhc2tJRCwgc3RvcmVUYXNrLCBUYXNrIH0gZnJvbSBcIi4vdGFza1wiO1xuXG5cbmV4cG9ydCBjb25zdCBQT01PX1NFU1NJT05fSUQgPSBcInBvbW9fc2Vzc2lvbl9pZFwiO1xuZXhwb3J0IGNvbnN0IExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTID0gXCJsYXRlc3RfcG9tb19zZXNzaW9uX3N0YXR1c1wiO1xuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9NQVAgPSBcInBvbW9fc2Vzc2lvbl9tYXBcIjtcblxuLyoqIHRoZSBkaWZmZXJlbnQgcG9tbyBzZXNzaW9uIG1vZGVzIGFzIGNvbnN0YW50cyAqL1xuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9NT0RFUyA9IHtcbiAgLyoqIHdoZW4gdGhlIHVzZXIgaXMgaW4gdGhlIGludGVyZmFjZSBvZiBjcmVhdGluZyBhIG5ldyB0aW1lciBhbmQgaGFzIG5vdCBzdGFydGVkIHRoZWlyIG5ldyBzZXNzaW9uIHlldCAqL1xuICBJTkFDVElWRTogXCJpbmFjdGl2ZVwiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBicmVhayB0aW1lciAqL1xuICBCUkVBSzogXCJicmVha1wiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBsb25nZXIgYnJlYWsgdGltZXIgKi9cbiAgTE9OR19CUkVBSzogXCJsb25nYnJlYWtcIixcbiAgLyoqIHdoZW4gcnVubmluZyB0aGUgYWN0aXZlIHBvbW8gd29yayB0aW1lICovXG4gIEFDVElWRTogXCJhY3RpdmVcIixcbiAgLyoqIHdoZW4gdGhlIHVzZXIgbWFya3MgdGhpcyBwb21vIHNlc3Npb24gYXMgY29tcGxldGUsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0YXNrcyBhcmUgY29tcGxldGVkIG9yIG5vdCAqL1xuICBDT01QTEVURTogXCJjb21wbGV0ZVwiLFxufTtcblxuZXhwb3J0IGNsYXNzIFBvbW9TZXNzaW9uIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBQb21vIFNlc3Npb24gb2JqZWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIGlkIG9mIHRoaXMgc2Vzc2lvblxuICAgKi9cbiAgY29uc3RydWN0b3IoaWQpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgLyoqIEB0eXBlIHtUYXNrW119IC0gYSBsaXN0IG9mIGFsbCB0YXNrcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBzZXNzaW9uICovXG4gICAgdGhpcy5hbGxUYXNrcyA9IFtdO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAtIHRoZSBjdXJyZW50IG1vZGUgb2YgdGhlIHBvbW8gc2Vzc2lvbiAqL1xuICAgIHRoaXMubW9kZSA9IFBPTU9fU0VTU0lPTl9NT0RFUy5JTkFDVElWRTtcbiAgICAvKiogQHR5cGUge051bWJlcn0gLSB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSBwb21vIHNlc3Npb24gKi9cbiAgICB0aGlzLnRpbWUgPSAwO1xuXG4gICAgLyoqIEB0eXBlIHtOdW1iZXJ9IC0gbnVtYmVyIG9mIHBvbW9zIGVsYXBzZWQgc3VjY2VzZnVsbHkgZm9yIHRoaXMgcG9tbyBzZXNzaW9uICovXG4gICAgdGhpcy5wb21vc0VsYXBzZWQgPSAwO1xuXG4gICAgdGhpcy5zdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBcbiAgICogQHJldHVybnMge1Rhc2sgfCBudWxsIH0gLSB0aGUgY3VycmVudCB0YXNrIGZvciB0aGlzIHBvbW8gc2Vzc2lvbiBvciBudWxsIGlmIHRoZXJlIGFyZSBubyB0YXNrcyBsZWZ0XG4gICAqL1xuICBjdXJyZW50VGFzaygpIHtcbiAgICBsZXQgYWxsSW5Qcm9ncmVzc1Rhc2tzID0gdGhpcy5hbGxUYXNrcy5maWx0ZXIoKHRhc2spID0+ICF0YXNrLmNvbXBsZXRlZCk7XG4gICAgaWYgKGFsbEluUHJvZ3Jlc3NUYXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhbGxJblByb2dyZXNzVGFza3NbMF07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgbmV3IHRhc2tcbiAgICogQHBhcmFtIHtUYXNrfSB0YXNrIFxuICAgKi9cbiAgYWRkVGFzayh0YXNrKSB7XG4gICAgc3RvcmVUYXNrKHRhc2spO1xuICAgIHRoaXMuYWxsVGFza3MucHVzaCh0YXNrKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgdGFza1xuICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAqL1xuICBkZWxldGVUYXNrKHRhc2spIHtcbiAgICBkZWxldGVUYXNrQnlUYXNrSUQodGFzay5pZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbFRhc2tzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGNvbnN0IHN0b3JlZFRhc2sgPSB0aGlzLmFsbFRhc2tzW2ldO1xuICAgICAgaWYgKHRhc2suaWQgPT09IHN0b3JlZFRhc2suaWQpIHtcbiAgICAgICAgdGhpcy5hbGxUYXNrcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGxldGVzIHRoZSBnaXZlbiB0YXNrIGFzc29jaWF0ZWQgdG8gdGhlIGlkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgY29tcGxldGVkLCBmYWxzZSBpZiBubyB0YXNrIGZvdW5kXG4gICAqL1xuICBjb21wbGV0ZVRhc2soaWQpIHtcbiAgICBmb3IgKGxldCB0YXNrIG9mIHRoaXMuYWxsVGFza3MpIHtcbiAgICAgIGlmICh0YXNrLmlkID09PSBpZCkge1xuICAgICAgICB0YXNrLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5leHQgaW5jb21wbGV0ZSB0YXNrIGluIHRoZSBvcmRlciBvciBudWxsIGlmIGFsbCBjb21wbGV0ZWRcbiAgICogQHJldHVybnMge1Rhc2sgfCBudWxsfVxuICAgKi9cbiAgZ2V0TmV4dFRhc2soKSB7XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRoaXMuYWxsVGFza3MpIHtcbiAgICAgIGlmICh0YXNrLmNvbXBsZXRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBJbmNyZW1lbnQgdGhlIHBvbW9zIHVzZWQgZm9yIGEgdGFzayBhbmQgaW5jcmVtZW50IHBvbW9zRWxhcHNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gICAqL1xuICBpbmNyZW1lbnRUYXNrUG9tb3NVc2VkKGlkKSB7XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRoaXMuYWxsVGFza3MpIHtcbiAgICAgIGlmICh0YXNrLmlkID09PSBpZCkge1xuICAgICAgICB0YXNrLnBvbW9zVXNlZCArPSAxO1xuICAgICAgICB0aGlzLnBvbW9zRWxhcHNlZCArPSAxO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHNlc3Npb24gaXMgaW4gYnJlYWsgbW9kZSByaWdodCBub3csIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaXNCcmVhaygpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlID09PSBQT01PX1NFU1NJT05fTU9ERVMuTE9OR19CUkVBSyB8fCB0aGlzLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5CUkVBSztcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPXG4gICAqL1xuICByZW9yZGVyVGFza3MoKSB7XG5cbiAgfVxuXG4gIGdldFBvbW9zTGVmdEluU2Vzc2lvbigpIHtcbiAgICBsZXQgbGVmdCA9IDA7XG4gICAgdGhpcy5hbGxUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBsZWZ0ICs9IE1hdGgubWF4KHRhc2sucG9tb3NSZXF1aXJlZCAtIHRhc2sucG9tb3NVc2VkLCAwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbGVmdDtcbiAgfVxuICBwYXJzZVNlc3Npb25Gcm9tT2JqKHNlc3Npb25fb2JqKSB7XG4gICAgdGhpcy5pZCA9IHNlc3Npb25fb2JqLmlkO1xuICAgIHRoaXMubW9kZSA9IHNlc3Npb25fb2JqLm1vZGU7XG4gICAgdGhpcy50aW1lID0gc2Vzc2lvbl9vYmoudGltZTtcbiAgICB0aGlzLnBvbW9zRWxhcHNlZCA9IHNlc3Npb25fb2JqLnBvbW9zRWxhcHNlZDtcbiAgICB0aGlzLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHNlc3Npb25fb2JqLnN0YXJ0RGF0ZSk7XG4gICAgdGhpcy5hbGxUYXNrcyA9IHNlc3Npb25fb2JqLmFsbFRhc2tzLm1hcCgodGFza09iaikgPT4ge1xuICAgICAgbGV0IHQgPSBuZXcgVGFzaygpO1xuICAgICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrT2JqKTtcbiAgICAgIHJldHVybiB0O1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNlcmlhbGl6ZUludG9PYmooKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLCBhbGxUYXNrczogdGhpcy5hbGxUYXNrcy5tYXAoKHRhc2spID0+IHRhc2suc2VyaWFsaXplSW50b09iaigpKSwgbW9kZTogdGhpcy5tb2RlLCB0aW1lOiB0aGlzLnRpbWUsIHBvbW9zRWxhcHNlZDogdGhpcy5wb21vc0VsYXBzZWQsIHN0YXJ0RGF0ZTogdGhpcy5zdGFydERhdGUuZ2V0VGltZSgpXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHBvbW8gc2Vzc2lvbiBvYmplY3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAqIEByZXR1cm5zIHtQb21vU2Vzc2lvbiB8IG51bGx9IHRoZSBzZXNzaW9uIGZvciB0aGlzIGlkIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gc2Vzc2lvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9tb1Nlc3Npb24oaWQpIHtcbiAgY29uc3QgYWxsU2Vzc2lvbnMgPSBnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCk7XG4gIGxldCBwID0gbmV3IFBvbW9TZXNzaW9uKCk7XG4gIGlmICghYWxsU2Vzc2lvbnNbaWRdKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHAucGFyc2VTZXNzaW9uRnJvbU9iaihhbGxTZXNzaW9uc1tpZF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVQb21vU2Vzc2lvbihzZXNzaW9uKSB7XG4gIGNvbnN0IGFsbFNlc3Npb25zID0gZ2V0T2JqZWN0KFBPTU9fU0VTU0lPTl9NQVApO1xuICBhbGxTZXNzaW9uc1tzZXNzaW9uLmlkXSA9IHNlc3Npb24uc2VyaWFsaXplSW50b09iaigpO1xuICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fTUFQLCBhbGxTZXNzaW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXdTZXNzaW9uSUQoKSB7XG4gIGxldCBwcmV2SUQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQT01PX1NFU1NJT05fSUQpKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oUE9NT19TRVNTSU9OX0lELCBwcmV2SUQgKyAxKTtcbiAgcmV0dXJuIHByZXZJRDtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIGN1cnJlbnQgc2Vzc2lvbidzIHN0YXR1c1xuICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyAtIGNhbiBiZSBcImNvbXBsZXRlXCIgb3IgXCJpbi1wcm9ncmVzc1wiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U2Vzc2lvblN0YXR1cyhzdGF0dXMpIHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMsIHN0YXR1cyk7XG59XG5cbi8qKlxuICogV2lsbCByZXR1cm4gdGhlIHNlc3Npb24gSUQgb2YgdGhlIGxhc3Qgc2Vzc2lvbiBpZiBpdCB3YXMgbm90IGVuZGVkLiBPdGhlcndpc2UgaWYgdGhlIGxhc3Qgc2Vzc2lvbiBkb2VzIG5vdCBleGlzdCBcbiAqIG9yIHdhcyBlbmRlZCBhbHJlYWR5LCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgbnVsbFxuICogXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgbnVsbH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhdGVzdFNlc3Npb25JRCgpIHtcbiAgbGV0IHN0YXR1cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTKTtcbiAgaWYgKHN0YXR1cyA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCkpIC0gMTtcbiAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHtib29sZWFufSAtIHRydWUgaWYgdGhlcmUgaXMgYSB1bmZpbmlzaGVkIHNlc3Npb24gdGhhdCB3YXMgbm90IGNvbXBsZXRlZCBvciBxdWl0dGVkLiBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRoZXJlSXNVbmZpbmlzaGVkU2Vzc2lvbigpIHtcbiAgbGV0IHNlc3Npb25JRCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICBpZiAoc2Vzc2lvbklEID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIGxldCBjdXJyZW50UG9tb1Nlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihzZXNzaW9uSUQpO1xuICBpZiAoY3VycmVudFBvbW9TZXNzaW9uICE9PSBudWxsICYmIGN1cnJlbnRQb21vU2Vzc2lvbi5tb2RlICE9PSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEUgJiYgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgIT09IFBPTU9fU0VTU0lPTl9NT0RFUy5JTkFDVElWRSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRpbnVlQWN0aXZlU2Vzc2lvbigpIHtcbiAgaWYgKHRoZXJlSXNVbmZpbmlzaGVkU2Vzc2lvbigpKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gXCIvdGltZXIuaHRtbD9sb2FkU2F2ZWQ9dHJ1ZVwiO1xuICB9XG59IiwiaW1wb3J0IHsgZ2V0T2JqZWN0LCBzdG9yZU9iamVjdCB9IGZyb20gXCIuXCI7XG5pbXBvcnQgeyBnZXRMYXRlc3RTZXNzaW9uSUQsIGdldFBvbW9TZXNzaW9uIH0gZnJvbSBcIi4vc2Vzc2lvblwiO1xuXG5leHBvcnQgY2xhc3MgVGFzayB7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JRCBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGUgXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlc2NyaXB0aW9uIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb21vc1JlcXVpcmVkIFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb25JRCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwb21vc1JlcXVpcmVkKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklEID0gc2Vzc2lvbklEO1xuICAgICAgICB0aGlzLmlkID0gLTE7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnBvbW9zUmVxdWlyZWQgPSBwb21vc1JlcXVpcmVkO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBvbW9zVXNlZCA9IDA7XG4gICAgfVxuICAgIHBhcnNlVGFza0Zyb21PYmoodGFza19vYmopIHtcbiAgICAgICAgbGV0IHRhc2sgPSBuZXcgVGFzayh0YXNrX29iai5zZXNzaW9uSUQsIHRhc2tfb2JqLnRpdGxlLCB0YXNrX29iai5kZXNjcmlwdGlvbiwgdGFza19vYmoucG9tb3NSZXF1aXJlZCk7XG4gICAgICAgIHRhc2suY29tcGxldGVkID0gdGFza19vYmouY29tcGxldGVkO1xuICAgICAgICB0YXNrLmlkID0gdGFza19vYmouaWQ7XG4gICAgICAgIHRhc2sucG9tb3NVc2VkID0gdGFza19vYmoucG9tb3NVc2VkO1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICB9XG4gICAgc2VyaWFsaXplSW50b09iaigpIHtcbiAgICAgICAgcmV0dXJuIHsgdGl0bGU6IHRoaXMudGl0bGUsIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLCBwb21vc1JlcXVpcmVkOiB0aGlzLnBvbW9zUmVxdWlyZWQsIGNvbXBsZXRlZDogdGhpcy5jb21wbGV0ZWQsIHBvbW9zVXNlZDogdGhpcy5wb21vc1VzZWQsIGlkOiB0aGlzLmlkLCBzZXNzaW9uSUQ6IHRoaXMuc2Vzc2lvbklEIH07XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgUE9NT19UQVNLX01BUCA9IFwicG9tb190YXNrX21hcFwiO1xuZXhwb3J0IGNvbnN0IFBPTU9fVEFTS19JTkRFWCA9IFwicG9tb190YXNrX2luZGV4XCI7XG5cbi8qKlxuICogV2lsbCBzdG9yZSBhIG5ldyBvciB1cGRhdGVkIHRhc2sgaW50byBsb2NhbCBzdG9yYWdlXG4gKiBcbiAqIEhhcyBhIHNpZGUgZWZmZWN0IG9mIGFkZGluZyB0aGUgaWQgb2YgdGhlIG5ldyB0YXNrIGlmIGl0IHdhc250IHN0b3JlZCBpbiBzdG9yYWdlIGJlZm9yZVxuICogXG4gKiBAcGFyYW0ge1Rhc2t9IHRhc2tcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gdGhlIGlkIG9mIHRoZSB0YXNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVRhc2sodGFzaykge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBpZiAoIXRhc2tfbWFwW3Rhc2suaWRdKSB7XG4gICAgICAgIC8vIGlmIHRhc2sgbWFwIGRvZXMgbm90IGhhdmUgdGhpcyB0YXNrLCBjcmVhdGUgYSBuZXcgaW5kZXhcbiAgICAgICAgbGV0IGlkID0gcGFyc2VJbnQoZ2V0T2JqZWN0KFBPTU9fVEFTS19JTkRFWCkpO1xuICAgICAgICB0YXNrLmlkID0gaWQ7XG4gICAgICAgIC8vIGluY3JlbWVudCBnbG9iYWwgaWRcbiAgICAgICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX0lOREVYLCBpZCArIDEpO1xuICAgIH1cbiAgICBsZXQgb2JqID0gdGFzay5zZXJpYWxpemVJbnRvT2JqKCk7XG4gICAgdGFza19tYXBbdGFzay5pZF0gPSBvYmo7XG4gICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwgdGFza19tYXApO1xuICAgIHJldHVybiB0YXNrLmlkO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdGFzayBhc3NvY2lhdGVkIHdpdGggdGhpcyBpZFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICogQHJldHVybnMge1Rhc2t9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXNrKGlkKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGxldCB0YXNrX29iaiA9IHRhc2tfbWFwW2lkXTtcbiAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaik7XG4gICAgcmV0dXJuIHQ7XG5cbn1cbi8qKlxuICogR2V0IGFsbCB0YXNrc1xuICogXG4gKiBAcmV0dXJucyB7TWFwPG51bWJlciwgVGFzaz59IC0gYSBtYXAgZnJvbSB0YXNrIGlkIHRvIHRhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFRhc2tzKCkge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBsZXQgcGFyc2VkX3Rhc2tfbWFwID0ge307XG4gICAgZm9yIChsZXQgaWQgaW4gdGFza19tYXApIHtcbiAgICAgICAgbGV0IHRhc2tfb2JqID0gdGFza19tYXBbaWRdO1xuICAgICAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgICAgIHQgPSB0LnBhcnNlVGFza0Zyb21PYmoodGFza19vYmopO1xuICAgICAgICBwYXJzZWRfdGFza19tYXBbaWRdID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZF90YXNrX21hcDtcbn1cblxuLyoqXG4gKiBEZWxldGUgYSBzcGVjaWZpYyB0YXNrIGZyb20gZGF0YWJhc2UgYnkgdGhlIHVuaXF1ZSB0YXNrIElEXG4gKiBcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRhc2tCeVRhc2tJRChpZCkge1xuICAgIGxldCB0YXNrX21hcCA9IGdldE9iamVjdChQT01PX1RBU0tfTUFQKTtcbiAgICBkZWxldGUgdGFza19tYXBbaWRdO1xuICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19NQVAsIHRhc2tfbWFwKTtcbn1cblxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGVyZSBhcmUgYW55IHVuZmluaXNoZWQgdGFza3MgZnJvbSB0aGUgcHJldmlvdXMgc2Vzc2lvblxuICogQHJldHVybnMge2Jvb2xlYW59IC0gdHJ1ZSBpZiB1bmlmaW5pc2hlZCB0YXNrcyBleGlzdCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVUaGVyZVVuZmluaXNoZWRUYXNrc0Zyb21MYXN0U2Vzc2lvbigpIHtcbiAgICBsZXQgb2xkU2Vzc2lvbklEID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gICAgaWYgKG9sZFNlc3Npb25JRCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24ob2xkU2Vzc2lvbklEKTtcbiAgICBpZiAoc2Vzc2lvbiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChzZXNzaW9uLmN1cnJlbnRUYXNrKCkgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IGdldE9iamVjdCB9IGZyb20gXCIuXCI7XG5pbXBvcnQgeyBnZXRMYXRlc3RTZXNzaW9uSUQsIGdldE5ld1Nlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24sIFBvbW9TZXNzaW9uLCBzZXRDdXJyZW50U2Vzc2lvblN0YXR1cywgc3RvcmVQb21vU2Vzc2lvbiwgUE9NT19TRVNTSU9OX01BUCwgUE9NT19TRVNTSU9OX01PREVTIH0gZnJvbSBcIi4uL2RhdGFiYXNlL3Nlc3Npb25cIjtcblxuZXhwb3J0IGNsYXNzIFBvbW9TdGF0cyB7XG4gICAgY29uc3RydWN0b3IoZGF0ZSkge1xuICAgICAgICB0aGlzLmRhdGUgPSBkYXRlO1xuICAgICAgICB0aGlzLnRhc2tzID0ge307XG5cbiAgICAgICAgdGhpcy5ncmVlblRhc2tzID0gMDtcbiAgICAgICAgdGhpcy55ZWxsb3dUYXNrcyA9IDA7XG4gICAgICAgIHRoaXMucmVkVGFza3MgPSAwO1xuXG4gICAgICAgIGxldCBpZCA9IGdldExhdGVzdFNlc3Npb25JRCgpO1xuICAgICAgICBsZXQgY291bnRlciA9IDA7XG4gICAgICAgIHdoaWxlKGlkICE9IDApIHtcbiAgICAgICAgICAgIGxldCBzZXNzaW9uID0gZ2V0UG9tb1Nlc3Npb24oaWQpO1xuICAgICAgICAgICAgaWYgKHNlc3Npb24ubW9kZSAhPT0gUE9NT19TRVNTSU9OX01PREVTLkNPTVBMRVRFKSB7XG4gICAgICAgICAgICAgICAgaWQgLT0gMTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzZXNzaW9uX29iamVjdF9kYXRlID0gc2Vzc2lvbi5zdGFydERhdGU7XG4gICAgICAgICAgICBpZih0aGlzLmRhdGUuZ2V0TW9udGgoKSA9PT0gc2Vzc2lvbl9vYmplY3RfZGF0ZS5nZXRNb250aCgpICYmIHRoaXMuZGF0ZS5nZXREYXRlKCkgPT09IHNlc3Npb25fb2JqZWN0X2RhdGUuZ2V0RGF0ZSgpICYmIHRoaXMuZGF0ZS5nZXRZZWFyKCkgPT09IHNlc3Npb25fb2JqZWN0X2RhdGUuZ2V0WWVhcigpKXtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzZXNzaW9uLmFsbFRhc2tzKVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChrZXkgPT4gdGhpcy50YXNrc1tjb3VudGVyKytdID0gc2Vzc2lvbi5hbGxUYXNrc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGhpcy5kYXRlLmdldE1vbnRoKCkgPiBzZXNzaW9uX29iamVjdF9kYXRlLmdldE1vbnRoKCkgfHwgdGhpcy5kYXRlLmdldERhdGUoKSA+IHNlc3Npb25fb2JqZWN0X2RhdGUuZ2V0RGF0ZSgpIHx8IHRoaXMuZGF0ZS5nZXRZZWFyKCkgPiBzZXNzaW9uX29iamVjdF9kYXRlLmdldFllYXIoKSl7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgaWQgLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBmb3IobGV0IHRhc2tJRCBpbiB0aGlzLnRhc2tzKSB7XG4gICAgICAgICAgICBpZih0aGlzLnRhc2tzW3Rhc2tJRF0uY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFza3NbdGFza0lEXS5wb21vc1VzZWQgPD0gdGhpcy50YXNrc1t0YXNrSURdLnBvbW9zUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmVlblRhc2tzKz0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHRoaXMueWVsbG93VGFza3MrPTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHRoaXMucmVkVGFza3MrPTE7XG4gICAgICAgIH1cbiAgICB9XG59IiwiLyoqXG4gKiBXaWxsIHJhbmRvbWx5IHBpY2sgYSB0aGVtZSBhbmQgdW5pcXVlIGJhY2tncm91bmQgZGVwZW5kaW5nIG9uIHdoYXQgZGF5IGl0IGlzIGFuZCB3aGF0IHRpbWUgaXQgaXMgYW5kIHNldCBpdCBvbiB0aGUgcGFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0QW5kU2V0VGhlbWUodG9kYXkgPSBuZXcgRGF0ZSgpKSB7XG4gIGxldCBpZCA9IDA7XG4gIGxldCBudW1CR3MgPSA2O1xuXG4gIGxldCBkID0gdG9kYXkuZ2V0RGF5KCk7XG5cbiAgbGV0IHNlZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImJnLXNlZWRcIik7XG5cbiAgaWYgKHNlZWQgPT09IG51bGwgfHwgc2VlZFswXSAhPSBkKSB7XG4gICAgc2VlZCA9IGQgKyBcIi1cIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bUJHcyk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJiZy1zZWVkXCIsIHNlZWQpO1xuICB9XG4gIGxldCB0aW1lUGVyaW9kID0gZ2V0VGhlbWVNb2RlKHRvZGF5KTtcbiAgaWQgPSBwYXJzZUludChzZWVkWzJdKTtcblxuICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2Ryb3BcIik7XG4gIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIi4uL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZHMvJHt0aW1lUGVyaW9kfS9iZyR7aWR9LmpwZ1wiKWA7XG59O1xuXG5leHBvcnQgY29uc3QgVEhFTUVfTU9ERVMgPSB7XG4gIERBWTogXCJkYXlcIixcbiAgTklHSFQ6IFwibmlnaHRcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaGVtZU1vZGUodG9kYXkgPSBuZXcgRGF0ZSgpKSB7XG4gIGxldCB0aW1lUGVyaW9kID0gVEhFTUVfTU9ERVMuREFZO1xuICBpZiAodG9kYXkuZ2V0SG91cnMoKSA8IDQpIHtcbiAgICB0aW1lUGVyaW9kID0gVEhFTUVfTU9ERVMuTklHSFQ7XG4gIH1cbiAgZWxzZSBpZiAodG9kYXkuZ2V0SG91cnMoKSA8IDE4KSB7XG4gICAgdGltZVBlcmlvZCA9IFRIRU1FX01PREVTLkRBWTtcbiAgfSBlbHNlIGlmICh0b2RheS5nZXRIb3VycygpIDwgMjQpIHtcbiAgICB0aW1lUGVyaW9kID0gVEhFTUVfTU9ERVMuTklHSFQ7XG4gIH1cbiAgcmV0dXJuIHRpbWVQZXJpb2Q7XG59IiwiaW1wb3J0IHsgaW5pdGlhbGl6ZURhdGFiYXNlIH0gZnJvbSBcIi4vZGF0YWJhc2VcIjtcbmltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCB9IGZyb20gXCIuL2RhdGFiYXNlL3Nlc3Npb25cIjtcbmltcG9ydCB7IFBvbW9TdGF0cyB9IGZyb20gXCIuL2RhdGFiYXNlL3N0YXRzXCI7XG5pbXBvcnQgeyByZW5kZXJFZmZpY2llbmN5V2Vla2x5RGF0YSwgcmVuZGVyRWZmaWNpZW5jeURhdGEgfSBmcm9tIFwiLi9oaXN0b3J5LWdyYXBoXCI7XG5pbXBvcnQgeyBzZWxlY3RBbmRTZXRUaGVtZSB9IGZyb20gXCIuL3V0aWxzL3RoZW1lXCI7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIHNlbGVjdEFuZFNldFRoZW1lKCk7XG4gICAgLy8gVE9ETzogbG9hZCBkYXRhIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgIGluaXRpYWxpemVEYXRhYmFzZSgpO1xuICAgIGxldCBzdGF0cyA9IG5ldyBQb21vU3RhdHMobmV3IERhdGUoKSk7XG4gICAgbGV0IHRhc2tMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTGlzdFwiKTtcbiAgICBmb3IobGV0IHRhc2tJRCBpbiBzdGF0cy50YXNrcykge1xuICAgICAgICBsZXQgdGFzayA9IHN0YXRzLnRhc2tzW3Rhc2tJRF07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYXNrRWxlbWVudCA9IGA8cG9tby10YXNrIGRlc2NyaXB0aW9uID1cIiR7dGFzay5kZXNjcmlwdGlvbn1cIiBwb21vc1VzZWQ9XCIke3Rhc2sucG9tb3NVc2VkfVwiLCBwb21vc1JlcXVpcmVkID1cIiR7dGFzay5wb21vc1JlcXVpcmVkfVwiPiR7dGFzay50aXRsZX08L3BvbW8tdGFzaz5gO1xuICAgICAgICB0YXNrTGlzdC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgY3VycmVudFRhc2tFbGVtZW50KTtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRhc2tMaXN0LmNoaWxkTm9kZXNbdGFza0xpc3QuY2hpbGROb2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgZWxlbWVudC50YXNrID0gdGFzaztcbiAgICAgICAgZWxlbWVudC5zaGFkb3dSb290LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzNdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgZWxlbWVudC5zaGFkb3dSb290LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzJdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgaWYodGFzay5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGlmKHRhc2sucG9tb3NVc2VkIDw9IHRhc2sucG9tb3NSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2hhZG93Um9vdC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZ29vZFRpbWluZ1Rhc2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGVsZW1lbnQuc2hhZG93Um9vdC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiYmFkVGltaW5nVGFza1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGVsZW1lbnQuc2hhZG93Um9vdC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaW5jb21wbGV0ZVRhc2tcIik7XG4gICAgfVxuICAgIGxldCBkYXRhID0ge1xuICAgICAgICBjb21wbGV0ZTogc3RhdHMuZ3JlZW5UYXNrcyxcbiAgICAgICAgb3ZlcnRpbWU6IHN0YXRzLnllbGxvd1Rhc2tzLFxuICAgICAgICBpbmNvbXBsZXRlOiBzdGF0cy5yZWRUYXNrcyxcbiAgICB9O1xuICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVmZmljaWVuY3ktY2hhcnRcIik7XG4gICAgcmVuZGVyRWZmaWNpZW5jeURhdGEoY2FudmFzLCBkYXRhKTtcbiAgICBsZXQgY2FudmFzMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWZmaWNpZW5jeS13ZWVrbHktY2hhcnRcIik7XG5cbiAgICBsZXQgc2V2ZW5EYXRlcyA9IGRhdGVzRm9yU2V2ZW5EYXlzKCk7XG4gICAgc2V2ZW5EYXRlcy5yZXZlcnNlKCk7XG4gICAgbGV0IGRhdGVzRm9yR3JhcGggPSBbXTtcbiAgICBsZXQgd2Vla1N0YXRzID0gW107XG4gICAgZm9yKGxldCBkYXRlSUQgaW4gc2V2ZW5EYXRlcykge1xuICAgICAgICBkYXRlc0ZvckdyYXBoLnB1c2goKHNldmVuRGF0ZXNbZGF0ZUlEXS5nZXRNb250aCgpICsgMSkrIFwiL1wiICsgbmV3IERhdGUoc2V2ZW5EYXRlc1tkYXRlSURdKS5nZXREYXRlKCkpO1xuICAgICAgICB3ZWVrU3RhdHMucHVzaChuZXcgUG9tb1N0YXRzKG5ldyBEYXRlKHNldmVuRGF0ZXNbZGF0ZUlEXSkpKTtcbiAgICB9XG4gICAgbGV0IGNvbXBsZXRlV2VlayA9IFtdO1xuICAgIGxldCBvdmVyVGltZVdlZWsgPSBbXTtcbiAgICBsZXQgaW5jb21wbGV0ZVdlZWsgPSBbXTtcbiAgICBmb3IobGV0IHN0YXRJRCBpbiB3ZWVrU3RhdHMpIHtcbiAgICAgICAgY29tcGxldGVXZWVrLnB1c2god2Vla1N0YXRzW3N0YXRJRF0uZ3JlZW5UYXNrcyk7XG4gICAgICAgIG92ZXJUaW1lV2Vlay5wdXNoKHdlZWtTdGF0c1tzdGF0SURdLnllbGxvd1Rhc2tzKTtcbiAgICAgICAgaW5jb21wbGV0ZVdlZWsucHVzaCh3ZWVrU3RhdHNbc3RhdElEXS5yZWRUYXNrcyk7XG4gICAgfVxuICAgIGxldCB3ZWVrbHlEYXRhID0ge1xuICAgICAgICBjb21wbGV0ZTogY29tcGxldGVXZWVrLFxuICAgICAgICBvdmVydGltZTogb3ZlclRpbWVXZWVrLFxuICAgICAgICBpbmNvbXBsZXRlOiBpbmNvbXBsZXRlV2VlayxcbiAgICB9O1xuICAgIHJlbmRlckVmZmljaWVuY3lXZWVrbHlEYXRhKGNhbnZhczIsIHdlZWtseURhdGEsIGRhdGVzRm9yR3JhcGgpO1xufSk7XG5cbmZ1bmN0aW9uIGRhdGVzRm9yU2V2ZW5EYXlzKCkge1xuICAgIGxldCBkYXRlcyA9IFtdO1xuICAgIGZvciAobGV0IGk9MDsgaTw3OyBpKyspIHtcbiAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBkLnNldERhdGUoZC5nZXREYXRlKCkgLSBpKTtcbiAgICAgICAgZGF0ZXMucHVzaChkKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGVzO1xufSIsIi8qKlxuICogUmVuZGVycyBhIGJhciBjaGFydCBvbnRvIHRoZSBnaXZlbiBjaGFydCBlbGVtZW50IHNob3dpbmcgdGhlIGRhaWx5IGRhdGFcbiAqIFxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2hhcnRlbGVtZW50IC0gdGhlIGVsZW1lbnQgdG8gcmVuZGVyIGNoYXJ0IGRhdGEgb25cbiAqIEBwYXJhbSB7e2NvbXBsZXRlOiBudW1iZXIsIG92ZXJ0aW1lOiBudW1iZXIsIGluY29tcGxldGU6IG51bWJlcn19IGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckVmZmljaWVuY3lEYXRhKGNoYXJ0ZWxlbWVudCwgZGF0YSkge1xuICAgIGxldCBjdHggPSBjaGFydGVsZW1lbnQuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGxldCBsYWJlbHMgPSBbXCJUYXNrcyBDb21wbGV0ZWQgb24gVGltZVwiLCBcIlRhc2tzIENvbXBsZXRlZCBvdmVyIFRpbWVcIiwgXCJUYXNrcyBJbmNvbXBsZXRlXCJdO1xuICAgIGxldCBjb2xvcnMgPSBbXCIjMjJERDlBXCIsIFwiI0Y5QzY0NFwiLCBcIiNGQTdGN0ZcIl07XG4gICAgbGV0IG15Q2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XG4gICAgICAgIHR5cGU6IFwiYmFyXCIsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGxhYmVsczogbGFiZWxzLFxuICAgICAgICAgICAgZGF0YXNldHM6IFt7XG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiIyBvZiBUYXNrc1wiLFxuICAgICAgICAgICAgICAgIGRhdGE6IFtkYXRhLmNvbXBsZXRlLCBkYXRhLm92ZXJ0aW1lLCBkYXRhLmluY29tcGxldGVdLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3JzLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBjb2xvcnMsXG4gICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDFcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGxlZ2VuZDogZmFsc2UsXG4gICAgICAgICAgICBzY2FsZXM6IHtcbiAgICAgICAgICAgICAgICB5QXhlczogW3tcbiAgICAgICAgICAgICAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luQXRaZXJvOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogUmVuZGVycyBhIGxpbmUgY2hhcnQgb250byB0aGUgY2hhcnQgZWxlbWVudCBvZiB3ZWVrbHkgZGF0YVxuICogXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBjaGFydGVsZW1lbnQgLSB0aGUgZWxlbWVudCB0byByZW5kZXIgY2hhcnQgZGF0YSBvblxuICogQHBhcmFtIHt7Y29tcGxldGU6IG51bWJlcltdLCBvdmVydGltZTogbnVtYmVyW10sIGluY29tcGxldGU6IG51bWJlcltdfX0gd2Vla2x5RGF0YVxuICogQHBhcmFtIHtzdHJpbmdbXX0gZGF0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckVmZmljaWVuY3lXZWVrbHlEYXRhKGNoYXJ0ZWxlbWVudCwgd2Vla2x5RGF0YSwgZGF0ZXMpIHtcbiAgICBsZXQgY3R4ID0gY2hhcnRlbGVtZW50LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBsZXQgbGFiZWxzID0gW1wiVGFza3MgQ29tcGxldGVkIG9uIFRpbWVcIiwgXCJUYXNrcyBDb21wbGV0ZWQgb3ZlciBUaW1lXCIsIFwiVGFza3MgSW5jb21wbGV0ZVwiXTtcbiAgICBsZXQgY29sb3JzID0gW1wiIzIyREQ5QVwiLCBcIiNGOUM2NDRcIiwgXCIjRkE3RjdGXCJdO1xuICAgIGxldCBteUNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbGFiZWxzOiBkYXRlcyxcbiAgICAgICAgICAgIGRhdGFzZXRzOiBbe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbHNbMF0sXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwiIzIyREQ5QVwiLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHdlZWtseURhdGEuY29tcGxldGVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWxzWzFdLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcIiNGOUM2NDRcIixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB3ZWVrbHlEYXRhLm92ZXJ0aW1lLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbHNbMl0sXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwiI0ZBN0Y3RlwiLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHdlZWtseURhdGEuaW5jb21wbGV0ZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgc2NhbGVzOiB7XG4gICAgICAgICAgICAgICAgeUF4ZXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSJdLCJzb3VyY2VSb290IjoiIn0=