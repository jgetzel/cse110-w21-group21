(()=>{"use strict";var e={409:(e,t,o)=>{o.d(t,{xN:()=>n,RL:()=>r,RK:()=>i});var s=o(594),a=o(771);function n(){var e=!1;null===i(s.Rd)&&(e=!0),null===i(s.oi)&&(e=!0),null===!localStorage.getItem(a.Do)&&(e=!0),null===!localStorage.getItem(a.mn)&&(e=!0),null===i(a.XB)&&(e=!0),e&&(r(s.Rd,{}),r(s.oi,0),r(a.mn,"complete"),r(a.Do,0),r(a.XB,{}))}function r(e,t){localStorage.setItem(e,JSON.stringify(t))}function i(e){return JSON.parse(localStorage.getItem(e))}},771:(e,t,o)=>{o.d(t,{Do:()=>l,mn:()=>d,XB:()=>c,rA:()=>u,_c:()=>h,RU:()=>p});var s=o(409),a=o(594);function n(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var s=0,a=function(){};return{s:a,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw n}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,s=new Array(t);o<t;o++)s[o]=e[o];return s}function i(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var l="pomo_session_id",d="latest_pomo_session_status",c="pomo_session_map",u={INACTIVE:"inactive",BREAK:"break",LONG_BREAK:"longbreak",ACTIVE:"active",COMPLETE:"complete"},m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.allTasks=[],this.mode=u.INACTIVE,this.time=0,this.pomosElapsed=0,this.startDate=new Date}var t,o;return t=e,(o=[{key:"currentTask",value:function(){var e=this.allTasks.filter((function(e){return!e.completed}));return e.length>0?e[0]:null}},{key:"addTask",value:function(e){(0,a.rs)(e),this.allTasks.push(e)}},{key:"deleteTask",value:function(e){(0,a.c_)(e.id);for(var t=0;t<this.allTasks.length;t++){var o=this.allTasks[t];if(e.id===o.id)return void this.allTasks.splice(t,1)}}},{key:"completeTask",value:function(e){var t,o=n(this.allTasks);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.id===e)return s.completed=!0,!0}}catch(e){o.e(e)}finally{o.f()}return!1}},{key:"getNextTask",value:function(){var e,t=n(this.allTasks);try{for(t.s();!(e=t.n()).done;){var o=e.value;if(!1===o.completed)return o}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"incrementTaskPomosUsed",value:function(e){var t,o=n(this.allTasks);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.id===e)return s.pomosUsed+=1,void(this.pomosElapsed+=1)}}catch(e){o.e(e)}finally{o.f()}}},{key:"isBreak",value:function(){return this.mode===u.LONG_BREAK||this.mode===u.BREAK}},{key:"reorderTasks",value:function(){}},{key:"getPomosLeftInSession",value:function(){var e=0;return this.allTasks.forEach((function(t){e+=Math.max(t.pomosRequired-t.pomosUsed,0)})),e}},{key:"parseSessionFromObj",value:function(e){return this.id=e.id,this.mode=e.mode,this.time=e.time,this.pomosElapsed=e.pomosElapsed,this.startDate=new Date(e.startDate),this.allTasks=e.allTasks.map((function(e){var t=new a.iQ;return t.parseTaskFromObj(e)})),this}},{key:"serializeIntoObj",value:function(){return{id:this.id,allTasks:this.allTasks.map((function(e){return e.serializeIntoObj()})),mode:this.mode,time:this.time,pomosElapsed:this.pomosElapsed,startDate:this.startDate.getTime()}}}])&&i(t.prototype,o),e}();function h(e){var t=(0,s.RK)(c),o=new m;return t[e]?o.parseSessionFromObj(t[e]):null}function p(){return"complete"===localStorage.getItem(d)?null:parseInt(localStorage.getItem(l))-1}},594:(e,t,o)=>{o.d(t,{iQ:()=>n,Rd:()=>r,oi:()=>i,rs:()=>l,c_:()=>d});var s=o(409);function a(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}o(771);var n=function(){function e(t,o,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionID=t,this.id=-1,this.title=o,this.description=s,this.pomosRequired=a,this.completed=!1,this.pomosUsed=0}var t,o;return t=e,(o=[{key:"parseTaskFromObj",value:function(t){var o=new e(t.sessionID,t.title,t.description,t.pomosRequired);return o.completed=t.completed,o.id=t.id,o.pomosUsed=t.pomosUsed,o}},{key:"serializeIntoObj",value:function(){return{title:this.title,description:this.description,pomosRequired:this.pomosRequired,completed:this.completed,pomosUsed:this.pomosUsed,id:this.id,sessionID:this.sessionID}}}])&&a(t.prototype,o),e}(),r="pomo_task_map",i="pomo_task_index";function l(e){var t=(0,s.RK)(r);if(!t[e.id]){var o=parseInt((0,s.RK)(i));e.id=o,(0,s.RL)(i,o+1)}var a=e.serializeIntoObj();return t[e.id]=a,(0,s.RL)(r,t),e.id}function d(e){var t=(0,s.RK)(r);delete t[e],(0,s.RL)(r,t)}}},t={};function o(s){if(t[s])return t[s].exports;var a=t[s]={exports:{}};return e[s](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(409),t=o(771),s=function e(o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.date=o,this.tasks={},this.greenTasks=0,this.yellowTasks=0,this.redTasks=0;for(var a=(0,t.RU)(),n=0,r=function(){var e=(0,t._c)(a);if(e.mode!==t.rA.COMPLETE)return a-=1,"continue";var o=e.startDate;if(s.date.getMonth()===o.getMonth()&&s.date.getDate()===o.getDate()&&s.date.getYear()===o.getYear())Object.keys(e.allTasks).forEach((function(t){return s.tasks[n++]=e.allTasks[t]}));else if(s.date.getMonth()>o.getMonth()||s.date.getDate()>o.getDate()||s.date.getYear()>o.getYear())return"break";a-=1};0!=a;){var i=r();if("continue"!==i&&"break"===i)break}for(var l in this.tasks)this.tasks[l].completed?this.tasks[l].pomosUsed<=this.tasks[l].pomosRequired?this.greenTasks+=1:this.yellowTasks+=1:this.redTasks+=1},a="day",n="night";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=a;return e.getHours()<4?t=n:e.getHours()<18?t=a:e.getHours()<24&&(t=n),t}window.addEventListener("DOMContentLoaded",(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=0,o=6,s=e.getDay(),a=localStorage.getItem("bg-seed");null!==a&&a[0]==s||(a=s+"-"+Math.floor(Math.random()*o),localStorage.setItem("bg-seed",a));var n=r(e);t=parseInt(a[2]),document.getElementById("backdrop").style.backgroundImage='url("../assets/images/backgrounds/'.concat(n,"/bg").concat(t,'.jpg")')}(),(0,e.xN)();var t=new s(new Date),o=document.getElementById("taskList");for(var a in t.tasks){var n=t.tasks[a],i='<pomo-task description ="'.concat(n.description,'" pomosUsed="').concat(n.pomosUsed,'", pomosRequired ="').concat(n.pomosRequired,'">').concat(n.title,"</pomo-task>");o.insertAdjacentHTML("beforeend",i);var l=o.childNodes[o.childNodes.length-1];l.task=n,l.shadowRoot.childNodes[0].childNodes[0].childNodes[3].style.display="none",l.shadowRoot.childNodes[0].childNodes[0].childNodes[2].style.display="none",n.completed?n.pomosUsed<=n.pomosRequired?l.shadowRoot.childNodes[0].childNodes[0].childNodes[1].childNodes[0].setAttribute("class","goodTimingTask"):l.shadowRoot.childNodes[0].childNodes[0].childNodes[1].childNodes[0].setAttribute("class","badTimingTask"):l.shadowRoot.childNodes[0].childNodes[0].childNodes[1].childNodes[0].setAttribute("class","incompleteTask")}var d={complete:t.greenTasks,overtime:t.yellowTasks,incomplete:t.redTasks};!function(e,t){var o=e.getContext("2d"),s=["#22DD9A","#F9C644","#FA7F7F"];new Chart(o,{type:"bar",data:{labels:["Tasks Completed on Time","Tasks Completed over Time","Tasks Incomplete"],datasets:[{label:"# of Tasks",data:[t.complete,t.overtime,t.incomplete],backgroundColor:s,borderColor:s,borderWidth:1}]},options:{legend:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}(document.getElementById("efficiency-chart"),d);var c=document.getElementById("efficiency-weekly-chart"),u=function(){for(var e=[],t=0;t<7;t++){var o=new Date;o.setDate(o.getDate()-t),e.push(o)}return e}();u.reverse();var m=[],h=[];for(var p in u)m.push(new Date(u[p].getMonth()+1)+"/"+new Date(u[p]).getDate()),h.push(new s(new Date(u[p])));var f,v,k,g,y=[],b=[],T=[];for(var w in h)y.push(h[w].greenTasks),b.push(h[w].yellowTasks),T.push(h[w].redTasks);f={complete:y,overtime:b,incomplete:T},v=m,k=c.getContext("2d"),g=["Tasks Completed on Time","Tasks Completed over Time","Tasks Incomplete"],new Chart(k,{type:"line",data:{labels:v,datasets:[{label:g[0],borderColor:"#22DD9A",backgroundColor:"transparent",data:f.complete},{label:g[1],borderColor:"#F9C644",backgroundColor:"transparent",data:f.overtime},{label:g[2],borderColor:"#FA7F7F",backgroundColor:"transparent",data:f.incomplete}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvZGF0YWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Nlc3Npb24uanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3Rhc2suanMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY3NlMTEwLXcyMS1ncm91cDIxLy4vc291cmNlL2Fzc2V0cy9zY3JpcHRzL2RhdGFiYXNlL3N0YXRzLmpzIiwid2VicGFjazovL2NzZTExMC13MjEtZ3JvdXAyMS8uL3NvdXJjZS9hc3NldHMvc2NyaXB0cy91dGlscy90aGVtZS5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvaGlzdG9yeS5qcyIsIndlYnBhY2s6Ly9jc2UxMTAtdzIxLWdyb3VwMjEvLi9zb3VyY2UvYXNzZXRzL3NjcmlwdHMvaGlzdG9yeS1ncmFwaC5qcyJdLCJuYW1lcyI6WyJpbml0aWFsaXplRGF0YWJhc2UiLCJuZWVkVG9Jbml0aWFsaXplIiwiZ2V0T2JqZWN0IiwiUE9NT19UQVNLX01BUCIsIlBPTU9fVEFTS19JTkRFWCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQT01PX1NFU1NJT05fSUQiLCJMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUyIsIlBPTU9fU0VTU0lPTl9NQVAiLCJzdG9yZU9iamVjdCIsImtleSIsIm9iamVjdCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJQT01PX1NFU1NJT05fTU9ERVMiLCJJTkFDVElWRSIsIkJSRUFLIiwiTE9OR19CUkVBSyIsIkFDVElWRSIsIkNPTVBMRVRFIiwiUG9tb1Nlc3Npb24iLCJpZCIsInRoaXMiLCJhbGxUYXNrcyIsIm1vZGUiLCJ0aW1lIiwicG9tb3NFbGFwc2VkIiwic3RhcnREYXRlIiwiRGF0ZSIsImFsbEluUHJvZ3Jlc3NUYXNrcyIsImZpbHRlciIsInRhc2siLCJjb21wbGV0ZWQiLCJsZW5ndGgiLCJzdG9yZVRhc2siLCJwdXNoIiwiZGVsZXRlVGFza0J5VGFza0lEIiwiaSIsInN0b3JlZFRhc2siLCJzcGxpY2UiLCJwb21vc1VzZWQiLCJsZWZ0IiwiZm9yRWFjaCIsIk1hdGgiLCJtYXgiLCJwb21vc1JlcXVpcmVkIiwic2Vzc2lvbl9vYmoiLCJtYXAiLCJ0YXNrT2JqIiwidCIsIlRhc2siLCJwYXJzZVRhc2tGcm9tT2JqIiwic2VyaWFsaXplSW50b09iaiIsImdldFRpbWUiLCJnZXRQb21vU2Vzc2lvbiIsImFsbFNlc3Npb25zIiwicCIsInBhcnNlU2Vzc2lvbkZyb21PYmoiLCJnZXRMYXRlc3RTZXNzaW9uSUQiLCJwYXJzZUludCIsInNlc3Npb25JRCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0YXNrX29iaiIsInRhc2tfbWFwIiwib2JqIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiUG9tb1N0YXRzIiwiZGF0ZSIsInRhc2tzIiwiZ3JlZW5UYXNrcyIsInllbGxvd1Rhc2tzIiwicmVkVGFza3MiLCJjb3VudGVyIiwic2Vzc2lvbiIsInNlc3Npb25fb2JqZWN0X2RhdGUiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRZZWFyIiwia2V5cyIsInRhc2tJRCIsIlRIRU1FX01PREVTIiwiZ2V0VGhlbWVNb2RlIiwidG9kYXkiLCJ0aW1lUGVyaW9kIiwiZ2V0SG91cnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwibnVtQkdzIiwiZ2V0RGF5Iiwic2VlZCIsImZsb29yIiwicmFuZG9tIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwic2VsZWN0QW5kU2V0VGhlbWUiLCJzdGF0cyIsInRhc2tMaXN0IiwiY3VycmVudFRhc2tFbGVtZW50IiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZWxlbWVudCIsImNoaWxkTm9kZXMiLCJzaGFkb3dSb290IiwiZGlzcGxheSIsInNldEF0dHJpYnV0ZSIsImRhdGEiLCJjb21wbGV0ZSIsIm92ZXJ0aW1lIiwiaW5jb21wbGV0ZSIsImNoYXJ0ZWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJjb2xvcnMiLCJDaGFydCIsInR5cGUiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImxhYmVsIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsIm9wdGlvbnMiLCJsZWdlbmQiLCJzY2FsZXMiLCJ5QXhlcyIsInRpY2tzIiwiYmVnaW5BdFplcm8iLCJyZW5kZXJFZmZpY2llbmN5RGF0YSIsImNhbnZhczIiLCJzZXZlbkRhdGVzIiwiZGF0ZXMiLCJzZXREYXRlIiwiZGF0ZXNGb3JTZXZlbkRheXMiLCJyZXZlcnNlIiwiZGF0ZXNGb3JHcmFwaCIsIndlZWtTdGF0cyIsImRhdGVJRCIsIndlZWtseURhdGEiLCJjb21wbGV0ZVdlZWsiLCJvdmVyVGltZVdlZWsiLCJpbmNvbXBsZXRlV2VlayIsInN0YXRJRCJdLCJtYXBwaW5ncyI6ImtHQUdPLFNBQVNBLElB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IiwiZmlsZSI6Imhpc3RvcnkuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUE9NT19UQVNLX0lOREVYLCBQT01PX1RBU0tfTUFQIH0gZnJvbSBcIi4vdGFza1wiO1xuaW1wb3J0IHsgUE9NT19TRVNTSU9OX0lELCBMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgUE9NT19TRVNTSU9OX01BUCB9IGZyb20gXCIuL3Nlc3Npb25cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSgpIHtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIGluaXRpYWxpemVcbiAgICBsZXQgbmVlZFRvSW5pdGlhbGl6ZSA9IGZhbHNlO1xuICAgIGlmIChnZXRPYmplY3QoUE9NT19UQVNLX01BUCkgPT09IG51bGwpIHtcbiAgICAgICAgbmVlZFRvSW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChnZXRPYmplY3QoUE9NT19UQVNLX0lOREVYKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQT01PX1NFU1NJT05fSUQpID09PSBudWxsKSB7XG4gICAgICAgIG5lZWRUb0luaXRpYWxpemUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKSA9PT0gbnVsbCkge1xuICAgICAgICBuZWVkVG9Jbml0aWFsaXplID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyB0aGVuIGluaXRpYWxpemVcbiAgICBpZiAobmVlZFRvSW5pdGlhbGl6ZSkge1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB7fSk7XG4gICAgICAgIHN0b3JlT2JqZWN0KFBPTU9fVEFTS19JTkRFWCwgMCk7XG4gICAgICAgIHN0b3JlT2JqZWN0KExBVEVTVF9QT01PX1NFU1NJT05fU1RBVFVTLCBcImNvbXBsZXRlXCIpO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fSUQsIDApO1xuICAgICAgICBzdG9yZU9iamVjdChQT01PX1NFU1NJT05fTUFQLCB7fSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RGF0YWJhc2UoKSB7XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1RBU0tfTUFQXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW1BPTU9fVEFTS19JTkRFWF07XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVU107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtQT01PX1NFU1NJT05fSURdO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbUE9NT19TRVNTSU9OX01BUF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZU9iamVjdChrZXksIG9iamVjdCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkob2JqZWN0KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T2JqZWN0KGtleSkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xufSIsIi8qKlxuICogVGhpcyBmaWxlIGlzIHJlbGF0ZWQgdG8gZmluZGluZyBwb21vIHNlc3Npb25zXG4gKi9cbmltcG9ydCB7IGdldE9iamVjdCwgc3RvcmVPYmplY3QgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgZGVsZXRlVGFza0J5VGFza0lELCBzdG9yZVRhc2ssIFRhc2sgfSBmcm9tIFwiLi90YXNrXCI7XG5cblxuZXhwb3J0IGNvbnN0IFBPTU9fU0VTU0lPTl9JRCA9IFwicG9tb19zZXNzaW9uX2lkXCI7XG5leHBvcnQgY29uc3QgTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMgPSBcImxhdGVzdF9wb21vX3Nlc3Npb25fc3RhdHVzXCI7XG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX01BUCA9IFwicG9tb19zZXNzaW9uX21hcFwiO1xuXG4vKiogdGhlIGRpZmZlcmVudCBwb21vIHNlc3Npb24gbW9kZXMgYXMgY29uc3RhbnRzICovXG5leHBvcnQgY29uc3QgUE9NT19TRVNTSU9OX01PREVTID0ge1xuICAvKiogd2hlbiB0aGUgdXNlciBpcyBpbiB0aGUgaW50ZXJmYWNlIG9mIGNyZWF0aW5nIGEgbmV3IHRpbWVyIGFuZCBoYXMgbm90IHN0YXJ0ZWQgdGhlaXIgbmV3IHNlc3Npb24geWV0ICovXG4gIElOQUNUSVZFOiBcImluYWN0aXZlXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGJyZWFrIHRpbWVyICovXG4gIEJSRUFLOiBcImJyZWFrXCIsXG4gIC8qKiB3aGVuIHJ1bm5pbmcgdGhlIGxvbmdlciBicmVhayB0aW1lciAqL1xuICBMT05HX0JSRUFLOiBcImxvbmdicmVha1wiLFxuICAvKiogd2hlbiBydW5uaW5nIHRoZSBhY3RpdmUgcG9tbyB3b3JrIHRpbWUgKi9cbiAgQUNUSVZFOiBcImFjdGl2ZVwiLFxuICAvKiogd2hlbiB0aGUgdXNlciBtYXJrcyB0aGlzIHBvbW8gc2Vzc2lvbiBhcyBjb21wbGV0ZSwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRhc2tzIGFyZSBjb21wbGV0ZWQgb3Igbm90ICovXG4gIENPTVBMRVRFOiBcImNvbXBsZXRlXCIsXG59O1xuXG5leHBvcnQgY2xhc3MgUG9tb1Nlc3Npb24ge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFBvbW8gU2Vzc2lvbiBvYmplY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gaWQgb2YgdGhpcyBzZXNzaW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICAvKiogQHR5cGUge1Rhc2tbXX0gLSBhIGxpc3Qgb2YgYWxsIHRhc2tzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHNlc3Npb24gKi9cbiAgICB0aGlzLmFsbFRhc2tzID0gW107XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9IC0gdGhlIGN1cnJlbnQgbW9kZSBvZiB0aGUgcG9tbyBzZXNzaW9uICovXG4gICAgdGhpcy5tb2RlID0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFO1xuICAgIC8qKiBAdHlwZSB7TnVtYmVyfSAtIHRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHBvbW8gc2Vzc2lvbiAqL1xuICAgIHRoaXMudGltZSA9IDA7XG5cbiAgICAvKiogQHR5cGUge051bWJlcn0gLSBudW1iZXIgb2YgcG9tb3MgZWxhcHNlZCBzdWNjZXNmdWxseSBmb3IgdGhpcyBwb21vIHNlc3Npb24gKi9cbiAgICB0aGlzLnBvbW9zRWxhcHNlZCA9IDA7XG5cbiAgICB0aGlzLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBAcmV0dXJucyB7VGFzayB8IG51bGwgfSAtIHRoZSBjdXJyZW50IHRhc2sgZm9yIHRoaXMgcG9tbyBzZXNzaW9uIG9yIG51bGwgaWYgdGhlcmUgYXJlIG5vIHRhc2tzIGxlZnRcbiAgICovXG4gIGN1cnJlbnRUYXNrKCkge1xuICAgIGxldCBhbGxJblByb2dyZXNzVGFza3MgPSB0aGlzLmFsbFRhc2tzLmZpbHRlcigodGFzaykgPT4gIXRhc2suY29tcGxldGVkKTtcbiAgICBpZiAoYWxsSW5Qcm9ncmVzc1Rhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGFsbEluUHJvZ3Jlc3NUYXNrc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBuZXcgdGFza1xuICAgKiBAcGFyYW0ge1Rhc2t9IHRhc2sgXG4gICAqL1xuICBhZGRUYXNrKHRhc2spIHtcbiAgICBzdG9yZVRhc2sodGFzayk7XG4gICAgdGhpcy5hbGxUYXNrcy5wdXNoKHRhc2spO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSB0YXNrXG4gICAqIEBwYXJhbSB7VGFza30gdGFzayBcbiAgICovXG4gIGRlbGV0ZVRhc2sodGFzaykge1xuICAgIGRlbGV0ZVRhc2tCeVRhc2tJRCh0YXNrLmlkKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWxsVGFza3MubGVuZ3RoOyBpKyspe1xuICAgICAgY29uc3Qgc3RvcmVkVGFzayA9IHRoaXMuYWxsVGFza3NbaV07XG4gICAgICBpZiAodGFzay5pZCA9PT0gc3RvcmVkVGFzay5pZCkge1xuICAgICAgICB0aGlzLmFsbFRhc2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgdGhlIGdpdmVuIHRhc2sgYXNzb2NpYXRlZCB0byB0aGUgaWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBjb21wbGV0ZWQsIGZhbHNlIGlmIG5vIHRhc2sgZm91bmRcbiAgICovXG4gIGNvbXBsZXRlVGFzayhpZCkge1xuICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgIHRhc2suY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV4dCBpbmNvbXBsZXRlIHRhc2sgaW4gdGhlIG9yZGVyIG9yIG51bGwgaWYgYWxsIGNvbXBsZXRlZFxuICAgKiBAcmV0dXJucyB7VGFzayB8IG51bGx9XG4gICAqL1xuICBnZXROZXh0VGFzaygpIHtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suY29tcGxldGVkID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEluY3JlbWVudCB0aGUgcG9tb3MgdXNlZCBmb3IgYSB0YXNrIGFuZCBpbmNyZW1lbnQgcG9tb3NFbGFwc2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAgICovXG4gIGluY3JlbWVudFRhc2tQb21vc1VzZWQoaWQpIHtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGhpcy5hbGxUYXNrcykge1xuICAgICAgaWYgKHRhc2suaWQgPT09IGlkKSB7XG4gICAgICAgIHRhc2sucG9tb3NVc2VkICs9IDE7XG4gICAgICAgIHRoaXMucG9tb3NFbGFwc2VkICs9IDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXG4gICAqIEByZXR1cm5zIHRydWUgaWYgc2Vzc2lvbiBpcyBpbiBicmVhayBtb2RlIHJpZ2h0IG5vdywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBpc0JyZWFrKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGUgPT09IFBPTU9fU0VTU0lPTl9NT0RFUy5MT05HX0JSRUFLIHx8IHRoaXMubW9kZSA9PT0gUE9NT19TRVNTSU9OX01PREVTLkJSRUFLO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE9cbiAgICovXG4gIHJlb3JkZXJUYXNrcygpIHtcblxuICB9XG5cbiAgZ2V0UG9tb3NMZWZ0SW5TZXNzaW9uKCkge1xuICAgIGxldCBsZWZ0ID0gMDtcbiAgICB0aGlzLmFsbFRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGxlZnQgKz0gTWF0aC5tYXgodGFzay5wb21vc1JlcXVpcmVkIC0gdGFzay5wb21vc1VzZWQsIDApO1xuICAgIH0pO1xuICAgIHJldHVybiBsZWZ0O1xuICB9XG4gIHBhcnNlU2Vzc2lvbkZyb21PYmooc2Vzc2lvbl9vYmopIHtcbiAgICB0aGlzLmlkID0gc2Vzc2lvbl9vYmouaWQ7XG4gICAgdGhpcy5tb2RlID0gc2Vzc2lvbl9vYmoubW9kZTtcbiAgICB0aGlzLnRpbWUgPSBzZXNzaW9uX29iai50aW1lO1xuICAgIHRoaXMucG9tb3NFbGFwc2VkID0gc2Vzc2lvbl9vYmoucG9tb3NFbGFwc2VkO1xuICAgIHRoaXMuc3RhcnREYXRlID0gbmV3IERhdGUoc2Vzc2lvbl9vYmouc3RhcnREYXRlKTtcbiAgICB0aGlzLmFsbFRhc2tzID0gc2Vzc2lvbl9vYmouYWxsVGFza3MubWFwKCh0YXNrT2JqKSA9PiB7XG4gICAgICBsZXQgdCA9IG5ldyBUYXNrKCk7XG4gICAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tPYmopO1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2VyaWFsaXplSW50b09iaigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsIGFsbFRhc2tzOiB0aGlzLmFsbFRhc2tzLm1hcCgodGFzaykgPT4gdGFzay5zZXJpYWxpemVJbnRvT2JqKCkpLCBtb2RlOiB0aGlzLm1vZGUsIHRpbWU6IHRoaXMudGltZSwgcG9tb3NFbGFwc2VkOiB0aGlzLnBvbW9zRWxhcHNlZCwgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKClcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0IGEgcG9tbyBzZXNzaW9uIG9iamVjdFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICogQHJldHVybnMge1BvbW9TZXNzaW9uIHwgbnVsbH0gdGhlIHNlc3Npb24gZm9yIHRoaXMgaWQgb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzZXNzaW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb21vU2Vzc2lvbihpZCkge1xuICBjb25zdCBhbGxTZXNzaW9ucyA9IGdldE9iamVjdChQT01PX1NFU1NJT05fTUFQKTtcbiAgbGV0IHAgPSBuZXcgUG9tb1Nlc3Npb24oKTtcbiAgaWYgKCFhbGxTZXNzaW9uc1tpZF0pIHJldHVybiBudWxsO1xuICByZXR1cm4gcC5wYXJzZVNlc3Npb25Gcm9tT2JqKGFsbFNlc3Npb25zW2lkXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVBvbW9TZXNzaW9uKHNlc3Npb24pIHtcbiAgY29uc3QgYWxsU2Vzc2lvbnMgPSBnZXRPYmplY3QoUE9NT19TRVNTSU9OX01BUCk7XG4gIGFsbFNlc3Npb25zW3Nlc3Npb24uaWRdID0gc2Vzc2lvbi5zZXJpYWxpemVJbnRvT2JqKCk7XG4gIHN0b3JlT2JqZWN0KFBPTU9fU0VTU0lPTl9NQVAsIGFsbFNlc3Npb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ld1Nlc3Npb25JRCgpIHtcbiAgbGV0IHByZXZJRCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFBPTU9fU0VTU0lPTl9JRCkpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShQT01PX1NFU1NJT05fSUQsIHByZXZJRCArIDEpO1xuICByZXR1cm4gcHJldklEO1xufVxuXG4vKipcbiAqIFNldCB0aGUgY3VycmVudCBzZXNzaW9uJ3Mgc3RhdHVzXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIC0gY2FuIGJlIFwiY29tcGxldGVcIiBvciBcImluLXByb2dyZXNzXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzKHN0YXR1cykge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMQVRFU1RfUE9NT19TRVNTSU9OX1NUQVRVUywgc3RhdHVzKTtcbn1cblxuLyoqXG4gKiBXaWxsIHJldHVybiB0aGUgc2Vzc2lvbiBJRCBvZiB0aGUgbGFzdCBzZXNzaW9uIGlmIGl0IHdhcyBub3QgZW5kZWQuIE90aGVyd2lzZSBpZiB0aGUgbGFzdCBzZXNzaW9uIGRvZXMgbm90IGV4aXN0IFxuICogb3Igd2FzIGVuZGVkIGFscmVhZHksIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBudWxsXG4gKiBcbiAqIEByZXR1cm5zIHtudW1iZXIgfCBudWxsfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF0ZXN0U2Vzc2lvbklEKCkge1xuICBsZXQgc3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTEFURVNUX1BPTU9fU0VTU0lPTl9TVEFUVVMpO1xuICBpZiAoc3RhdHVzID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oUE9NT19TRVNTSU9OX0lEKSkgLSAxO1xuICB9XG59XG5cbi8qKlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gdHJ1ZSBpZiB0aGVyZSBpcyBhIHVuZmluaXNoZWQgc2Vzc2lvbiB0aGF0IHdhcyBub3QgY29tcGxldGVkIG9yIHF1aXR0ZWQuIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkge1xuICBsZXQgc2Vzc2lvbklEID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gIGlmIChzZXNzaW9uSUQgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgbGV0IGN1cnJlbnRQb21vU2Vzc2lvbiA9IGdldFBvbW9TZXNzaW9uKHNlc3Npb25JRCk7XG4gIGlmIChjdXJyZW50UG9tb1Nlc3Npb24gIT09IG51bGwgJiYgY3VycmVudFBvbW9TZXNzaW9uLm1vZGUgIT09IFBPTU9fU0VTU0lPTl9NT0RFUy5DT01QTEVURSAmJiBjdXJyZW50UG9tb1Nlc3Npb24ubW9kZSAhPT0gUE9NT19TRVNTSU9OX01PREVTLklOQUNUSVZFKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGludWVBY3RpdmVTZXNzaW9uKCkge1xuICBpZiAodGhlcmVJc1VuZmluaXNoZWRTZXNzaW9uKCkpIHtcbiAgICB3aW5kb3cubG9jYXRpb24gPSBcIi90aW1lci5odG1sP2xvYWRTYXZlZD10cnVlXCI7XG4gIH1cbn0iLCJpbXBvcnQgeyBnZXRPYmplY3QsIHN0b3JlT2JqZWN0IH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0UG9tb1Nlc3Npb24gfSBmcm9tIFwiLi9zZXNzaW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklEIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb24gXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbW9zUmVxdWlyZWQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbklELCB0aXRsZSwgZGVzY3JpcHRpb24sIHBvbW9zUmVxdWlyZWQpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uSUQgPSBzZXNzaW9uSUQ7XG4gICAgICAgIHRoaXMuaWQgPSAtMTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucG9tb3NSZXF1aXJlZCA9IHBvbW9zUmVxdWlyZWQ7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucG9tb3NVc2VkID0gMDtcbiAgICB9XG4gICAgcGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaikge1xuICAgICAgICBsZXQgdGFzayA9IG5ldyBUYXNrKHRhc2tfb2JqLnNlc3Npb25JRCwgdGFza19vYmoudGl0bGUsIHRhc2tfb2JqLmRlc2NyaXB0aW9uLCB0YXNrX29iai5wb21vc1JlcXVpcmVkKTtcbiAgICAgICAgdGFzay5jb21wbGV0ZWQgPSB0YXNrX29iai5jb21wbGV0ZWQ7XG4gICAgICAgIHRhc2suaWQgPSB0YXNrX29iai5pZDtcbiAgICAgICAgdGFzay5wb21vc1VzZWQgPSB0YXNrX29iai5wb21vc1VzZWQ7XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbiAgICBzZXJpYWxpemVJbnRvT2JqKCkge1xuICAgICAgICByZXR1cm4geyB0aXRsZTogdGhpcy50aXRsZSwgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sIHBvbW9zUmVxdWlyZWQ6IHRoaXMucG9tb3NSZXF1aXJlZCwgY29tcGxldGVkOiB0aGlzLmNvbXBsZXRlZCwgcG9tb3NVc2VkOiB0aGlzLnBvbW9zVXNlZCwgaWQ6IHRoaXMuaWQsIHNlc3Npb25JRDogdGhpcy5zZXNzaW9uSUQgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBQT01PX1RBU0tfTUFQID0gXCJwb21vX3Rhc2tfbWFwXCI7XG5leHBvcnQgY29uc3QgUE9NT19UQVNLX0lOREVYID0gXCJwb21vX3Rhc2tfaW5kZXhcIjtcblxuLyoqXG4gKiBXaWxsIHN0b3JlIGEgbmV3IG9yIHVwZGF0ZWQgdGFzayBpbnRvIGxvY2FsIHN0b3JhZ2VcbiAqIFxuICogSGFzIGEgc2lkZSBlZmZlY3Qgb2YgYWRkaW5nIHRoZSBpZCBvZiB0aGUgbmV3IHRhc2sgaWYgaXQgd2FzbnQgc3RvcmVkIGluIHN0b3JhZ2UgYmVmb3JlXG4gKiBcbiAqIEBwYXJhbSB7VGFza30gdGFza1xuICogQHJldHVybnMge251bWJlcn0gLSB0aGUgaWQgb2YgdGhlIHRhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVGFzayh0YXNrKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGlmICghdGFza19tYXBbdGFzay5pZF0pIHtcbiAgICAgICAgLy8gaWYgdGFzayBtYXAgZG9lcyBub3QgaGF2ZSB0aGlzIHRhc2ssIGNyZWF0ZSBhIG5ldyBpbmRleFxuICAgICAgICBsZXQgaWQgPSBwYXJzZUludChnZXRPYmplY3QoUE9NT19UQVNLX0lOREVYKSk7XG4gICAgICAgIHRhc2suaWQgPSBpZDtcbiAgICAgICAgLy8gaW5jcmVtZW50IGdsb2JhbCBpZFxuICAgICAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfSU5ERVgsIGlkICsgMSk7XG4gICAgfVxuICAgIGxldCBvYmogPSB0YXNrLnNlcmlhbGl6ZUludG9PYmooKTtcbiAgICB0YXNrX21hcFt0YXNrLmlkXSA9IG9iajtcbiAgICBzdG9yZU9iamVjdChQT01PX1RBU0tfTUFQLCB0YXNrX21hcCk7XG4gICAgcmV0dXJuIHRhc2suaWQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlkXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgXG4gKiBAcmV0dXJucyB7VGFza31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2soaWQpIHtcbiAgICBsZXQgdGFza19tYXAgPSBnZXRPYmplY3QoUE9NT19UQVNLX01BUCk7XG4gICAgbGV0IHRhc2tfb2JqID0gdGFza19tYXBbaWRdO1xuICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICB0ID0gdC5wYXJzZVRhc2tGcm9tT2JqKHRhc2tfb2JqKTtcbiAgICByZXR1cm4gdDtcblxufVxuLyoqXG4gKiBHZXQgYWxsIHRhc2tzXG4gKiBcbiAqIEByZXR1cm5zIHtNYXA8bnVtYmVyLCBUYXNrPn0gLSBhIG1hcCBmcm9tIHRhc2sgaWQgdG8gdGFza1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsVGFza3MoKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGxldCBwYXJzZWRfdGFza19tYXAgPSB7fTtcbiAgICBmb3IgKGxldCBpZCBpbiB0YXNrX21hcCkge1xuICAgICAgICBsZXQgdGFza19vYmogPSB0YXNrX21hcFtpZF07XG4gICAgICAgIGxldCB0ID0gbmV3IFRhc2soKTtcbiAgICAgICAgdCA9IHQucGFyc2VUYXNrRnJvbU9iaih0YXNrX29iaik7XG4gICAgICAgIHBhcnNlZF90YXNrX21hcFtpZF0gPSB0O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkX3Rhc2tfbWFwO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHNwZWNpZmljIHRhc2sgZnJvbSBkYXRhYmFzZSBieSB0aGUgdW5pcXVlIHRhc2sgSURcbiAqIFxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVGFza0J5VGFza0lEKGlkKSB7XG4gICAgbGV0IHRhc2tfbWFwID0gZ2V0T2JqZWN0KFBPTU9fVEFTS19NQVApO1xuICAgIGRlbGV0ZSB0YXNrX21hcFtpZF07XG4gICAgc3RvcmVPYmplY3QoUE9NT19UQVNLX01BUCwgdGFza19tYXApO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgdW5maW5pc2hlZCB0YXNrcyBmcm9tIHRoZSBwcmV2aW91cyBzZXNzaW9uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSB0cnVlIGlmIHVuaWZpbmlzaGVkIHRhc2tzIGV4aXN0LCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFyZVRoZXJlVW5maW5pc2hlZFRhc2tzRnJvbUxhc3RTZXNzaW9uKCkge1xuICAgIGxldCBvbGRTZXNzaW9uSUQgPSBnZXRMYXRlc3RTZXNzaW9uSUQoKTtcbiAgICBpZiAob2xkU2Vzc2lvbklEID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHNlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihvbGRTZXNzaW9uSUQpO1xuICAgIGlmIChzZXNzaW9uID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHNlc3Npb24uY3VycmVudFRhc2soKSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgZ2V0T2JqZWN0IH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGdldExhdGVzdFNlc3Npb25JRCwgZ2V0TmV3U2Vzc2lvbklELCBnZXRQb21vU2Vzc2lvbiwgUG9tb1Nlc3Npb24sIHNldEN1cnJlbnRTZXNzaW9uU3RhdHVzLCBzdG9yZVBvbW9TZXNzaW9uLCBQT01PX1NFU1NJT05fTUFQLCBQT01PX1NFU1NJT05fTU9ERVMgfSBmcm9tIFwiLi4vZGF0YWJhc2Uvc2Vzc2lvblwiO1xuXG5leHBvcnQgY2xhc3MgUG9tb1N0YXRzIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRlKSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgICAgIHRoaXMudGFza3MgPSB7fTtcblxuICAgICAgICB0aGlzLmdyZWVuVGFza3MgPSAwO1xuICAgICAgICB0aGlzLnllbGxvd1Rhc2tzID0gMDtcbiAgICAgICAgdGhpcy5yZWRUYXNrcyA9IDA7XG5cbiAgICAgICAgbGV0IGlkID0gZ2V0TGF0ZXN0U2Vzc2lvbklEKCk7XG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgd2hpbGUoaWQgIT0gMCkge1xuICAgICAgICAgICAgbGV0IHNlc3Npb24gPSBnZXRQb21vU2Vzc2lvbihpZCk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5tb2RlICE9PSBQT01PX1NFU1NJT05fTU9ERVMuQ09NUExFVEUpIHtcbiAgICAgICAgICAgICAgICBpZCAtPSAxO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNlc3Npb25fb2JqZWN0X2RhdGUgPSBzZXNzaW9uLnN0YXJ0RGF0ZTtcbiAgICAgICAgICAgIGlmKHRoaXMuZGF0ZS5nZXRNb250aCgpID09PSBzZXNzaW9uX29iamVjdF9kYXRlLmdldE1vbnRoKCkgJiYgdGhpcy5kYXRlLmdldERhdGUoKSA9PT0gc2Vzc2lvbl9vYmplY3RfZGF0ZS5nZXREYXRlKCkgJiYgdGhpcy5kYXRlLmdldFllYXIoKSA9PT0gc2Vzc2lvbl9vYmplY3RfZGF0ZS5nZXRZZWFyKCkpe1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNlc3Npb24uYWxsVGFza3MpXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGtleSA9PiB0aGlzLnRhc2tzW2NvdW50ZXIrK10gPSBzZXNzaW9uLmFsbFRhc2tzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aGlzLmRhdGUuZ2V0TW9udGgoKSA+IHNlc3Npb25fb2JqZWN0X2RhdGUuZ2V0TW9udGgoKSB8fCB0aGlzLmRhdGUuZ2V0RGF0ZSgpID4gc2Vzc2lvbl9vYmplY3RfZGF0ZS5nZXREYXRlKCkgfHwgdGhpcy5kYXRlLmdldFllYXIoKSA+IHNlc3Npb25fb2JqZWN0X2RhdGUuZ2V0WWVhcigpKXtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBpZCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgdGFza0lEIGluIHRoaXMudGFza3MpIHtcbiAgICAgICAgICAgIGlmKHRoaXMudGFza3NbdGFza0lEXS5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrc1t0YXNrSURdLnBvbW9zVXNlZCA8PSB0aGlzLnRhc2tzW3Rhc2tJRF0ucG9tb3NSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyZWVuVGFza3MrPTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgdGhpcy55ZWxsb3dUYXNrcys9MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgdGhpcy5yZWRUYXNrcys9MTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvKipcbiAqIFdpbGwgcmFuZG9tbHkgcGljayBhIHRoZW1lIGFuZCB1bmlxdWUgYmFja2dyb3VuZCBkZXBlbmRpbmcgb24gd2hhdCBkYXkgaXQgaXMgYW5kIHdoYXQgdGltZSBpdCBpcyBhbmQgc2V0IGl0IG9uIHRoZSBwYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RBbmRTZXRUaGVtZSh0b2RheSA9IG5ldyBEYXRlKCkpIHtcbiAgbGV0IGlkID0gMDtcbiAgbGV0IG51bUJHcyA9IDY7XG5cbiAgbGV0IGQgPSB0b2RheS5nZXREYXkoKTtcblxuICBsZXQgc2VlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYmctc2VlZFwiKTtcblxuICBpZiAoc2VlZCA9PT0gbnVsbCB8fCBzZWVkWzBdICE9IGQpIHtcbiAgICBzZWVkID0gZCArIFwiLVwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtQkdzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImJnLXNlZWRcIiwgc2VlZCk7XG4gIH1cbiAgbGV0IHRpbWVQZXJpb2QgPSBnZXRUaGVtZU1vZGUodG9kYXkpO1xuICBpZCA9IHBhcnNlSW50KHNlZWRbMl0pO1xuXG4gIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZHJvcFwiKTtcbiAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiLi4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kcy8ke3RpbWVQZXJpb2R9L2JnJHtpZH0uanBnXCIpYDtcbn07XG5cbmV4cG9ydCBjb25zdCBUSEVNRV9NT0RFUyA9IHtcbiAgREFZOiBcImRheVwiLFxuICBOSUdIVDogXCJuaWdodFwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRoZW1lTW9kZSh0b2RheSA9IG5ldyBEYXRlKCkpIHtcbiAgbGV0IHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5EQVk7XG4gIGlmICh0b2RheS5nZXRIb3VycygpIDwgNCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5OSUdIVDtcbiAgfVxuICBlbHNlIGlmICh0b2RheS5nZXRIb3VycygpIDwgMTgpIHtcbiAgICB0aW1lUGVyaW9kID0gVEhFTUVfTU9ERVMuREFZO1xuICB9IGVsc2UgaWYgKHRvZGF5LmdldEhvdXJzKCkgPCAyNCkge1xuICAgIHRpbWVQZXJpb2QgPSBUSEVNRV9NT0RFUy5OSUdIVDtcbiAgfVxuICByZXR1cm4gdGltZVBlcmlvZDtcbn0iLCJpbXBvcnQgeyBpbml0aWFsaXplRGF0YWJhc2UgfSBmcm9tIFwiLi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgZ2V0TGF0ZXN0U2Vzc2lvbklEIH0gZnJvbSBcIi4vZGF0YWJhc2Uvc2Vzc2lvblwiO1xuaW1wb3J0IHsgUG9tb1N0YXRzIH0gZnJvbSBcIi4vZGF0YWJhc2Uvc3RhdHNcIjtcbmltcG9ydCB7IHJlbmRlckVmZmljaWVuY3lXZWVrbHlEYXRhLCByZW5kZXJFZmZpY2llbmN5RGF0YSB9IGZyb20gXCIuL2hpc3RvcnktZ3JhcGhcIjtcbmltcG9ydCB7IHNlbGVjdEFuZFNldFRoZW1lIH0gZnJvbSBcIi4vdXRpbHMvdGhlbWVcIjtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgc2VsZWN0QW5kU2V0VGhlbWUoKTtcbiAgICAvLyBUT0RPOiBsb2FkIGRhdGEgZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAgaW5pdGlhbGl6ZURhdGFiYXNlKCk7XG4gICAgbGV0IHN0YXRzID0gbmV3IFBvbW9TdGF0cyhuZXcgRGF0ZSgpKTtcbiAgICBsZXQgdGFza0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tMaXN0XCIpO1xuICAgIGZvcihsZXQgdGFza0lEIGluIHN0YXRzLnRhc2tzKSB7XG4gICAgICAgIGxldCB0YXNrID0gc3RhdHMudGFza3NbdGFza0lEXTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tFbGVtZW50ID0gYDxwb21vLXRhc2sgZGVzY3JpcHRpb24gPVwiJHt0YXNrLmRlc2NyaXB0aW9ufVwiIHBvbW9zVXNlZD1cIiR7dGFzay5wb21vc1VzZWR9XCIsIHBvbW9zUmVxdWlyZWQgPVwiJHt0YXNrLnBvbW9zUmVxdWlyZWR9XCI+JHt0YXNrLnRpdGxlfTwvcG9tby10YXNrPmA7XG4gICAgICAgIHRhc2tMaXN0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjdXJyZW50VGFza0VsZW1lbnQpO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFza0xpc3QuY2hpbGROb2Rlc1t0YXNrTGlzdC5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBlbGVtZW50LnRhc2sgPSB0YXNrO1xuICAgICAgICBlbGVtZW50LnNoYWRvd1Jvb3QuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbM10uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBlbGVtZW50LnNoYWRvd1Jvb3QuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMl0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBpZih0YXNrLmNvbXBsZXRlZCkge1xuICAgICAgICAgICAgaWYodGFzay5wb21vc1VzZWQgPD0gdGFzay5wb21vc1JlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zaGFkb3dSb290LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJnb29kVGltaW5nVGFza1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgZWxlbWVudC5zaGFkb3dSb290LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJiYWRUaW1pbmdUYXNrXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgZWxlbWVudC5zaGFkb3dSb290LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJpbmNvbXBsZXRlVGFza1wiKTtcbiAgICB9XG4gICAgbGV0IGRhdGEgPSB7XG4gICAgICAgIGNvbXBsZXRlOiBzdGF0cy5ncmVlblRhc2tzLFxuICAgICAgICBvdmVydGltZTogc3RhdHMueWVsbG93VGFza3MsXG4gICAgICAgIGluY29tcGxldGU6IHN0YXRzLnJlZFRhc2tzLFxuICAgIH07XG4gICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWZmaWNpZW5jeS1jaGFydFwiKTtcbiAgICByZW5kZXJFZmZpY2llbmN5RGF0YShjYW52YXMsIGRhdGEpO1xuICAgIGxldCBjYW52YXMyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZmZpY2llbmN5LXdlZWtseS1jaGFydFwiKTtcblxuICAgIGxldCBzZXZlbkRhdGVzID0gZGF0ZXNGb3JTZXZlbkRheXMoKTtcbiAgICBzZXZlbkRhdGVzLnJldmVyc2UoKTtcbiAgICBsZXQgZGF0ZXNGb3JHcmFwaCA9IFtdO1xuICAgIGxldCB3ZWVrU3RhdHMgPSBbXTtcbiAgICBmb3IobGV0IGRhdGVJRCBpbiBzZXZlbkRhdGVzKSB7XG4gICAgICAgIGRhdGVzRm9yR3JhcGgucHVzaChuZXcgRGF0ZSgoc2V2ZW5EYXRlc1tkYXRlSURdKS5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIG5ldyBEYXRlKHNldmVuRGF0ZXNbZGF0ZUlEXSkuZ2V0RGF0ZSgpKTtcbiAgICAgICAgd2Vla1N0YXRzLnB1c2gobmV3IFBvbW9TdGF0cyhuZXcgRGF0ZShzZXZlbkRhdGVzW2RhdGVJRF0pKSk7XG4gICAgfVxuICAgIGxldCBjb21wbGV0ZVdlZWsgPSBbXTtcbiAgICBsZXQgb3ZlclRpbWVXZWVrID0gW107XG4gICAgbGV0IGluY29tcGxldGVXZWVrID0gW107XG4gICAgZm9yKGxldCBzdGF0SUQgaW4gd2Vla1N0YXRzKSB7XG4gICAgICAgIGNvbXBsZXRlV2Vlay5wdXNoKHdlZWtTdGF0c1tzdGF0SURdLmdyZWVuVGFza3MpO1xuICAgICAgICBvdmVyVGltZVdlZWsucHVzaCh3ZWVrU3RhdHNbc3RhdElEXS55ZWxsb3dUYXNrcyk7XG4gICAgICAgIGluY29tcGxldGVXZWVrLnB1c2god2Vla1N0YXRzW3N0YXRJRF0ucmVkVGFza3MpO1xuICAgIH1cbiAgICBsZXQgd2Vla2x5RGF0YSA9IHtcbiAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlV2VlayxcbiAgICAgICAgb3ZlcnRpbWU6IG92ZXJUaW1lV2VlayxcbiAgICAgICAgaW5jb21wbGV0ZTogaW5jb21wbGV0ZVdlZWssXG4gICAgfTtcbiAgICByZW5kZXJFZmZpY2llbmN5V2Vla2x5RGF0YShjYW52YXMyLCB3ZWVrbHlEYXRhLCBkYXRlc0ZvckdyYXBoKTtcbn0pO1xuXG5mdW5jdGlvbiBkYXRlc0ZvclNldmVuRGF5cygpIHtcbiAgICBsZXQgZGF0ZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpPTA7IGk8NzsgaSsrKSB7XG4gICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpIC0gaSk7XG4gICAgICAgIGRhdGVzLnB1c2goZCk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlcztcbn0iLCIvKipcbiAqIFJlbmRlcnMgYSBiYXIgY2hhcnQgb250byB0aGUgZ2l2ZW4gY2hhcnQgZWxlbWVudCBzaG93aW5nIHRoZSBkYWlseSBkYXRhXG4gKiBcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNoYXJ0ZWxlbWVudCAtIHRoZSBlbGVtZW50IHRvIHJlbmRlciBjaGFydCBkYXRhIG9uXG4gKiBAcGFyYW0ge3tjb21wbGV0ZTogbnVtYmVyLCBvdmVydGltZTogbnVtYmVyLCBpbmNvbXBsZXRlOiBudW1iZXJ9fSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJFZmZpY2llbmN5RGF0YShjaGFydGVsZW1lbnQsIGRhdGEpIHtcbiAgICBsZXQgY3R4ID0gY2hhcnRlbGVtZW50LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBsZXQgbGFiZWxzID0gW1wiVGFza3MgQ29tcGxldGVkIG9uIFRpbWVcIiwgXCJUYXNrcyBDb21wbGV0ZWQgb3ZlciBUaW1lXCIsIFwiVGFza3MgSW5jb21wbGV0ZVwiXTtcbiAgICBsZXQgY29sb3JzID0gW1wiIzIyREQ5QVwiLCBcIiNGOUM2NDRcIiwgXCIjRkE3RjdGXCJdO1xuICAgIGxldCBteUNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuICAgICAgICB0eXBlOiBcImJhclwiLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBsYWJlbHM6IGxhYmVscyxcbiAgICAgICAgICAgIGRhdGFzZXRzOiBbe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBcIiMgb2YgVGFza3NcIixcbiAgICAgICAgICAgICAgICBkYXRhOiBbZGF0YS5jb21wbGV0ZSwgZGF0YS5vdmVydGltZSwgZGF0YS5pbmNvbXBsZXRlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycyxcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogY29sb3JzLFxuICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxXG4gICAgICAgICAgICB9XVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBsZWdlbmQ6IGZhbHNlLFxuICAgICAgICAgICAgc2NhbGVzOiB7XG4gICAgICAgICAgICAgICAgeUF4ZXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBsaW5lIGNoYXJ0IG9udG8gdGhlIGNoYXJ0IGVsZW1lbnQgb2Ygd2Vla2x5IGRhdGFcbiAqIFxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2hhcnRlbGVtZW50IC0gdGhlIGVsZW1lbnQgdG8gcmVuZGVyIGNoYXJ0IGRhdGEgb25cbiAqIEBwYXJhbSB7e2NvbXBsZXRlOiBudW1iZXJbXSwgb3ZlcnRpbWU6IG51bWJlcltdLCBpbmNvbXBsZXRlOiBudW1iZXJbXX19IHdlZWtseURhdGFcbiAqIEBwYXJhbSB7c3RyaW5nW119IGRhdGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJFZmZpY2llbmN5V2Vla2x5RGF0YShjaGFydGVsZW1lbnQsIHdlZWtseURhdGEsIGRhdGVzKSB7XG4gICAgbGV0IGN0eCA9IGNoYXJ0ZWxlbWVudC5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgbGV0IGxhYmVscyA9IFtcIlRhc2tzIENvbXBsZXRlZCBvbiBUaW1lXCIsIFwiVGFza3MgQ29tcGxldGVkIG92ZXIgVGltZVwiLCBcIlRhc2tzIEluY29tcGxldGVcIl07XG4gICAgbGV0IGNvbG9ycyA9IFtcIiMyMkREOUFcIiwgXCIjRjlDNjQ0XCIsIFwiI0ZBN0Y3RlwiXTtcbiAgICBsZXQgbXlDaGFydCA9IG5ldyBDaGFydChjdHgsIHtcbiAgICAgICAgdHlwZTogXCJsaW5lXCIsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGxhYmVsczogZGF0ZXMsXG4gICAgICAgICAgICBkYXRhc2V0czogW3tcbiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWxzWzBdLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcIiMyMkREOUFcIixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB3ZWVrbHlEYXRhLmNvbXBsZXRlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsc1sxXSxcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogXCIjRjlDNjQ0XCIsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICAgICAgZGF0YTogd2Vla2x5RGF0YS5vdmVydGltZSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWxzWzJdLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcIiNGQTdGN0ZcIixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB3ZWVrbHlEYXRhLmluY29tcGxldGVcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgICAgIHlBeGVzOiBbe1xuICAgICAgICAgICAgICAgICAgICB0aWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW5BdFplcm86IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9